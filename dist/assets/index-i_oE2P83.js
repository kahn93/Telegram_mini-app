import{r as i,j as e,u as Se,T as Ae,R as ne,a as Pe,c as ct,b as dt}from"./vendor-react-DI3R431Q.js";import{c as ut}from"./vendor-supabase-DoWyVS0q.js";import{_ as ft}from"./vendor-BaVVdSmy.js";import"./vendor-ton-DdWMKeXQ.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const p of r)if(p.type==="childList")for(const s of p.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function d(r){const p={};return r.integrity&&(p.integrity=r.integrity),r.referrerPolicy&&(p.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?p.credentials="include":r.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function a(r){if(r.ep)return;r.ep=!0;const p=d(r);fetch(r.href,p)}})();const gt="https://pklvbpngamcbhsaxmlgn.supabase.co",pt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrbHZicG5nYW1jYmhzYXhtbGduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MzE2NTEsImV4cCI6MjA3MTUwNzY1MX0.DcbX79sJg0aPGuCdGJCcCl9qoPWP4kM1E5GvO0SLeNQ",T=ut(gt,pt),Le="/assets/rocket-DzE50pAu.png",ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAAAuCAYAAACFxeMqAAADRElEQVR42u2dQW7tIAxFs4cu6m+hS+l+OvwbfLN00kqvPGNsX5sGcpGuVLUNAXMwYEhyHN/p/9txUtTqOp4TDUJtB7dKPBPTIumF4xbqx8f7SVGrqYX7INTUjnATbIpgUxTBpiiCTVEEm0qGIfr/0rXW8BzBBhphtfqg9YtcPwK1B2778688Ho9T0zJgI4F1tOGi5Z7pSSxl6IHizctjkx8IPdc9X9NevyXYo8qglew1QqRztOX9K8hbSCRQwvkYbDOC1HrNS7soNq20bxnYlZ67dw8rCBrQ5+e/U1I14M/l/7lftMO3+YzK3ru3B2ypzO3fNWXbthTsUWUiAEn5eyCQvIunrJUeBq1XC7UV0minMpXZAXamXS8H9qgH9/K3NAYC9AwPk1Uv6fqoPb1gv1zr8diJc+7Lgi3Bo+XtASCjbNlwR+umQZ0BdtSeo3IRbEfeCABXBrtXN0udNGCs94w6CnpsAzyWfC1gR8olTVt6cdvoAjlUP0NHzQA7o2PcCmzLPFeKelgM5PVsbqCFBreGOqNg9yIPEWC890M6I8HWVsvOnt+Lp2YCrcHi9dpR7xYFBnEUBNs53GeAjcZTtfv3gA7DCdjNawtpZEHy8HYOgq1MRVzzchBsD9DIaBUdVby2yAAbzed2UxHLUBbpKJGNAmmU8Oz8RYfeWWAjjodgF1TWO39DwO55VY8NVgW7Z9OMtQvBNgb4Ld4+c6cx4rnVxeNksNHFXmWZt52KSI2OLqYyzoSggFtDf1cBW7Np5qJ8e7BHjW7NB/H8VYB7wn4VG1vRcxs9qNGOYi7nLmBrjY6AlzkdUeeeE7bUZ4Ldi+NnrV1uBXZvkwM1WMVcG11c/hXYGeseZBS4LdjZB5WyvUz0rPSuYGc6iiXARmK5WdGLNh8U7kqoK+ue9eBHz57RPQatnJd+Sh09x5AZGciObVc+iFoZFam05fZRESSWiz7lbr2fdOzTuvs54+nqijpX2jM7r8u/VyTjGGelrA0065UBlfVvF3wVtkzLZwWwo0c4ZyXxvR6DjjD7PSN3S3zF2WSo+Bo0vruPogg2RRFsiiLYFMEm2NTuYBNuasvP4fEDpkxbfcBU+iVF8XvqFHVBqL8ADLBVpSxQqIEAAAAASUVORK5CYII=",$="/assets/gift-D7ErWEXl.png",de="/assets/money-DHhF0O9w.png";async function mt(n){const{data:t}=await T.from("nfts").select("*").eq("userid",n);return t||[]}async function tt(n){const{data:t,error:d}=await T.from("nfts").insert([n]);return{data:t,error:d}}const xt=()=>{const[n,t]=i.useState([]),[d,a]=i.useState(!0),[r,p]=i.useState(""),[s,g]=i.useState(""),[o,u]=i.useState("item"),[b,h]=i.useState(!1),[x,l]=i.useState(""),[f,y]=i.useState(""),[S,c]=i.useState("");i.useEffect(()=>{T.from("marketplace_listings").select("*").eq("status","active").then(({data:A})=>{t(A||[]),a(!1)})},[]);const C=async A=>{await T.from("marketplace_listings").update({status:"sold"}).eq("id",A.id),t(n.filter(M=>M.id!==A.id)),alert(`Purchased ${A.item}!`)};return e.jsxs("div",{style:{maxWidth:600,margin:"32px auto",padding:24},children:[e.jsx("h2",{style:{textAlign:"center",color:"#24308a",fontWeight:800},children:"Marketplace"}),e.jsxs("form",{style:{marginBottom:32,background:"#fff",borderRadius:8,padding:16,boxShadow:"0 2px 8px #0001"},onSubmit:async A=>{if(A.preventDefault(),!r||!s)return;h(!0);const M=localStorage.getItem("userId")||"anon";let L;if(o==="nft"){if(!x||!f){alert("Please fill NFT name and image URL"),h(!1);return}L=Date.now().toString();const{error:E}=await tt({userid:M,nft_id:L,name:x,image_url:f,description:S});if(E){alert("Error minting NFT!"),h(!1);return}}const{error:_,data:w}=await T.from("marketplace_listings").insert([{seller:M,item:o==="nft"?x:r,price:parseFloat(s),type:o,status:"active",...o==="nft"?{nft_id:L,image_url:f,description:S}:{}}]);h(!1);const m=w;!_&&m&&m.length>0&&typeof m[0].id=="number"?(t(E=>[...E,{id:m[0].id,seller:M,item:o==="nft"?x:r,price:parseFloat(s),type:o,status:"active"}]),p(""),g(""),u("item"),l(""),y(""),c("")):alert("Error creating listing!")},children:[e.jsx("h4",{style:{margin:0,color:"#24308a"},children:"Create Listing"}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[o==="nft"?e.jsxs(e.Fragment,{children:[e.jsx("input",{placeholder:"NFT Name",value:x,onChange:A=>l(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0}),e.jsx("input",{placeholder:"Image URL",value:f,onChange:A=>y(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0}),e.jsx("input",{placeholder:"Description",value:S,onChange:A=>c(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"}})]}):e.jsx("input",{placeholder:"Item name",value:r,onChange:A=>p(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0}),e.jsx("input",{placeholder:"Price (TON)",value:s,onChange:A=>g(A.target.value.replace(/[^0-9.]/g,"")),style:{flex:1,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0,type:"number",min:"0.01",step:"0.01"}),e.jsxs("select",{value:o,onChange:A=>u(A.target.value),style:{flex:1,padding:6,borderRadius:4},children:[e.jsx("option",{value:"item",children:"Item"}),e.jsx("option",{value:"boost",children:"Boost"}),e.jsx("option",{value:"nft",children:"NFT"})]}),e.jsx("button",{type:"submit",disabled:b,style:{background:"#ffe259",color:"#222",fontWeight:700,border:"none",borderRadius:4,padding:"0 16px"},children:b?"Listing...":"List"})]})]}),d?e.jsx("div",{style:{textAlign:"center",color:"#888",marginTop:32},children:"Loading..."}):e.jsx("ul",{style:{listStyle:"none",padding:0},children:n.map(A=>e.jsxs("li",{style:{background:"rgba(255,255,255,0.12)",borderRadius:8,margin:"12px 0",padding:16,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[A.type==="boost"&&e.jsx("img",{src:Le,alt:"Boost",style:{width:28,verticalAlign:"middle"}}),A.type==="nft"&&e.jsx("img",{src:ht,alt:"NFT",style:{width:28,verticalAlign:"middle"}}),A.type==="item"&&e.jsx("img",{src:$,alt:"Item",style:{width:28,verticalAlign:"middle"}}),e.jsx("strong",{children:A.item})," ",e.jsxs("span",{style:{fontSize:12,color:"#888"},children:["(",A.type,")"]}),e.jsx("br",{}),e.jsxs("span",{style:{color:"#888",fontSize:11},children:["Seller: ",A.seller]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:de,alt:"TON",style:{width:22,verticalAlign:"middle"}}),e.jsxs("span",{style:{fontWeight:700,color:"#24308a"},children:[A.price," TON"]}),e.jsx("button",{style:{marginLeft:16,padding:"6px 14px",borderRadius:4,background:"#ffe259",color:"#222",fontWeight:700,border:"none",cursor:"pointer"},onClick:()=>C(A),children:"Buy"})]})]},A.id))}),!d&&n.length===0&&e.jsx("div",{style:{textAlign:"center",color:"#888",marginTop:32},children:"No active listings."})]})},yt="https://lisa-games.onrender.com";async function bt(n,t,d){return fetch(`${yt}/webhook/analytics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:n,userId:t,referrerId:d})})}function jt(){"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()}function vt(n,t){"Notification"in window&&Notification.permission==="granted"&&new Notification(n,t)}const St="/assets/check-BK0B6DVF.png",At="/assets/fail-DfMFjEyK.png",we="/assets/list-DXF8oD-t.png",wt=i.createContext({notify:()=>{}}),kt=({children:n})=>{const[t,d]=i.useState(null),a=r=>{d(r),setTimeout(()=>d(null),r.duration||3e3)};return e.jsxs(wt.Provider,{value:{notify:a},children:[n,t&&e.jsxs("div",{style:{position:"fixed",top:24,right:24,zIndex:9999,background:t.type==="success"?"#00b894":t.type==="error"?"#d63031":"#222",color:"#fff",padding:"12px 24px",borderRadius:8,boxShadow:"0 2px 16px #0004",fontWeight:700,fontSize:16,minWidth:180,textAlign:"center",animation:"popNotif 0.5s",display:"flex",alignItems:"center",gap:10},children:[t.type==="success"&&e.jsx("img",{src:St,alt:"Success",style:{width:24,verticalAlign:"middle"}}),t.type==="error"&&e.jsx("img",{src:At,alt:"Error",style:{width:24,verticalAlign:"middle"}}),t.type==="info"&&e.jsx("img",{src:we,alt:"Info",style:{width:24,verticalAlign:"middle"}}),e.jsx("span",{children:t.message}),e.jsx("style",{children:`
            @keyframes popNotif {
              0% { transform: scale(0.8); opacity: 0.5; }
              60% { transform: scale(1.1); opacity: 1; }
              100% { transform: scale(1); opacity: 1; }
            }
          `})]})]})},Ct="_modalOverlay_pcjbi_1",It="_modalContent_pcjbi_14",Nt="_avatarGrid_pcjbi_24",Bt="_avatarOption_pcjbi_31",Tt="_selected_pcjbi_36",Rt="_miningButtonWrapper_pcjbi_41",Et="_miningButton_pcjbi_41",Mt="_pressed_pcjbi_58",Pt="_coinGain_pcjbi_63",Lt="_topRow_pcjbi_96",Dt="_coinBalanceCenter_pcjbi_110",_t="_passiveIncome_pcjbi_119",Wt="_energyBarContainer_pcjbi_135",zt="_energyBar_pcjbi_135",Ut="_energyText_pcjbi_176",Ot="_background_pcjbi_188",Gt="_app_pcjbi_273",Vt="_countrySelection_pcjbi_277",Ft="_menu_pcjbi_292",qt="_btn_pcjbi_310",Kt="_coinBalance_pcjbi_110",Ht="_coinsPerTap_pcjbi_332",B={modalOverlay:Ct,modalContent:It,avatarGrid:Nt,avatarOption:Bt,selected:Tt,miningButtonWrapper:Rt,miningButton:Et,pressed:Mt,coinGain:Pt,topRow:Lt,coinBalanceCenter:Dt,passiveIncome:_t,energyBarContainer:Wt,energyBar:zt,energyText:Ut,background:Ot,app:Gt,countrySelection:Vt,menu:Ft,btn:qt,coinBalance:Kt,coinsPerTap:Ht},ue="users";async function Qt(n){await T.from(ue).upsert([n],{onConflict:"userid"})}async function Yt(n,t){await T.from(ue).update(t).eq("userid",n)}async function Ee(n,t){await T.from(ue).update({coins:t}).eq("userid",n)}async function De(n){const{data:t}=await T.from(ue).select("*").eq("userid",n).single();return t||null}async function Jt(){const{data:n}=await T.from(ue).select("*");return n||[]}async function Zt(n){const{data:t}=await T.from("users").select("*").eq("referral_code",n).single();return t}async function ze(n,t,d,a=1){await T.from("referrals").insert([{referrer_id:n,referred_id:t,parent_referral_id:d||null,referral_level:a}])}const Xt=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua & Deps","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Rep","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea North","Korea South","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russian Federation","Rwanda","St Kitts & Nevis","St Lucia","Saint Vincent & the Grenadines","Samoa","San Marino","Sao Tome & Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],$t="_leaderboard_1c6t9_1",en="_top1_1c6t9_49",tn="_top2_1c6t9_57",nn="_top3_1c6t9_65",he={leaderboard:$t,top1:en,top2:tn,top3:nn},H="/assets/crown-D07N0x4g.png",ce="/assets/trophy-fGOFSCFR.png",sn=()=>{const[n,t]=i.useState([]),[d,a]=i.useState([]),[r,p]=i.useState("global"),[s,g]=i.useState(""),[o,u]=i.useState([]);return i.useEffect(()=>{let b=!0;const h=async()=>{var f;const l=await Jt();if(l.sort((y,S)=>S.coins-y.coins),b){t(l);const y=localStorage.getItem("country")||(((f=l.find(c=>c.userid===localStorage.getItem("userId")))==null?void 0:f.country)??"");g(y);const S=JSON.parse(localStorage.getItem("friends")||"[]");u(S),a(l.slice(0,100))}};h();const x=setInterval(h,5e3);return()=>{b=!1,clearInterval(x)}},[]),i.useEffect(()=>{let b=n;r==="country"&&s?b=n.filter(h=>h.country===s):r==="friends"&&o.length>0&&(b=n.filter(h=>o.includes(h.userid))),a(b.slice(0,100))},[r,n,s,o]),e.jsxs("div",{className:he.leaderboard,children:[e.jsx("h2",{children:"Leaderboard"}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",marginBottom:12},children:[e.jsx("button",{onClick:()=>p("global"),style:{fontWeight:r==="global"?700:400,background:r==="global"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Global"}),e.jsx("button",{onClick:()=>p("country"),style:{fontWeight:r==="country"?700:400,background:r==="country"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Country"}),e.jsx("button",{onClick:()=>p("friends"),style:{fontWeight:r==="friends"?700:400,background:r==="friends"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Friends"})]}),e.jsx("ul",{children:d.map((b,h)=>e.jsxs("li",{className:h===0?he.top1:h===1?he.top2:h===2?he.top3:"",style:{"--i":h},children:[h===0&&e.jsx("img",{src:H,alt:"Crown",style:{width:24,marginRight:4,verticalAlign:"middle"}}),h===1&&e.jsx("img",{src:ce,alt:"Trophy",style:{width:22,marginRight:4,verticalAlign:"middle"}}),h===2&&e.jsx("img",{src:ce,alt:"Trophy",style:{width:20,marginRight:4,verticalAlign:"middle",filter:"grayscale(0.5)"}}),h+1,". ",b.userid," (",b.country,"): ",b.coins," coins"]},b.userid))})]})},oe={};function an(n){nt()||(oe[n]||(oe[n]=new Audio(`/sounds/${n}.mp3`),oe[n].volume=.5),oe[n].currentTime=0,oe[n].play())}function nt(){return localStorage.getItem("muteSounds")==="1"}function rn(n){localStorage.setItem("muteSounds",n?"1":"0")}const _e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADUAAAA0CAYAAAAqunDVAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAuGSURBVHgB7Vl9jB1VFT/33vl8b9/u1hapxdIvKBUblASjhhRQQBNEiRFKwkdJSwUWabGIEmKg2aQGhNJIkRISLAoR+VLQiIJE8Q+MQFHBhJZPv1rotrvt7r7PmTdz5/q7d+a9fZR2C9t5MTE92+ns2/dm5vzu75zfOfc8osN22P5nxqiL9ptVq9x5ZevU3kic6DK337W8qu0Wt7h3r3maMaaoS9Y1UC9/beVqt978bk8oPlwknwq2T8JyiQuHlO3sJbcwKB745kbqguUO6sXLLrPt8fhHzq7yxcU6o4L0yGcF8rhPzHaJOR6R6xIVcBT9u9j9V15JORunnM0Zja53RkYv9oOEnIiTMAdWT+oVxONsG6AcHAAnxIAa2Hwj5Wy5gnp55VXzRK12rRtKsgFCKABKBHEm8MICOwDSUyDqK+LsE3k4lPhW/ZrNsylHyxWUqjaW2o2gZElwosEkFgBxA4o5CDffS8EUAMzD746tXeh1Q34J5Wi5guJh80tWrACGTxwKgBic51bKFgdrDKmsIH5N0BkqYkHyecrRLMrReJIs4IlmiRHTgAiACIAS5JDEOcQa1gFEIskoIYoALJLEPFpEOVquoJJENgl5pHBQoo+MJQlQIR5VxYdinWwhmAJbUl+kSPXxOuVouYKCwv1VKj5XAFACQAlySjE8QmmWEHbINWpITSm1q4mOxn56nXK0XHNKOv5jTeSQjHFIixKEnIxQbGOAinAEeFwDYOoIu0CZ8FNcET56L+Vo+aofqV8HtvtGAKZisBLFOCR+jxFlIEhJleURjlizlVBcVP8UxcqTlKPlCurEx3881igWB+rCChpwuiFjasRNaEMD5yoAhgDbBJMxzjFViwmVP8RXss3XVShH60rv9+wZa5aK7XvvL5S54zKHHLRINnOhg4IEahZSjYJpTjM+2l+x4LFrf0o5W9ca2qdPWj5f7m3eYMe0tMftKTj904zSheX6OLnWL6Ij3XVLfn/zP6gL1tWth7aH12zwP+TPq/f3HUGluTOSd7b+ufi5weUBddFylfT92fxFxThIPkIzjv04zZhfYJUFVUmD1FXLvUvf1+57RZ0pLJucgk22x9ijD207XSnV1QjpCijt9BVXbLxw4Iq7XpSSP4FdLjGe4qgFzd+uvnrzX9as/skF3QKX601XrPh+yRH+JWhRv01MHK1kmcLabho44yKas/h4mj7HoWtvWA/189FFYRfM+XYh2GAUBQ9t2vSNKuVkueTUwAU3TYs8+3Iw8p1YJtNIBVQe2UbVPcMk0Tk0TglMU16p1qiyc4QsyyIfe6rY758dx+Iewa11q6+65zav4D14yy0X7aBDtENiamD5bbNDGX8dsbUKQdevdE8hAxobeoka4w10Ddy0SEfOmE3HL1pMQ8NDtHtklBzPxsYX23zsreKeXoqVRSZEiXZywe8Twt20ceMl/6Ep2pRAXXrpTcckIVuLq7+KvCiaBilJ0AoFVNmzlYKxCsCgmdUNLZpZgVBzMHSxMZ9wPBeAHBw+9okOxMOmiijgDizdZ8E4ZzHj4mcgdPCOOy5/iz6gfSBQK5fdeoJU8Tpc9mWlErPR02cpJcVRSEFtB4WjOylpgqHExnuW2U9h5cmyPYDA4euzBgagjoP3ONWxOw4B3Lhj/qVuaXGxBH/UFnz97Xde/vz79fOgoLRCrbjwe19R3LqGkTqFoQktIT+qABQpzQ4AxSGFYZmqw6+RQBOrdIeegeJok4SFVsnBmKzgk485xQQgS7OCxldSGUwyvSvWkNi73WOMK87pWcH5hk13D/zyYDPDSUGtvHDtZxLmrccdTtb54qE5XbZnlD5Z76M9foF+2B/QdooNqFp5mGq730Kf55iQS0E5cBr1CfMJ1wUosKRBOZgmabHgBgRSD7vfGoAzAH0PqA4Pdd5h5vF8wXNX3b7psi0H8lsc6I3zzntYUGPnE1jmkwgLIwFo4e4h+uKITT3sCOqb3k9sR5n+1qdDEKxFTRod2UUW2ElQ/qTSuz+9nbeQU5ZhJQWS5o6OXikRurqbb0SUIL9Ya3ahjOQQZSHe/luiX9NHLcc/bc5cZ9PWrVv3y9gBJX3mzCFraBufweoxCV+RsBm95fTSU0lIxzTGqfxOjZ4qNeG+o31HnvSR5c+i8eou9Ku6G08AJiGzs9djCQxkmmGsnQKzgM1iMwfUoRdiFthjxEYaYlTGkgHGWiFoYVxYxBU+yYYqzpy5BL4/Ivfn+6Thd9anr3zNEUctZAIOot22XO2MnucBpMBDXbDCU6biKKZ6DfWpPEaVsSFSYM5GPrla9VBsbcszosCFMG4n2mFMai2/SIVigSzPagNibSDMMO06JTzXo6hBhllBtdfu+flVBxzWTFp8d4+/wFnSS32FhRjZzaIIcwZhaXAKocQALkkHKPBEz/Yc26H+3ulU6plGTahhGNRNyERaTMAMN2EojBLayDELIWkjArhQhs6WrOtF4lwvSA8i36eomoZ/EtUwHK1QwppiMr8nBaUdDeMyDY+/QKJSoF5/AQascyjGZIgLhCWYs304ZafPEJBmJYxrxKF2Hpwns/oTUs0yITBJj/DUQLWi6vXR73GhmS1hxOZi7wVGIUIqHgNFFfwN4PT4zZ38C5ODt0k6R0G4TCAEtVdovP56Cs6bS3HTpkjnnNtEGKVNq/nRzJnkNmU5TQvVgtcqsioDBMcxz9DfiDgAo8dp4bguFQ2wMwoGx5GEuMSM2/QI++Cl9SCgtHssK4Y6zIRxcrz2hgHX482nojubrMhLwTkRAGaXJhPpbtSLTL1JgSnNiJFnhLGPsO0l2bRQvDXAGhZwxDCjYv1xjnto4ck8mVihqYFSKvOmfQ+WZTI3D6gF/6Za+C/y7VnU484hS6JJDZA7EBVhJWZjM5H86Y0YqqiAOtpeAcwADEK5UYG0J2UcCDNVBhgt+azVD2bssMwVlS32FEFNGHv3/4pljgqz6kFzmBrRLvKs6dTjzCU7LpHkAGdFAJikYWmUzyKvWMKqF8GMoKAC1ZRjGNTuRXhBVLRA6wkv7SPL7Rcq/TrIzKynCAorFVDHPq694mpCdtvpj9CMogrtjV6CqvVQEeCcGAUaE2YBJXPAjI28kVU9Pk8MK5LvBiP4QJwulKZWd0Cso6vYbwopVZkyKItZz4SseUJ6I/aeBzCaANY6OLnIi4gqjVchBB6Ym0c9/Chc76LQQr0cgBG74Be+JAhZdl+2z71aK5i9VibiO95jr9JUQfWVSjfKKPxYGDW+0E6sDpY6w4R1gGQsTW4d+fVgO0VsGHW2lywt4WCFxdmSMLZP9Wf7PTNTu7L8VPQGauD1NIlNWsTefPvN8NgTlj1IwZ4dKlGfwH37Ws/LYtucWYdCtutQWnXwozt12/R8RpLFhKy3GOo8T9yj42wKvKijlt0c+fHyB/9wy/Bkfh9c9DNbe9pa63dvb1mKsfE6qZrzVFpSM3AtWGLCYcqkWG8SGdokfIltu3htmz634zMsUzeeMZwBY2loYlmGeeLeJWz1gweevXn0/fj6vkF12pLjzjk3luE1mI1/NpPYNjMpKL4PKM+IhO0J0xgzQR15xNuSbRZI/56Y67dxxW5v2kc+8Ks/fbBZ+5RAtezU489d0owaa6SMz1FK8onQ4cZZ7aQGZRmmsIdyO0Bln2uHnG7n8b0OCvIfMW+/+5HnNjxEU7RDAtUGt/D8T8UquC5JorMTJV3KGEhBAYxmyoBCQ+uotG4ZNsl0KeBqjCvrSTB7x+KzSs8NDg4mh+JPLqBadvqi8xeiI18Ty2gZvnkq6PCDswDlmpxqMWU2vMqIyAhA3eswueGRLZuGKCfLFVTLzjxuxaw4aVwtVXIpVHO6ZdTPBUu6RdLDFPEqGqU7S7F77/1/X1+jnK0roDrvf/biVWdGcXwyHlTABvEdp+A/8/iWW1+iw3bY/j/tv8HpnMz0EzzNAAAAAElFTkSuQmCC",on="data:image/png;base64,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",ke="data:image/png;base64,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",q="/assets/cdollar-BAHfZPNA.png",fe="/assets/earn-BNCIqzz0.png",We="/assets/airdrop-CxSwq6QT.png",ie="/assets/tg-n2id2ce2.png",ln="/assets/arcade_pacman_sprites-D1QHgfjt.png",Ce="/assets/axs-DhhIb20v.png",cn=[{label:"Home",page:"coin",icon:_e},{label:"Shop",page:"Shop",icon:de},{label:"Trophies",page:"Trophies",icon:on},{label:"Tasks",page:"Tasks",icon:ke},{label:"Upgrades",page:"Upgrades",icon:q},{label:"Friends",page:"Friends",icon:we},{label:"Arcade",page:"Arcade",icon:fe},{label:"Airdrop",page:"Airdrop",icon:We},{label:"Leaderboard",page:"leaderboard",icon:H},{label:"Chat",page:"chat",icon:ie},{label:"Events",page:"events",icon:ce},{label:"NFTs",page:"Marketplace",icon:ln},{label:"Analytics",page:"useranalytics",icon:Ce},{label:"Boosts",page:"Boosts",icon:Le}],dn=localStorage.getItem("userRole")==="admin",un=({onNavigate:n})=>{const[t,d]=i.useState(nt()),a=()=>{rn(!t),d(!t)};return e.jsxs("nav",{className:B.menu,children:[cn.map(r=>e.jsx("button",{className:B.btn,onClick:()=>n(r.page),type:"button",children:r.icon&&e.jsx("img",{src:r.icon,alt:r.label,style:{height:20,width:20,verticalAlign:"middle"}})},r.page)),e.jsx("button",{className:B.btn,onClick:a,type:"button","aria-label":t?"Unmute sounds":"Mute sounds",style:{background:t?"#eee":"#ffe259",color:"#222",fontWeight:700},children:t?"ðŸ”‡":"ðŸ”Š"}),dn&&e.jsx("button",{className:B.btn,onClick:()=>n("AdminAnalytics"),type:"button",style:{background:"#ffe259",color:"#222",fontWeight:700},children:"Admin"})]})},fn="analytics_events";async function X(n,t,d){await T.from(fn).insert([{userid:n,event:t,details:d}])}const Ie="UQC9Vgi5erLMGVOHit2dQ5C1dww3XTV0OAvWOm3XhgVaVUI_",K="/assets/ewallet-BwdFUCtF.png",je="/assets/turbo-i3NQ1NMb.png",ve="/assets/button-BU5-t-rk.png",gn=[{label:"1.2x Coin Mult",value:1.2,price:.3,icon:q,desc:"+20%/tap"},{label:"1.5x Coin Mult",value:1.5,price:.7,icon:q,desc:"+50%/tap"},{label:"2x Coin Mult",value:2,price:1.2,icon:q,desc:"2x/tap"},{label:"3x Coin Mult",value:3,price:2.5,icon:q,desc:"3x/tap"},{label:"5x Coin Mult",value:5,price:5,icon:q,desc:"5x/tap"}],pn=[{label:"1.2x Energy Mult",value:1.2,price:.3,icon:K,desc:"+20% energy"},{label:"1.5x Energy Mult",value:1.5,price:.7,icon:K,desc:"+50% energy"},{label:"2x Energy Mult",value:2,price:1.2,icon:K,desc:"2x energy"},{label:"3x Energy Mult",value:3,price:2.5,icon:K,desc:"3x energy"},{label:"5x Energy Mult",value:5,price:5,icon:K,desc:"5x energy"}],hn=[{label:"Auto Clicker",desc:"Auto 1hr",price:.5,effect:"autoclicker",icon:je},{label:"Energy Refill",desc:"Full energy",price:.4,effect:"refill",icon:K},{label:"Golden Tap",desc:"+100/tap",price:2.5,effect:"goldentap",icon:ve}],mn=({onPurchase:n,purchased:t})=>{const[d,a]=i.useState(null),[r,p]=i.useState(null),[s]=Se(),g=async o=>{a(null),p(o.label);try{await s.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ie,amount:(o.price*1e9).toString()}]}),a(`âœ… Purchase successful: ${o.label}`),n(o);const u=localStorage.getItem("userId")||"unknown";await X(u,"shop_purchase",{item:o.label,price:o.price})}catch(u){let b="Transaction cancelled or failed.";typeof u=="object"&&u&&"message"in u&&typeof u.message=="string"&&(b+=`
${u.message}`),a(b)}p(null)};return e.jsxs("div",{style:{maxWidth:420,margin:"28px auto",padding:18,background:"linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)",borderRadius:18,boxShadow:"0 6px 32px #24308a22",display:"flex",flexDirection:"column",alignItems:"center",transition:"box-shadow 0.2s",animation:"fadeInShop 0.7s"},children:[e.jsx("style",{children:`
						@keyframes fadeInShop {
							from { opacity: 0; transform: translateY(20px); }
							to { opacity: 1; transform: none; }
						}
						.shop-section-title {
							font-size: 1.1rem;
							font-weight: 700;
							color: #24308a;
							margin-bottom: 8px;
							letter-spacing: 0.5px;
						}
					`}),e.jsx("h2",{style:{textAlign:"center",marginBottom:32,fontWeight:800,color:"#24308a",letterSpacing:1},children:"Shop"}),e.jsxs("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:18},children:[e.jsxs("div",{children:[e.jsx("div",{className:"shop-section-title",children:"Coin Multipliers"}),e.jsx("ul",{style:{listStyle:"none",padding:0,display:"flex",flexWrap:"wrap",gap:6,justifyContent:"center"},children:gn.map(o=>e.jsxs("li",{style:{width:80,background:"rgba(255,255,255,0.15)",borderRadius:5,boxShadow:"0 1px 2px #24308a08",padding:3,display:"flex",alignItems:"center",gap:5,transition:"box-shadow 0.2s, transform 0.2s",animation:"fadeInShop 0.7s"},children:[e.jsx("img",{src:o.icon,alt:"coin",style:{width:14,height:14,borderRadius:3,background:"#fff"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:8},children:o.label}),e.jsx("div",{style:{color:"#888",fontSize:7},children:o.desc})]}),e.jsxs("div",{style:{fontWeight:700,color:"#24308a",fontSize:8},children:[o.price," TON"]}),e.jsx("button",{disabled:!!t[o.label]||r===o.label,onClick:()=>g(o),style:{padding:"2px 6px",borderRadius:3,background:r===o.label?"#ffe25988":"#ffe259",color:"#222",fontWeight:700,border:"none",cursor:t[o.label]||r===o.label?"not-allowed":"pointer",fontSize:7,position:"relative",outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},"aria-label":`Buy ${o.label}`,tabIndex:0,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&g(o)},onFocus:u=>u.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:u=>u.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:r===o.label?e.jsx("span",{style:{fontSize:8},children:"Processing..."}):t[o.label]?"âœ“":"Buy"})]},o.label))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"shop-section-title",children:"Energy Multipliers"}),e.jsx("ul",{style:{listStyle:"none",padding:0,display:"flex",flexWrap:"wrap",gap:6,justifyContent:"center"},children:pn.map(o=>e.jsxs("li",{style:{width:80,background:"rgba(255,255,255,0.15)",borderRadius:5,boxShadow:"0 1px 2px #24308a08",padding:3,display:"flex",alignItems:"center",gap:5,transition:"box-shadow 0.2s, transform 0.2s",animation:"fadeInShop 0.7s"},children:[e.jsx("img",{src:o.icon,alt:"energy",style:{width:14,height:14,borderRadius:3,background:"#fff"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:8},children:o.label}),e.jsx("div",{style:{color:"#888",fontSize:7},children:o.desc})]}),e.jsxs("div",{style:{fontWeight:700,color:"#24308a",fontSize:8},children:[o.price," TON"]}),e.jsx("button",{disabled:!!t[o.label]||r===o.label,onClick:()=>g(o),style:{padding:"2px 6px",borderRadius:3,background:r===o.label?"#ffe25988":"#ffe259",color:"#222",fontWeight:700,border:"none",cursor:t[o.label]||r===o.label?"not-allowed":"pointer",fontSize:7,position:"relative"},children:r===o.label?e.jsx("span",{style:{fontSize:8},children:"Processing..."}):t[o.label]?"âœ“":"Buy"})]},o.label))})]})]}),e.jsxs("div",{style:{marginTop:24,width:"100%"},children:[e.jsx("div",{className:"shop-section-title",children:"Special Items"}),e.jsx("ul",{style:{listStyle:"none",padding:0,display:"flex",flexWrap:"wrap",gap:6,justifyContent:"center"},children:hn.map(o=>e.jsxs("li",{style:{width:80,background:"rgba(255,255,255,0.15)",borderRadius:5,boxShadow:"0 1px 2px #24308a08",padding:3,display:"flex",alignItems:"center",gap:5,transition:"box-shadow 0.2s, transform 0.2s",animation:"fadeInShop 0.7s"},children:[e.jsx("img",{src:o.icon,alt:o.label,style:{width:14,height:14,borderRadius:3,background:"#fff"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:700,fontSize:8},children:o.label}),e.jsx("div",{style:{color:"#888",fontSize:7},children:o.desc})]}),e.jsxs("div",{style:{fontWeight:700,color:"#24308a",fontSize:8},children:[o.price," TON"]}),e.jsx("button",{disabled:!!t[o.label]||r===o.label,onClick:()=>g(o),style:{padding:"2px 6px",borderRadius:3,background:r===o.label?"#ffe25988":"#ffe259",color:"#222",fontWeight:700,border:"none",cursor:t[o.label]||r===o.label?"not-allowed":"pointer",fontSize:7,position:"relative"},children:r===o.label?e.jsx("span",{style:{fontSize:8},children:"Processing..."}):t[o.label]?"âœ“":"Buy"})]},o.label))})]}),e.jsx(Ae,{style:{marginTop:40}}),e.jsx("a",{href:"https://t.me/LisaToken_bot?game=Lisa",target:"_blank",rel:"noopener noreferrer",style:{display:"block",margin:"24px auto 0",background:"#0088cc",color:"#fff",fontWeight:700,borderRadius:8,padding:"10px 24px",textAlign:"center",textDecoration:"none",boxShadow:"0 2px 8px #24308a22",fontSize:16,letterSpacing:1},children:"Play on Telegram"}),d&&e.jsx("div",{style:{marginTop:24,color:d.startsWith("âœ…")?"green":"red",fontWeight:600,fontSize:16,animation:d.startsWith("âœ…")?"popSuccess 0.5s":void 0},children:d}),e.jsx("style",{children:`
							@keyframes popSuccess {
								0% { transform: scale(0.8); opacity: 0.5; }
								60% { transform: scale(1.1); opacity: 1; }
								100% { transform: scale(1); opacity: 1; }
							}
						`})]})},xn=()=>{const[n,t]=i.useState([]),[d,a]=i.useState(!0),[r,p]=i.useState(""),[s,g]=i.useState(""),[o,u]=i.useState("");i.useEffect(()=>{a(!0),p(""),(async()=>{const{data:x,error:l}=await T.from("analytics_events").select("*").order("created_at",{ascending:!1}).limit(200);l?p(l.message):t(x||[]),a(!1)})()},[]);const b=n.filter(h=>(!s||h.userid===s)&&(!o||h.event===o));return e.jsxs("div",{style:{padding:24,background:"#222",color:"#fff",borderRadius:12,maxWidth:800,margin:"0 auto"},children:[e.jsx("h2",{children:"Analytics Events (Admin)"}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("input",{placeholder:"Filter by User ID",value:s,onChange:h=>g(h.target.value),style:{marginRight:8,borderRadius:4,padding:4,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},"aria-label":"Filter by User ID",tabIndex:0,onFocus:h=>h.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:h=>h.currentTarget.style.boxShadow="0 0 0 2px #24308a33"}),e.jsx("input",{placeholder:"Filter by Event Type",value:o,onChange:h=>u(h.target.value),style:{borderRadius:4,padding:4,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},"aria-label":"Filter by Event Type",tabIndex:0,onFocus:h=>h.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:h=>h.currentTarget.style.boxShadow="0 0 0 2px #24308a33"})]}),d?e.jsx("div",{children:"Loading..."}):r?e.jsx("div",{style:{color:"#ff4d4f"},children:r}):e.jsxs("table",{style:{width:"100%",background:"#333",borderRadius:8},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#444"},children:[e.jsx("th",{style:{color:"#ffe259"},children:"Time"}),e.jsx("th",{style:{color:"#ffe259"},children:"User ID"}),e.jsx("th",{style:{color:"#ffe259"},children:"Event"}),e.jsx("th",{style:{color:"#ffe259"},children:"Details"})]})}),e.jsx("tbody",{children:b.map(h=>{var x;return e.jsxs("tr",{children:[e.jsx("td",{children:(x=h.created_at)==null?void 0:x.replace("T"," ").slice(0,19)}),e.jsx("td",{children:h.userid}),e.jsx("td",{children:h.event}),e.jsx("td",{children:e.jsx("pre",{style:{color:"#00ff99",fontSize:12,margin:0},children:JSON.stringify(h.details,null,2)})})]},h.created_at+h.userid+h.event)})})]})]})},yn="_trophiesPage_14m1q_1",bn="_trophiesTitle_14m1q_10",jn="_trophyList_14m1q_18",vn="_trophyCard_14m1q_25",Sn="_earned_14m1q_40",An="_trophyIcon_14m1q_46",wn="_trophyName_14m1q_55",kn="_trophyDesc_14m1q_63",Cn="_trophyReward_14m1q_70",Q={trophiesPage:yn,trophiesTitle:bn,trophyList:jn,trophyCard:vn,earned:Sn,trophyIcon:An,trophyName:wn,trophyDesc:kn,trophyReward:Cn},Ue=[{key:"firstTap",name:"First Tap!",desc:"Earn your first coin.",icon:q,milestone:1,reward:100},{key:"hundredCoins",name:"Coin Collector",desc:"Reach 100 coins.",icon:fe,milestone:100,reward:500},{key:"thousandCoins",name:"Thousand Club",desc:"Reach 1,000 coins.",icon:K,milestone:1e3,reward:2e3},{key:"tenKCoins",name:"10K Master",desc:"Reach 10,000 coins.",icon:$,milestone:1e4,reward:1e4},{key:"fiftyKCoins",name:"50K Tycoon",desc:"Reach 50,000 coins.",icon:je,milestone:5e4,reward:25e3},{key:"hundredKCoins",name:"100K Legend",desc:"Reach 100,000 coins.",icon:H,milestone:1e5,reward:5e4},{key:"millionCoins",name:"Millionaire",desc:"Reach 1,000,000 coins.",icon:ve,milestone:1e6,reward:2e5},{key:"energyMax",name:"Energy Hoarder",desc:"Max out your energy.",icon:Ce,milestone:1e3,reward:1e4},{key:"shopper",name:"Shopper",desc:"Buy 5 shop items.",icon:de,milestone:5,reward:15e3},{key:"allTrophies",name:"Trophy Champion",desc:"Unlock all trophies.",icon:ke,milestone:10,reward:1e5}],In=({coinCount:n,energy:t,shopPurchases:d,earned:a,onEarn:r})=>{const p={firstTap:"First coin",hundredCoins:"100 coins",thousandCoins:"1K coins",tenKCoins:"10K coins",fiftyKCoins:"50K",hundredKCoins:"100K",millionCoins:"1M",energyMax:"Max energy",shopper:"5 buys",allTrophies:"All done"};return ne.useEffect(()=>{Ue.forEach(s=>{if(!a[s.key]){let g=!1;s.key==="firstTap"&&n>=s.milestone&&(g=!0),s.key==="hundredCoins"&&n>=s.milestone&&(g=!0),s.key==="thousandCoins"&&n>=s.milestone&&(g=!0),s.key==="tenKCoins"&&n>=s.milestone&&(g=!0),s.key==="fiftyKCoins"&&n>=s.milestone&&(g=!0),s.key==="hundredKCoins"&&n>=s.milestone&&(g=!0),s.key==="millionCoins"&&n>=s.milestone&&(g=!0),s.key==="energyMax"&&t>=s.milestone&&(g=!0),s.key==="shopper"&&d>=s.milestone&&(g=!0),s.key==="allTrophies"&&Object.values(a).filter(Boolean).length>=9&&(g=!0),g&&r(s)}})},[n,t,d,a,r]),e.jsxs("div",{className:Q.trophiesPage,children:[e.jsx("div",{className:Q.trophiesTitle,children:"Trophies"}),e.jsx("div",{className:Q.trophyList,children:Ue.map(s=>e.jsxs("div",{className:Q.trophyCard+(a[s.key]?" "+Q.earned:""),children:[e.jsx("img",{src:s.icon,alt:s.name,className:Q.trophyIcon}),e.jsx("div",{className:Q.trophyName,children:s.name}),e.jsx("div",{className:Q.trophyDesc,children:p[s.key]||s.desc}),e.jsxs("div",{className:Q.trophyReward,children:["+",s.reward]}),a[s.key]&&e.jsx("div",{style:{color:"#1bbf4c",fontWeight:700,fontSize:10},children:"Unlocked!"})]},s.key))})]})},Nn="_tasksPage_1wpta_413",Bn="_dailyCheckInContainer_1wpta_425",Tn="_dailyCheckInBtn_1wpta_432",Rn="_tasksTitle_1wpta_456",En="_tasksList_1wpta_464",Mn="_taskCard_1wpta_472",Pn="_completed_1wpta_496",Ln="_taskHeader_1wpta_502",Dn="_taskTitle_1wpta_511",_n="_taskReward_1wpta_517",Wn="_taskDesc_1wpta_523",zn="_taskActions_1wpta_529",Un="_taskLink_1wpta_535",On="_completeBtn_1wpta_550",D={tasksPage:Nn,dailyCheckInContainer:Bn,dailyCheckInBtn:Tn,tasksTitle:Rn,tasksList:En,taskCard:Mn,completed:Pn,taskHeader:Ln,taskTitle:Dn,taskReward:_n,taskDesc:Wn,taskActions:zn,taskLink:Un,completeBtn:On},Gn="/assets/twitter-Cxj2oo1j.png",Vn="/assets/friends-CUSeA5LR.png",Fn=[{id:1,title:"Follow on X",desc:"Follow us on X.",reward:5e5,link:"https://x.com/",icon:Gn},{id:2,title:"Instagram",desc:"Like & follow.",reward:5e5,link:"https://instagram.com/",icon:$},{id:3,title:"Play TG Game",desc:"Play our game.",reward:75e4,link:"https://t.me/LisaToken_bot?game=Lisa",icon:_e},{id:4,title:"Join Channel",desc:"Join Telegram.",reward:5e5,link:"https://t.me/LisaToken_bot?game=Lisa",icon:ie},{id:5,title:"Invite Friend",desc:"Invite a friend.",reward:1e6,link:"",icon:Vn}],qn=({tasks:n})=>{const[t,d]=i.useState({}),[a,r]=i.useState(!1),[p,s]=i.useState(!1),[g,o]=i.useState("idle"),[u,b]=i.useState(""),[h]=Se(),x=Pe(),[l,f]=i.useState(0),[y,S]=i.useState(null),[c,C]=i.useState(0),A=7;i.useEffect(()=>{const w=parseInt(localStorage.getItem("dailyStreak")||"0",10),m=parseInt(localStorage.getItem("lastCheckIn")||"0",10),E=parseInt(localStorage.getItem("weeklyProgress")||"0",10);f(w),S(m||null),C(E)},[]);const M=async()=>{s(!0),o("idle"),b("");try{await h.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ie,amount:(.5*1e9).toString()}]}),r(!0),o("success"),b("âœ… Daily check-in successful! +1,000,000 coins awarded.");const m=Math.floor(new Date().getTime()/(1e3*60*60*24));let E=l;y&&m-y===1?E=l+1:(!y||m-y>1)&&(E=1),f(E),S(m),localStorage.setItem("dailyStreak",E.toString()),localStorage.setItem("lastCheckIn",m.toString());let P=c+1;P>A&&(P=1),C(P),localStorage.setItem("weeklyProgress",P.toString());const U=localStorage.getItem("userId")||"unknown";await X(U,"daily_checkin",{amountTon:.5,reward:1e6})}catch(w){let m="Transaction cancelled or failed.";typeof w=="object"&&w&&"message"in w&&typeof w.message=="string"&&(m+=`
${w.message}`),o("error"),b(m)}s(!1)},L=w=>{d(m=>({...m,[w]:!0}))},_=n??Fn;return e.jsxs("div",{className:D.tasksPage,children:[e.jsxs("div",{className:D.dailyCheckInContainer,children:[e.jsx("div",{style:{color:"#000",fontWeight:600,marginBottom:4},children:"Daily Check-In"}),e.jsxs("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:[e.jsx("b",{children:"Streak:"})," ",l," days"]}),e.jsxs("div",{style:{fontSize:13,color:"#888",marginBottom:8},children:[e.jsx("b",{children:"Weekly Quest:"})," ",c," / ",A," check-ins",c===A&&e.jsx("span",{style:{color:"#1bbf4c",fontWeight:700,marginLeft:8},children:"ðŸŽ‰ Weekly Reward!"})]}),x?e.jsx("button",{className:D.dailyCheckInBtn,onClick:M,disabled:a||p,children:p?"Processing...":a?"Checked In Today":"Daily Check-In (0.5 TON â†’ 1,000,000 coins)"}):e.jsx(Ae,{}),u&&e.jsx("div",{style:{marginTop:8,color:g==="success"?"#00b894":g==="error"?"#d63031":"#222",fontWeight:600,minHeight:20,animation:g==="success"?"popSuccess 0.5s":g==="error"?"popError 0.5s":void 0,transition:"color 0.2s"},children:u}),e.jsx("style",{children:`
							@keyframes popSuccess {
								0% { transform: scale(1); }
								50% { transform: scale(1.15); }
								100% { transform: scale(1); }
							}
							@keyframes popError {
								0% { transform: scale(1); }
								50% { transform: scale(1.1); }
								100% { transform: scale(1); }
							}
						`})]}),e.jsx("div",{className:D.tasksTitle,children:"Telegram & Social Tasks"}),e.jsx("div",{className:D.tasksList,children:_.map(w=>e.jsxs("div",{className:D.taskCard+(t[w.id]?" "+D.completed:""),children:[e.jsxs("div",{className:D.taskHeader,children:[w.icon&&e.jsx("img",{src:w.icon,alt:w.title,style:{width:22,marginRight:6,verticalAlign:"middle"}}),e.jsx("span",{className:D.taskTitle,children:w.title}),e.jsxs("span",{className:D.taskReward,children:["+",w.reward.toLocaleString()," coins"]})]}),e.jsx("div",{className:D.taskDesc,children:w.desc}),e.jsxs("div",{className:D.taskActions,children:[w.link&&e.jsx("a",{href:w.link,target:"_blank",rel:"noopener noreferrer",className:D.taskLink,children:"Go"}),e.jsx("button",{className:D.completeBtn,onClick:()=>L(w.id),disabled:t[w.id],"aria-label":t[w.id]?`Task ${w.title} completed`:`Mark task ${w.title} as done`,tabIndex:0,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&L(w.id)},onFocus:m=>m.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:m=>m.currentTarget.style.boxShadow="none",children:t[w.id]?"Completed":"Mark as Done"})]})]},w.id))})]})},Kn="_upgradesPage_1fdfi_1",Hn="_upgradeGrid_1fdfi_10",Qn="_upgradeCard_1fdfi_16",Yn="_icon_1fdfi_33",Jn="_title_1fdfi_42",Zn="_desc_1fdfi_49",Xn="_level_1fdfi_56",$n="_value_1fdfi_56",es="_price_1fdfi_56",ts="_buyBtn_1fdfi_66",F={upgradesPage:Kn,upgradeGrid:Hn,upgradeCard:Qn,icon:Yn,title:Jn,desc:Zn,level:Xn,value:$n,price:es,buyBtn:ts},ns=[{key:"coinPerTap",name:"Coin Per Tap",desc:"+Coins/tap",baseValue:2,basePrice:400,icon:q},{key:"passiveIncome",name:"Passive Income",desc:"+Coins/hr",baseValue:100,basePrice:500,icon:fe},{key:"energy",name:"Energy",desc:"+Max energy",baseValue:100,basePrice:300,icon:K},{key:"hungerDrive",name:"Hunger Drive",desc:"+Passive/hr",baseValue:500,basePrice:500,icon:$},{key:"energyRegen",name:"Energy Regen",desc:"+Energy regen",baseValue:1,basePrice:350,icon:je},{key:"tapStreak",name:"Tap Streak",desc:"Streak bonus",baseValue:10,basePrice:600,icon:H},{key:"criticalTap",name:"Critical Tap",desc:"Crit chance",baseValue:1,basePrice:700,icon:ve},{key:"autoMiner",name:"Auto Miner",desc:"Auto/hr",baseValue:50,basePrice:800,icon:je},{key:"energySaver",name:"Energy Saver",desc:"-Energy/tap",baseValue:1,basePrice:900,icon:Ce},{key:"magnet",name:"Coin Magnet",desc:"Bonus/hr",baseValue:100,basePrice:1e3,icon:de},{key:"ultraBoost",name:"Ultra Boost",desc:"x2 1hr",baseValue:1,basePrice:2e3,icon:ke},{key:"goldenTouch",name:"Golden Touch",desc:"+10/tap",baseValue:10,basePrice:2500,icon:ve}],me=5e3,ss=({upgrades:n,coins:t,onPurchase:d})=>e.jsxs("div",{className:F.upgradesPage,children:[e.jsx("h2",{children:"Upgrades"}),e.jsx("div",{className:F.upgradeGrid,children:ns.map(a=>{const r=n[a.key]||0,p=a.basePrice*Math.pow(2,r),s=a.baseValue*Math.pow(2,r);return e.jsxs("div",{className:F.upgradeCard,children:[e.jsx("img",{src:a.icon,alt:a.name,className:F.icon}),e.jsx("div",{className:F.title,children:a.name}),e.jsx("div",{className:F.desc,children:a.desc}),e.jsxs("div",{className:F.level,children:["Level: ",r]}),e.jsxs("div",{className:F.value,children:["Value: +",s]}),e.jsxs("div",{className:F.price,children:["Price: ",p," coins"]}),e.jsx("button",{className:F.buyBtn,disabled:t<p||r>=me,onClick:()=>d(a.key),"aria-label":r>=me?`${a.name} maxed out`:`Upgrade ${a.name} for ${p} coins`,tabIndex:0,onKeyDown:g=>{(g.key==="Enter"||g.key===" ")&&!(t<p||r>=me)&&d(a.key)},onFocus:g=>g.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:g=>g.currentTarget.style.boxShadow="none",children:r>=me?"Maxed":"Upgrade"})]},a.key)})})]}),as=({friends:n=[]})=>{const[t,d]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("friends")||"[]")}catch{return n}}),[a,r]=i.useState(""),[p,s]=i.useState(""),[g,o]=i.useState(""),[u,b]=i.useState(null),[h,x]=i.useState(""),[l,f]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("chatHistory")||"{}")}catch{return{}}}),[y,S]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("guild")||"null")}catch{return null}}),[c,C]=i.useState("");i.useEffect(()=>{localStorage.setItem("friends",JSON.stringify(t))},[t]),i.useEffect(()=>{y&&localStorage.setItem("guild",JSON.stringify(y))},[y]),i.useEffect(()=>{localStorage.setItem("chatHistory",JSON.stringify(l))},[l]);const A=()=>{if(!a||!p){o("Enter both user ID and name.");return}if(t.some(m=>m.id===a)){o("Already added.");return}d(m=>[...m,{id:a,name:p}]),r(""),s(""),o("Friend added!"),setTimeout(()=>o(""),1200)},M=m=>{b(m)},L=()=>{if(!u||!h.trim())return;const E={sender:localStorage.getItem("userId")||"You",text:h,timestamp:Date.now()};f(P=>({...P,[u.id]:[...P[u.id]||[],E]})),x("")},_=()=>{if(!c.trim())return;const m=localStorage.getItem("userId")||"You",E=localStorage.getItem("userName")||"You";S({name:c.trim(),members:[{id:m,name:E}]}),C("")},w=()=>{if(!c.trim())return;const m=localStorage.getItem("userId")||"You",E=localStorage.getItem("userName")||"You";let P=null;try{P=JSON.parse(localStorage.getItem("guild")||"null")}catch{P=null}P&&P.name===c.trim()?(P.members.some(U=>U.id===m)||P.members.push({id:m,name:E}),S({...P})):S({name:c.trim(),members:[{id:m,name:E}]}),C("")};return e.jsxs("div",{style:{maxWidth:340,margin:"20px auto",padding:12,background:"linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)",borderRadius:12,boxShadow:"0 2px 12px #24308a11"},children:[e.jsxs("div",{style:{margin:"18px 0",padding:10,background:"#f0f7ff",borderRadius:8,boxShadow:"0 1px 4px #24308a10"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:13,marginBottom:6},children:"Guild / Team"}),y?e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:11,marginBottom:4},children:[e.jsx("b",{children:"Guild:"})," ",y.name]}),e.jsx("div",{style:{fontSize:10,marginBottom:4},children:e.jsx("b",{children:"Members:"})}),e.jsx("ul",{style:{fontSize:10,margin:0,padding:0,listStyle:"none"},children:y.members.map((m,E)=>e.jsxs("li",{style:{marginBottom:2},children:[m.name," ",e.jsxs("span",{style:{color:"#888",fontSize:9},children:["(",m.id,")"]})]},m.id+E))})]}):e.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[e.jsx("input",{value:c,onChange:m=>C(m.target.value),placeholder:"Guild name",style:{fontSize:10,borderRadius:4,padding:2,width:90}}),e.jsx("button",{onClick:_,style:{fontSize:10,borderRadius:4,padding:"2px 8px",background:"#ffe259",fontWeight:700},children:"Create"}),e.jsx("button",{onClick:w,style:{fontSize:10,borderRadius:4,padding:"2px 8px",background:"#b8e259",fontWeight:700},children:"Join"})]})]}),e.jsx("div",{style:{fontSize:12,fontWeight:700,marginBottom:6},children:"Your Friends"}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("input",{value:a,onChange:m=>r(m.target.value),placeholder:"User ID",style:{fontSize:10,borderRadius:4,padding:2,marginRight:4,width:70}}),e.jsx("input",{value:p,onChange:m=>s(m.target.value),placeholder:"Name",style:{fontSize:10,borderRadius:4,padding:2,marginRight:4,width:70}}),e.jsx("button",{onClick:A,style:{fontSize:10,borderRadius:4,padding:"2px 8px",background:"#ffe259",fontWeight:700},children:"Add Friend"}),g&&e.jsx("span",{style:{fontSize:10,color:"#1bbf4c",marginLeft:8},children:g})]}),e.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[t.length===0&&e.jsx("li",{style:{fontSize:10,color:"#888"},children:"No friends yet. Invite some!"}),t.map(m=>e.jsx("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6,background:(u==null?void 0:u.id)===m.id?"#e6f7ff":"#fff",borderRadius:6,padding:"4px 8px",boxShadow:"0 1px 2px #24308a08",fontSize:10,cursor:"pointer"},children:e.jsxs("span",{style:{flex:1},onClick:()=>M(m),children:[m.name," ",e.jsxs("span",{style:{color:"#888",fontSize:9},children:["(",m.id,")"]})]})},m.id))]}),u&&e.jsxs("div",{style:{marginTop:16,background:"#f7faff",borderRadius:8,padding:10,boxShadow:"0 1px 4px #24308a10"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:12,marginBottom:6},children:["Chat with ",u.name,e.jsx("button",{style:{float:"right",fontSize:10,border:"none",background:"none",color:"#888",cursor:"pointer"},onClick:()=>b(null),children:"Ã—"})]}),e.jsxs("div",{style:{maxHeight:120,overflowY:"auto",background:"#fff",borderRadius:6,padding:6,marginBottom:8,fontSize:10},children:[(l[u.id]||[]).length===0&&e.jsx("div",{style:{color:"#aaa"},children:"No messages yet."}),(l[u.id]||[]).map((m,E)=>e.jsxs("div",{style:{marginBottom:4,textAlign:m.sender===(localStorage.getItem("userId")||"You")?"right":"left"},children:[e.jsxs("span",{style:{background:m.sender===(localStorage.getItem("userId")||"You")?"#e6f7ff":"#ffe259",borderRadius:4,padding:"2px 6px",display:"inline-block"},children:[e.jsxs("b",{children:[m.sender===(localStorage.getItem("userId")||"You")?"You":u.name,":"]})," ",m.text.startsWith(":sticker:")?e.jsx("img",{src:m.text.replace(":sticker:",""),alt:"sticker",style:{height:24,verticalAlign:"middle"}}):m.text]}),e.jsx("span",{style:{color:"#bbb",fontSize:8,marginLeft:4},children:new Date(m.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},E))]}),e.jsxs("div",{style:{display:"flex",gap:4,marginBottom:4},children:[e.jsx("div",{style:{display:"flex",gap:2},children:["ðŸ˜€","ðŸ˜‚","ðŸ˜","ðŸ˜Ž","ðŸ¥³","ðŸ˜‡","ðŸ˜œ","ðŸ¤©","ðŸ˜­","ðŸ”¥","ðŸ’Ž","ðŸŽ‰"].map(m=>e.jsx("button",{style:{fontSize:14,border:"none",background:"none",cursor:"pointer"},onClick:()=>x(h+m),children:m},m))}),e.jsxs("div",{style:{display:"flex",gap:2,marginLeft:8},children:[e.jsx("button",{style:{border:"none",background:"none",cursor:"pointer"},onClick:()=>x(":sticker:"+$),children:e.jsx("img",{src:$,alt:"gift",style:{height:22}})}),e.jsx("button",{style:{border:"none",background:"none",cursor:"pointer"},onClick:()=>x(":sticker:"+H),children:e.jsx("img",{src:H,alt:"crown",style:{height:22}})}),e.jsx("button",{style:{border:"none",background:"none",cursor:"pointer"},onClick:()=>x(":sticker:"+ie),children:e.jsx("img",{src:ie,alt:"tg",style:{height:22}})})]})]}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("input",{value:h,onChange:m=>x(m.target.value),onKeyDown:m=>{m.key==="Enter"&&L()},placeholder:"Type a message...",style:{flex:1,fontSize:10,borderRadius:4,padding:4}}),e.jsx("button",{onClick:L,style:{fontSize:10,borderRadius:4,padding:"2px 10px",background:"#ffe259",fontWeight:700},children:"Send"})]})]})]})};async function st(n,t,d){const{data:a,error:r}=await T.storage.from(n).upload(t,d,{cacheControl:"3600",upsert:!0});return{data:a,error:r}}function at(n,t){const{data:d}=T.storage.from(n).getPublicUrl(t);return d.publicUrl}const is=["/vite.svg","/assets/crown.png","/assets/tg.png","/assets/arcade_pacman_sprites.png","/assets/gift.png","/assets/axs.png"],rs=({isOpen:n,onClose:t,onAvatarChange:d})=>{const a=i.useRef(null),[r,p]=i.useState(null),s=async u=>{var h;const b=(h=u.target.files)==null?void 0:h[0];if(b){const x=localStorage.getItem("userId")||"anon",l=b.name.split(".").pop()||"png",f=`avatars/${x}_${Date.now()}.${l}`,{error:y}=await st("avatars",f,b);if(y)alert("Failed to upload avatar.");else{const S=at("avatars",f);p(S)}}},g=u=>{p(u)},o=()=>{r&&(d(r),t())};return n?e.jsx("div",{className:B.modalOverlay,children:e.jsxs("div",{className:B.modalContent,children:[e.jsx("h3",{children:"Select or Upload Avatar"}),e.jsx("div",{className:B.avatarGrid,children:is.map(u=>e.jsx("img",{src:u,alt:"avatar",className:B.avatarOption+(r===u?" "+B.selected:""),onClick:()=>g(u),style:{width:56,height:56,borderRadius:"50%",margin:8,cursor:"pointer",border:r===u?"2px solid #ffe259":"2px solid #eee"}},u))}),e.jsx("input",{type:"file",accept:"image/*",ref:a,onChange:s,style:{margin:"12px 0"}}),r&&e.jsx("img",{src:r,alt:"Selected avatar",style:{width:64,height:64,borderRadius:"50%",margin:8}}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{onClick:o,style:{background:"#ffe259",borderRadius:6,padding:"6px 18px",fontWeight:700,marginRight:8},children:"Save"}),e.jsx("button",{onClick:t,style:{background:"#eee",borderRadius:6,padding:"6px 18px",fontWeight:700},children:"Cancel"})]})]})}):null},Oe=[{src:"/vite.svg",label:"Default"},{src:ie,label:"Telegram",link:"https://t.me/LisaToken_bot?game=Lisa"},{src:H,label:"Crown"},{src:$,label:"Gift"},{src:Ce,label:"AXS"},{src:We,label:"Airdrop"}],Ge=[{label:"Early Bird",icon:H},{label:"Top Referrer",icon:ie},{label:"Arcade Champ",icon:ce},{label:"Airdrop Winner",icon:We}],os=({userId:n})=>{var S;const[t,d]=i.useState(null),[a,r]=i.useState(!0),[p,s]=i.useState(!1),[g,o]=i.useState(""),[u,b]=i.useState(""),[h,x]=i.useState([]),[l,f]=i.useState(!1);i.useEffect(()=>{De(n).then(c=>{d(c),o((c==null?void 0:c.nickname)||""),b((c==null?void 0:c.avatar_url)||Oe[0].src),x((c==null?void 0:c.badges)||[]),r(!1)})},[n]);const y=async()=>{r(!0),await Yt(n,{nickname:g,avatar_url:u,badges:h}),s(!1),r(!1)};return a?e.jsx("div",{children:"Loading profile..."}):t?e.jsxs("div",{style:{maxWidth:340,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h2",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Your Profile"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[e.jsx("img",{src:u,alt:"avatar",style:{width:64,height:64,borderRadius:"50%",border:"2px solid #ffe259"}}),e.jsx("button",{onClick:()=>f(!0),style:{marginTop:8,background:"#ffe259",borderRadius:6,padding:"4px 14px",fontWeight:700},children:"Change Avatar"})]}),e.jsx(rs,{isOpen:l,onClose:()=>f(!1),onAvatarChange:c=>b(c)}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:14},children:[e.jsx("img",{src:de,alt:"Coins",style:{width:18,verticalAlign:"middle"}}),e.jsx("b",{children:"Coins:"})," ",e.jsx("span",{style:{color:"#b88a00",fontWeight:700},children:((S=t.coins)==null?void 0:S.toLocaleString())??0})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13},children:[e.jsx("b",{children:"Country:"})," ",e.jsx("span",{children:t.country||"(unknown)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"#888"},children:[e.jsx("b",{children:"User ID:"})," ",e.jsx("span",{style:{fontFamily:"monospace"},children:t.userid})]})]}),p?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:8},children:e.jsxs("label",{children:["Nickname: ",e.jsx("input",{value:g,onChange:c=>o(c.target.value),style:{borderRadius:4,padding:4}})]})}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("label",{children:"Avatar: "}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:4},children:Oe.map(c=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},onClick:()=>b(c.src),children:[e.jsx("img",{src:c.src,alt:c.label,style:{width:38,height:38,borderRadius:"50%",border:u===c.src?"2px solid #24308a":"2px solid #ffe259",marginBottom:2,background:"#fff"}}),e.jsx("span",{style:{fontSize:10},children:c.label})]},c.src))})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("label",{children:"Badges: "}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:4},children:Ge.map(c=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("input",{type:"checkbox",checked:h.includes(c.label),onChange:C=>{C.target.checked?x([...h,c.label]):x(h.filter(A=>A!==c.label))}}),e.jsx("img",{src:c.icon,alt:c.label,style:{width:16,verticalAlign:"middle"}}),e.jsx("span",{style:{fontSize:11},children:c.label})]},c.label))})]}),e.jsx("button",{onClick:y,style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Save"}),e.jsx("button",{onClick:()=>s(!1),style:{marginLeft:8,borderRadius:6,padding:"4px 16px"},children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("b",{children:"Nickname:"})," ",t.nickname||"(none)"]}),e.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("b",{children:"Badges:"})," ",t.badges&&t.badges.length?t.badges.map(c=>{const C=Ge.find(A=>A.label===c);return C?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:2,background:"#fffbe6",borderRadius:4,padding:"2px 6px",fontSize:11,border:"1px solid #ffe259"},children:[e.jsx("img",{src:C.icon,alt:C.label,style:{width:14,verticalAlign:"middle"}}),C.label]},c):c}):e.jsx("span",{style:{fontSize:11},children:"(none)"})]}),e.jsx("button",{onClick:()=>s(!0),style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Edit Profile"})]})]}):e.jsx("div",{children:"Profile not found."})};async function ls(n,t,d="chat",a){const{data:r,error:p}=await T.from("messages").insert([{userid:n,content:t,type:d,reply_to:null}]);return{data:r,error:p}}async function Ve(n=50,t="chat"){const{data:d}=await T.from("messages").select("*").eq("type",t).order("created_at",{ascending:!1}).limit(n);return d||[]}const cs=({userId:n})=>{const[t,d]=i.useState([]),[a,r]=i.useState(""),[p,s]=i.useState(!0),[g,o]=i.useState(!1),[u,b]=i.useState({}),h=i.useRef(null);i.useEffect(()=>{const l=async()=>{s(!0);const y=await Ve(50,"chat");d(y.reverse()),s(!1);const S=Array.from(new Set(y.map(C=>C.userid))),c={};await Promise.all(S.map(async C=>{const A=await De(C);A&&(c[C]={nickname:A.nickname,avatar_url:A.avatar_url})})),b(c)};l();const f=setInterval(l,4e3);return()=>clearInterval(f)},[]),i.useEffect(()=>{var l;(l=h.current)==null||l.scrollIntoView({behavior:"smooth"})},[t]);const x=async()=>{if(!a.trim())return;o(!0),await ls(n,a.trim()),r(""),o(!1);const l=await Ve(50,"chat");d(l.reverse())};return e.jsxs("div",{style:{maxWidth:400,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:12,boxShadow:"0 2px 8px #24308a11",display:"flex",flexDirection:"column",height:420},children:[e.jsxs("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:we,alt:"Chat",style:{width:22,verticalAlign:"middle"}}),"Community Chat"]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",marginBottom:8,background:"#fff",borderRadius:8,padding:8,border:"1px solid #eee"},children:[p?e.jsx("div",{children:"Loading..."}):t.length===0?e.jsx("div",{style:{color:"#888"},children:"No messages yet."}):t.map(l=>{var f,y,S;return e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[e.jsx("img",{src:((f=u[l.userid])==null?void 0:f.avatar_url)||"/vite.svg",alt:"avatar",style:{width:28,height:28,borderRadius:"50%",marginRight:8,border:"1px solid #ffe259"}}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:700,color:"#24308a",fontSize:12},children:((y=u[l.userid])==null?void 0:y.nickname)||l.userid}),e.jsx("span",{style:{color:"#888",fontSize:10,marginLeft:8},children:(S=l.created_at)==null?void 0:S.slice(11,16)}),e.jsx("div",{style:{fontSize:13},children:l.content})]})]},l.id)}),e.jsx("div",{ref:h})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{value:a,onChange:l=>r(l.target.value),onKeyDown:l=>{l.key==="Enter"&&x()},placeholder:"Type a message...",style:{flex:1,borderRadius:6,padding:6,border:"1px solid #ffe259"},disabled:g}),e.jsx("button",{onClick:x,disabled:g||!a.trim(),style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Send"})]})]})};async function ds(n=new Date().toISOString()){const{data:t}=await T.from("events").select("*").lte("start_time",n).gte("end_time",n).order("start_time",{ascending:!0});return t||[]}async function us(n,t){await T.from("event_participants").upsert([{event_id:n,userid:t}],{onConflict:"event_id,userid"})}const fs=({userId:n})=>{const[t,d]=i.useState([]),[a,r]=i.useState(!0),[p,s]=i.useState({});i.useEffect(()=>{ds().then(o=>{d(o),r(!1)})},[]);const g=async o=>{await us(o,n),s(u=>({...u,[o]:!0}))};return e.jsxs("div",{style:{maxWidth:400,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Seasonal Events & Challenges"}),a?e.jsx("div",{children:"Loading events..."}):t.length===0?e.jsx("div",{style:{color:"#888"},children:"No active events right now."}):t.map(o=>{var u;return e.jsxs("div",{style:{background:"#fff",borderRadius:8,marginBottom:12,padding:12,boxShadow:"0 1px 4px #24308a08"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:ce,alt:"Trophy",style:{width:22,verticalAlign:"middle"}}),e.jsx("span",{style:{fontWeight:700,color:"#b88a00",fontSize:15},children:o.name})]}),e.jsx("div",{style:{fontSize:12,marginBottom:6},children:o.description}),e.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:6,display:"flex",alignItems:"center",gap:4},children:[e.jsx("img",{src:we,alt:"End",style:{width:14,verticalAlign:"middle"}}),"Ends: ",(u=o.end_time)==null?void 0:u.slice(0,16).replace("T"," ")]}),p[o.id]?e.jsx("span",{style:{color:"#24308a",fontWeight:700},children:"In Progress"}):e.jsx("button",{onClick:()=>g(o.id),style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Join"})]},o.id)})]})},it=({userId:n})=>{const[t,d]=i.useState([]),[a,r]=i.useState(!0),[p,s]=i.useState(!1),[g,o]=i.useState(""),[u,b]=i.useState(""),[h,x]=i.useState(""),[l,f]=i.useState(null),y=i.useRef(null);i.useEffect(()=>{mt(n).then(c=>{d(c),r(!1)})},[n,p]);const S=async()=>{if(!g||!u&&!l)return;s(!0);let c=u;if(l){const C=l.name.split(".").pop()||"png",A=`nfts/${n}_${Date.now()}.${C}`,{error:M}=await st("nfts",A,l);if(!M)c=at("nfts",A);else{alert("Failed to upload NFT image."),s(!1);return}}await tt({userid:n,nft_id:Date.now().toString(),name:g,image_url:c,description:h}),o(""),b(""),x(""),f(null),y.current&&(y.current.value=""),s(!1)};return e.jsxs("div",{style:{maxWidth:400,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Your NFTs"}),a?e.jsx("div",{children:"Loading NFTs..."}):t.length===0?e.jsx("div",{style:{color:"#888"},children:"No NFTs yet."}):e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:t.map(c=>e.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:8,width:120,boxShadow:"0 1px 4px #24308a08"},children:[e.jsx("img",{src:c.image_url,alt:c.name,style:{width:100,height:100,borderRadius:8,objectFit:"cover",marginBottom:4}}),e.jsx("div",{style:{fontWeight:700,fontSize:13},children:c.name}),e.jsx("div",{style:{fontSize:11,color:"#888"},children:c.description})]},c.nft_id))}),e.jsxs("div",{style:{marginTop:16,borderTop:"1px solid #eee",paddingTop:12},children:[e.jsx("h4",{style:{fontSize:14,color:"#24308a",marginBottom:6},children:"Mint New NFT"}),e.jsx("input",{value:g,onChange:c=>o(c.target.value),placeholder:"Name",style:{borderRadius:4,padding:4,marginBottom:4,width:"100%"}}),e.jsx("input",{value:u,onChange:c=>b(c.target.value),placeholder:"Image URL (or upload below)",style:{borderRadius:4,padding:4,marginBottom:4,width:"100%"}}),e.jsx("input",{type:"file",accept:"image/*",ref:y,onChange:c=>{var C;return f(((C=c.target.files)==null?void 0:C[0])||null)},style:{marginBottom:4,width:"100%"}}),e.jsx("input",{value:h,onChange:c=>x(c.target.value),placeholder:"Description",style:{borderRadius:4,padding:4,marginBottom:4,width:"100%"}}),e.jsx("button",{onClick:S,disabled:p||!g||!u&&!l,style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700,width:"100%"},children:"Mint NFT"})]})]})};async function gs(n){const{data:t}=await T.from("analytics_events").select("details").eq("userid",n).eq("event","coin_earned"),d=(t==null?void 0:t.reduce((g,o)=>{var u;return g+(((u=o.details)==null?void 0:u.amount)||0)},0))||0,{count:a}=await T.from("arcade_scores").select("id",{count:"exact",head:!0}).eq("userid",n),{count:r}=await T.from("referrals").select("id",{count:"exact",head:!0}).eq("referrer_id",n),{count:p}=await T.from("achievements").select("id",{count:"exact",head:!0}).eq("userid",n).eq("completed",!0),{count:s}=await T.from("nfts").select("id",{count:"exact",head:!0}).eq("userid",n);return{totalCoins:d,gamesPlayed:a||0,referrals:r||0,achievements:p||0,nfts:s||0}}const ps=({userId:n})=>{const[t,d]=i.useState(null),[a,r]=i.useState(!0);return i.useEffect(()=>{gs(n).then(p=>{d(p),r(!1)})},[n]),a?e.jsx("div",{children:"Loading analytics..."}):t?e.jsxs("div",{style:{maxWidth:340,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Your Analytics"}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Total Coins Earned:"})," ",t.totalCoins.toLocaleString()]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Games Played:"})," ",t.gamesPlayed]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Referrals:"})," ",t.referrals]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Achievements:"})," ",t.achievements]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"NFTs Owned:"})," ",t.nfts]})]}):e.jsx("div",{children:"No analytics found."})},hs="/assets/dollar-BVwGV8h8.png",ms="/assets/mining-C0IUERmY.png",xs=[{key:"doubleCoins",name:"Double Coins",description:"Doubles all coins earned for 1 hour.",price:1e3,duration:60*60*1e3,icon:hs},{key:"energyRefill",name:"Energy Refill",description:"Instantly refill your energy to max.",price:500,duration:0,icon:K},{key:"autoMiner",name:"Auto Miner",description:"Automatically mines coins for 1 hour.",price:2e3,duration:60*60*1e3,icon:ms},{key:"passiveBoost",name:"Passive Boost",description:"Doubles passive income for 1 hour.",price:1500,duration:60*60*1e3,icon:fe}],ys=({coinCount:n=0,onPurchase:t,activeBoosts:d={}})=>{const[a,r]=i.useState(d),p=s=>{if(n<s.price){alert("Not enough coins!");return}r(g=>({...g,[s.key]:Date.now()+s.duration})),t&&t(s.key)};return e.jsxs("div",{className:B.centerContent,children:[e.jsx("h2",{children:"Boosts"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:24},children:xs.map(s=>e.jsxs("div",{style:{border:"1px solid #ccc",borderRadius:12,padding:16,minWidth:220,background:"#fff",position:"relative"},children:[e.jsx("img",{src:s.icon,alt:s.name,style:{width:38,position:"absolute",top:12,right:12,opacity:.85}}),e.jsx("h3",{children:s.name}),e.jsx("p",{children:s.description}),e.jsxs("p",{children:["Price: ",e.jsx("b",{children:s.price})," coins"]}),a[s.key]&&a[s.key]>Date.now()?e.jsxs("span",{style:{color:"green"},children:["Active (",Math.ceil((a[s.key]-Date.now())/6e4)," min left)"]}):e.jsx("button",{onClick:()=>p(s),disabled:n<s.price,children:"Purchase"})]},s.key))})]})},bs="data:image/png;base64,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",js="/assets/shape-CORa6uGx.png",vs="/assets/vecteezy_crown-slot-machine_58273750-B1lA6sIg.png",Ss="_memoryMatchGame_1kxvg_1",As="_memoryGrid_1kxvg_11",ws="_memoryCard_1kxvg_19",ks="_flipped_1kxvg_31",xe={memoryMatchGame:Ss,memoryGrid:As,memoryCard:ws,flipped:ks},Fe=["ðŸŽ","ðŸŒ","ðŸ‡","ðŸ‰","ðŸ’","ðŸ‹","ðŸ","ðŸ¥"],qe=[...Fe,...Fe];function Ke(n){return n.map(t=>[Math.random(),t]).sort((t,d)=>t[0]-d[0]).map(([,t])=>t)}const Cs=({onScore:n})=>{const[t,d]=i.useState(()=>Ke(qe)),[a,r]=i.useState([]),[p,s]=i.useState([]),[g,o]=i.useState(0),[u,b]=i.useState(!1),h=l=>{a.length===2||a.includes(l)||p.includes(l)||u||r(f=>[...f,l])};ne.useEffect(()=>{if(a.length===2){o(y=>y+1);const[l,f]=a;t[l]===t[f]?(s(y=>[...y,l,f]),r([])):setTimeout(()=>r([]),800)}},[a,t]),ne.useEffect(()=>{p.length===t.length&&t.length>0&&(b(!0),n(1e3-g*10))},[p,t,g,n]);const x=()=>{d(Ke(qe)),r([]),s([]),o(0),b(!1)};return e.jsxs("div",{className:xe.memoryMatchGame,children:[e.jsx("h4",{children:"Memory Match"}),e.jsx("div",{className:xe.memoryGrid,children:t.map((l,f)=>e.jsx("button",{className:xe.memoryCard+(a.includes(f)||p.includes(f)?" "+xe.flipped:""),onClick:()=>h(f),disabled:a.length===2||p.includes(f)||u,children:e.jsx("span",{children:a.includes(f)||p.includes(f)?l:"â“"})},f))}),e.jsxs("div",{style:{margin:"12px 0"},children:["Moves: ",g]}),u&&e.jsxs("div",{style:{color:"#1bbf4c",fontWeight:700,margin:"8px 0"},children:["ðŸŽ‰ You matched all cards!",e.jsx("button",{onClick:x,style:{marginLeft:12,background:"#ffe259",borderRadius:6,padding:"4px 14px",fontWeight:700},children:"Play Again"})]})]})},Is="arcade_scores",Ns="arcade_leaderboard";async function Ne(n,t,d){await T.from(Is).insert([{game:n,userid:t,score:d}])}async function He(n){const{data:t,error:d}=await T.from(Ns).select("*").eq("game",n).order("score",{ascending:!1}).limit(10);return d?[]:t}const O=10,Qe={x:1,y:1,dir:"right"},Ye={x:8,y:8},Je=Array.from({length:O*O},(n,t)=>t);function Bs(n,t){return t*O+n}const Ts=({userid:n})=>{const[t,d]=i.useState(Qe),[a,r]=i.useState(Ye),[p,s]=i.useState(Je),[g,o]=i.useState(0),[u,b]=i.useState(0),[h,x]=i.useState(!1);return i.useEffect(()=>{if(h){const l=setTimeout(()=>{d(Qe),r(Ye),s(Je),o(0),x(!1)},2e3);return()=>clearTimeout(l)}},[h]),i.useEffect(()=>{const l=f=>{h||d(y=>{let{x:S,y:c,dir:C}=y;return f.key==="ArrowUp"&&(c=Math.max(0,c-1),C="up"),f.key==="ArrowDown"&&(c=Math.min(O-1,c+1),C="down"),f.key==="ArrowLeft"&&(S=Math.max(0,S-1),C="left"),f.key==="ArrowRight"&&(S=Math.min(O-1,S+1),C="right"),{x:S,y:c,dir:C}})};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[h]),i.useEffect(()=>{if(h)return;const l=setInterval(()=>{r(f=>{const y=[{x:f.x+1,y:f.y},{x:f.x-1,y:f.y},{x:f.x,y:f.y+1},{x:f.x,y:f.y-1}].filter(({x:S,y:c})=>S>=0&&S<O&&c>=0&&c<O);return y[Math.floor(Math.random()*y.length)]||f})},400);return()=>clearInterval(l)},[h]),i.useEffect(()=>{const l=Bs(t.x,t.y);p.includes(l)&&(s(f=>f.filter(y=>y!==l)),o(f=>f+10)),t.x===a.x&&t.y===a.y&&(b(g),x(!0)),p.length===0&&(b(g),x(!0))},[t,a,p,g]),i.useEffect(()=>{h&&u>0&&n&&Ne("Pacman",n,u)},[h,u,n]),e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Pacman"}),e.jsx("div",{className:"arcade-grid",children:Array.from({length:O*O}).map((l,f)=>{const y=f%O,S=Math.floor(f/O);let c="";return t.x===y&&t.y===S?c="ðŸ˜‹":a.x===y&&a.y===S?c="ðŸ‘»":p.includes(f)&&(c="â€¢"),e.jsx("div",{className:"arcade-cell",children:c},f)})}),e.jsxs("div",{children:["Score: ",g]}),h&&e.jsx("div",{children:p.length===0?"You Win!":"Game Over"})]})},ge=({game:n})=>{const[t,d]=i.useState([]);return i.useEffect(()=>{He(n).then(d);const a=setInterval(()=>He(n).then(d),5e3);return()=>clearInterval(a)},[n]),e.jsxs("div",{style:{background:"#222",borderRadius:8,padding:8,margin:"8px 0",color:"#fff",minWidth:180},children:[e.jsxs("b",{children:[n," Top 10"]}),e.jsxs("ol",{style:{margin:0,paddingLeft:18},children:[t.length===0&&e.jsx("li",{style:{color:"#888"},children:"No scores yet"}),t.map((a,r)=>e.jsxs("li",{children:[a.name,": ",a.score]},r))]})]})},Rs=({onBack:n,userId:t})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:n,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx(Ts,{userid:t}),e.jsx(ge,{game:"Pacman"})]}),J=200,Z=200,Ze=5;function Xe(){return{x:Math.random()*J,y:Math.random()*Z,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2,r:10+Math.random()*10}}const Es=({userid:n})=>{const[t,d]=i.useState({x:J/2,y:Z/2,angle:0}),[a,r]=i.useState(Array.from({length:Ze},Xe)),[p,s]=i.useState(0),[g,o]=i.useState(!1);return i.useEffect(()=>{if(g){const u=setTimeout(()=>{d({x:J/2,y:Z/2,angle:0}),r(Array.from({length:Ze},Xe)),s(0),o(!1)},2e3);return()=>clearTimeout(u)}},[g]),i.useEffect(()=>{const u=b=>{g||d(h=>{let{x,y:l,angle:f}=h;return b.key==="ArrowLeft"&&(f-=.2),b.key==="ArrowRight"&&(f+=.2),b.key==="ArrowUp"&&(x+=Math.cos(f)*5,l+=Math.sin(f)*5),x=(x+J)%J,l=(l+Z)%Z,{x,y:l,angle:f}})};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[g]),i.useEffect(()=>{if(g)return;const u=setInterval(()=>{r(b=>b.map(h=>({...h,x:(h.x+h.dx+J)%J,y:(h.y+h.dy+Z)%Z}))),a.forEach(b=>{Math.hypot(b.x-t.x,b.y-t.y)<b.r+5&&o(!0)})},50);return()=>clearInterval(u)},[t,a,g]),i.useEffect(()=>{g||s(u=>u+1)},[a,g]),i.useEffect(()=>{g&&p>0&&n&&Ne("Asteroids",n,p)},[g,p,n]),e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Asteroids"}),e.jsxs("svg",{width:J,height:Z,style:{background:"#111"},children:[e.jsx("circle",{cx:t.x,cy:t.y,r:5,fill:"yellow"}),a.map((u,b)=>e.jsx("circle",{cx:u.x,cy:u.y,r:u.r,fill:"gray"},b))]}),e.jsxs("div",{children:["Score: ",p]}),g&&e.jsx("div",{children:"Game Over"})]})},Ms=({onBack:n,userId:t})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:n,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx(Es,{userid:t}),e.jsx(ge,{game:"Asteroids"})]}),se=16,ae=10,$e=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]]];function Me(){return{shape:$e[Math.floor(Math.random()*$e.length)],x:3,y:0}}const Ps=({userid:n})=>{const[t,d]=i.useState(Array.from({length:se},()=>Array(ae).fill(0))),[a,r]=i.useState(Me()),[p,s]=i.useState(0),[g,o]=i.useState(!1);i.useEffect(()=>{if(g){const x=setTimeout(()=>{d(Array.from({length:se},()=>Array(ae).fill(0))),r(Me()),s(0),o(!1)},2e3);return()=>clearTimeout(x)}},[g]);const u=(x,l)=>{const f=x.map(y=>[...y]);return l.shape.forEach((y,S)=>y.forEach((c,C)=>{if(c){const A=l.x+C,M=l.y+S;M>=0&&M<se&&A>=0&&A<ae&&(f[M][A]=1)}})),f},b=ne.useCallback((x,l,f=a.shape)=>{for(let y=0;y<f.length;y++)for(let S=0;S<f[y].length;S++)if(f[y][S]){const c=a.x+x+S,C=a.y+l+y;if(c<0||c>=ae||C>=se||C>=0&&t[C][c])return!1}return!0},[a,t]);i.useEffect(()=>{if(g)return;const x=setInterval(()=>{b(0,1)?r(l=>({...l,y:l.y+1})):(d(l=>u(l,a)),d(l=>{const f=l.filter(S=>S.some(c=>!c)),y=se-f.length;return y>0&&s(S=>S+y*100),[...Array.from({length:y},()=>Array(ae).fill(0)),...f]}),r(Me()),b(0,0)||o(!0))},400);return()=>clearInterval(x)},[a,t,g,b]),i.useEffect(()=>{g&&p>0&&n&&Ne("Tetris",n,p)},[g,p,n]),i.useEffect(()=>{const x=l=>{if(!g&&(l.key==="ArrowLeft"&&b(-1,0)&&r(f=>({...f,x:f.x-1})),l.key==="ArrowRight"&&b(1,0)&&r(f=>({...f,x:f.x+1})),l.key==="ArrowDown"&&b(0,1)&&r(f=>({...f,y:f.y+1})),l.key==="ArrowUp")){const f=a.shape[0].map((y,S)=>a.shape.map(c=>c[S]).reverse());b(0,0,f)&&r(y=>({...y,shape:f}))}};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[a,t,g,b]);const h=()=>{const x=t.map(l=>[...l]);return a.shape.forEach((l,f)=>l.forEach((y,S)=>{if(y){const c=a.x+S,C=a.y+f;C>=0&&C<se&&c>=0&&c<ae&&(x[C][c]=2)}})),x.map((l,f)=>l.map((y,S)=>e.jsx("div",{className:y===2?"arcade-cell tetris-active":y?"arcade-cell tetris-filled":"arcade-cell"},S+"-"+f)))};return e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Tetris"}),e.jsx("div",{className:"arcade-grid tetris-grid",children:h()}),e.jsxs("div",{children:["Score: ",p]}),g&&e.jsx("div",{children:"Game Over"})]})},Ls=({onBack:n,userId:t})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:n,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx(Ps,{userid:t}),e.jsx(ge,{game:"Tetris"})]}),ye=8,Y=7,Ds=({userid:n})=>{const[t,d]=i.useState(Math.floor(Y/2)),[a,r]=i.useState(0),[p,s]=i.useState(0),[g,o]=i.useState(!1);ne.useEffect(()=>{if(g){const x=setTimeout(()=>{d(Math.floor(Y/2)),r(0),s(0),o(!1)},2e3);return()=>clearTimeout(x)}},[g]);const u=()=>{if(g)return;let x=t;for(let f=0;f<ye;f++)x+=Math.random()<.5?-1:1,x=Math.max(0,Math.min(Y-1,x));r(ye),d(x);const l=[10,20,50,100,50,20,10][x];s(l),o(!0)};ne.useEffect(()=>{g&&p>0&&n&&Ne("Plinko",n,p)},[g,p,n]);const b=()=>{const x=[];for(let l=1;l<ye;l++)for(let f=0;f<Y;f++)(l+f)%2===1&&x.push(e.jsx("div",{className:"plinko-peg",style:{gridColumn:f+1,gridRow:l+1},children:"â—"},`peg-${f}-${l}`));return x},h=()=>e.jsx("div",{style:{display:"flex",width:Y*20,margin:"0 auto"},children:[10,20,50,100,50,20,10].map((x,l)=>e.jsx("div",{className:"plinko-bucket",style:{width:20},children:x},l))});return e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Plinko"}),e.jsxs("div",{className:"arcade-grid plinko-grid",style:{position:"relative"},children:[Array.from({length:ye*Y}).map((x,l)=>{const f=l%Y,y=Math.floor(l/Y);let S="";return y===a&&f===t&&(S="âšª"),e.jsx("div",{className:"arcade-cell",children:S},l)}),b()]}),h(),e.jsx("button",{onClick:u,disabled:g,children:"Drop Ball"}),e.jsxs("div",{children:["Score: ",p]}),g&&e.jsx("div",{children:"Game Over"})]})},_s=({onBack:n,userId:t})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:n,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx(Ds,{userid:t}),e.jsx(ge,{game:"Plinko"})]}),le=[{icon:"ðŸ’",color:"#e74c3c",payout:2},{icon:"ðŸ‹",color:"#f1c40f",payout:3},{icon:"ðŸ””",color:"#f39c12",payout:5},{icon:"ðŸ’Ž",color:"#00bfff",payout:10},{icon:"7ï¸âƒ£",color:"#e67e22",payout:20},{icon:"â­",color:"#f9e79f",payout:15},{icon:"ðŸ€",color:"#27ae60",payout:8}],rt=3,ot=3,Ws=.1,zs=5,Us=()=>le[Math.floor(Math.random()*le.length)],lt=()=>Array.from({length:ot},Us),Os=()=>Array.from({length:rt},lt);function Gs(n){var a,r,p;let t=0;const d=[];for(let s=0;s<ot;s++){const g=n[0][s].icon;n.every(o=>o[s].icon===g)&&(t+=((a=le.find(o=>o.icon===g))==null?void 0:a.payout)||0,d.push(s))}return n[0][0].icon===n[1][1].icon&&n[1][1].icon===n[2][2].icon&&(t+=((r=le.find(s=>s.icon===n[0][0].icon))==null?void 0:r.payout)||0,d.push(3)),n[0][2].icon===n[1][1].icon&&n[1][1].icon===n[2][0].icon&&(t+=((p=le.find(s=>s.icon===n[0][2].icon))==null?void 0:p.payout)||0,d.push(4)),{win:t,winLines:d}}const Vs=({userId:n,coinBalance:t,onDeposit:d,onWithdraw:a,onScore:r,onBack:p})=>{const[s,g]=i.useState(Os()),[o,u]=i.useState(!1),[b,h]=i.useState(""),[x,l]=i.useState("info"),[f,y]=i.useState(10),[S,c]=i.useState(!1),[C,A]=i.useState([]),[M,L]=i.useState(!1),[_,w]=i.useState(null),[m,E]=i.useState(""),[P,U]=i.useState(!1),[pe,ee]=i.useState(""),[Be]=Se(),j=Pe(),k=t>=f&&!o,v=async()=>{if(!k)return;u(!0),h("Spinning..."),l("info"),A([]);const R=localStorage.getItem("userId")||"unknown";await X(R,"arcade_spin",{game:"SlotMachine",bet:f}),setTimeout(()=>{const N=Array.from({length:rt},lt);g(N);const{win:z,winLines:V}=Gs(N);A(V);const re=z*f;let te="",Te="error";z>0?(te=`You win ${re} coins!`,Te="success",r(re),X(R,"arcade_win",{game:"SlotMachine",win:re})):(te="No win. Try again!",Te="error"),Math.random()<Ws?(c(!0),setTimeout(()=>{const Re=Math.floor(Math.random()*10+1)*zs*f;h(`Bonus Game! You won ${Re} coins!`),l("success"),r(Re),X(R,"arcade_bonus",{game:"SlotMachine",bonus:Re}),c(!1)},1200)):(h(te),l(Te)),u(!1)},1200),a(f)},W=async()=>{if(!j){h("Please connect your TON wallet first."),l("error");return}L(!0),h("Awaiting TON payment..."),l("info");try{const z=await Be.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ie,amount:"100000000"}]});w(z.boc||"");const V=j.account.address;(await(await fetch("/functions/v1/ton-payment-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({txHash:z.boc,userId:V,amountTon:.1})})).json()).ok?(d(100),h("Deposit verified! +100 coins."),l("success"),await X(j.account.address,"arcade_deposit",{game:"SlotMachine",tonAmount:.1,coinAmount:100})):(h("Deposit not verified. Please contact support."),l("error"))}catch(R){let N="Deposit cancelled or failed.";typeof R=="object"&&R&&"message"in R&&typeof R.message=="string"&&(N+=`
${R.message}`),h(N),l("error")}L(!1)},G=async()=>{var R;if(!m){ee("Enter your TON wallet address."),l("error");return}U(!0),ee("Processing withdrawal..."),l("info");try{const V=((R=j==null?void 0:j.account)==null?void 0:R.address)||"unknown",te=await(await fetch("/functions/v1/ton-withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:V,withdrawAddress:m,coinAmount:100,tonAmount:.1})})).json();te.ok?(ee("Withdrawal request accepted! TON will be sent soon."),l("success"),a(100),await X(V,"arcade_withdraw",{game:"SlotMachine",tonAmount:.1,coinAmount:100,withdrawAddress:m})):(ee("Withdrawal failed: "+(te.error||"Unknown error")),l("error"))}catch(N){let z="Withdrawal failed.";typeof N=="object"&&N&&"message"in N&&typeof N.message=="string"&&(z+=`
${N.message}`),ee(z),l("error")}U(!1)};return e.jsxs("div",{style:{background:"#222",borderRadius:16,padding:24,color:"#fff",boxShadow:"0 0 24px #f39c12",maxWidth:400,margin:"0 auto",position:"relative"},children:[e.jsx("button",{onClick:p,style:{position:"absolute",left:16,top:16,background:"#fff",color:"#f39c12",border:"none",borderRadius:8,padding:"2px 10px",fontWeight:700,cursor:"pointer",boxShadow:"0 0 4px #000"},children:"â† Back"}),e.jsx("h2",{style:{color:"#f39c12",textShadow:"0 0 8px #fff"},children:"ðŸŽ° Slot Machine"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:8},children:[e.jsx("span",{style:{fontWeight:600,color:"#fff"},children:"User ID:"})," ",e.jsx("span",{style:{marginLeft:8,color:"#f9e79f"},children:n})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:8},children:[e.jsx("span",{style:{fontWeight:600,color:"#fff"},children:"Balance:"})," ",e.jsx("span",{style:{marginLeft:8,color:"#00ff99"},children:t})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(Ae,{style:{marginBottom:8}}),e.jsx("button",{onClick:W,disabled:M,style:{background:"#27ae60",color:"#fff",borderRadius:8,padding:"4px 12px",border:"none",fontWeight:600,marginBottom:4},children:M?"Processing...":"Deposit 0.1 TON â†’ 100 coins"}),_&&e.jsx("div",{style:{color:"#00ff99",fontSize:10},children:"Tx sent!"}),e.jsxs("div",{style:{marginTop:8,width:"100%"},children:[e.jsx("input",{type:"text",placeholder:"Your TON wallet address",value:m,onChange:R=>E(R.target.value),style:{width:220,borderRadius:4,padding:4,marginRight:8},disabled:P}),e.jsx("button",{onClick:G,disabled:P||!t,style:{background:"#c0392b",color:"#fff",borderRadius:8,padding:"4px 12px",border:"none",fontWeight:600},children:P?"Processing...":"Withdraw 100 coins â†’ 0.1 TON"}),pe&&e.jsx("div",{style:{color:"#00ff99",fontSize:10},children:pe})]})]}),e.jsxs("div",{style:{background:"#111",borderRadius:12,padding:12,margin:"16px 0",boxShadow:"0 0 12px #f39c12 inset",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:s.map((R,N)=>e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:R.map((z,V)=>e.jsx("div",{style:{width:48,height:48,fontSize:32,background:C.includes(V)?"#f9e79f":z.color,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:C.includes(V)?"0 0 16px #fff":"0 0 8px #000",border:"2px solid #fff",transition:"background 0.3s, box-shadow 0.3s",animation:o?"spin 0.6s linear infinite":void 0},children:z.icon},V))},N))}),e.jsxs("div",{style:{margin:"8px 0",color:"#fff",fontWeight:600},children:["Bet: ",e.jsx("input",{type:"number",min:1,max:t,value:f,onChange:R=>y(Math.max(1,Math.min(t,Number(R.target.value)))),style:{width:60,borderRadius:4,padding:2}})]}),e.jsx("button",{onClick:v,disabled:!k,style:{background:"#f39c12",color:"#fff",borderRadius:12,padding:"8px 32px",fontWeight:700,fontSize:20,boxShadow:"0 0 16px #f9e79f",border:"none",marginTop:8,cursor:k?"pointer":"not-allowed",transition:"background 0.2s"},children:o?"Spinning...":"SPIN"}),S&&e.jsx("div",{style:{color:"#00ff99",fontWeight:700,fontSize:18,marginTop:8,textShadow:"0 0 8px #fff"},children:"BONUS GAME!"}),e.jsx("div",{style:{marginTop:12,minHeight:24,color:x==="success"?"#00ff99":x==="error"?"#ff4d4f":"#fff",fontWeight:600,textShadow:x==="success"?"0 0 8px #00ff99":x==="error"?"0 0 8px #ff4d4f":void 0,animation:x==="success"&&b?"popSuccess 0.5s":x==="error"&&b?"popError 0.5s":void 0,transition:"color 0.2s, text-shadow 0.2s"},children:b}),e.jsx("style",{children:`
          @keyframes popSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
          }
          @keyframes popError {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
          }
        `})]}),e.jsx(ge,{game:"SlotMachine"}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotateX(0deg); }
          100% { transform: rotateX(360deg); }
        }
      `})]})},Fs=n=>{const{userId:t}=n,[d,a]=i.useState(null);return d==="Pacman"?e.jsx(Rs,{onBack:()=>a(null),userId:t}):d==="Asteroids"?e.jsx(Ms,{onBack:()=>a(null),userId:t}):d==="Tetris"?e.jsx(Ls,{onBack:()=>a(null),userId:t}):d==="Plinko"?e.jsx(_s,{onBack:()=>a(null),userId:t}):d==="SlotMachine"?e.jsx(Vs,{userId:t,coinBalance:n.coinBalance||0,onDeposit:n.onDeposit||(()=>{}),onWithdraw:n.onWithdraw||(()=>{}),onScore:n.onScore||(()=>{}),onBack:()=>a(null)}):d==="MemoryMatch"?e.jsx(Cs,{onScore:n.onScore||(()=>{})}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:24},children:[e.jsx("h2",{children:"Arcade Mini-Games"}),e.jsxs("div",{style:{background:"#ffe259",color:"#24308a",borderRadius:10,padding:"10px 18px",fontWeight:700,marginBottom:8,boxShadow:"0 2px 8px #24308a22"},children:[e.jsxs("span",{style:{fontSize:16},children:["ðŸŒž ","Summer Memory Match!"]}),e.jsx("div",{style:{fontSize:13,fontWeight:400},children:"Play Memory Match for bonus rewards this week!"})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:32,justifyContent:"center"},children:[e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("MemoryMatch"),"aria-label":"Play Memory Match",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("MemoryMatch")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("span",{style:{fontSize:32,marginBottom:4},children:"ðŸ§ "}),"Memory Match"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Pacman"),"aria-label":"Play Pacman",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Pacman")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:bs,alt:"Pacman",style:{width:38,marginBottom:4}}),"Pacman"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Asteroids"),"aria-label":"Play Asteroids",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Asteroids")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:Le,alt:"Asteroids",style:{width:38,marginBottom:4}}),"Asteroids"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Tetris"),"aria-label":"Play Tetris",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Tetris")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:js,alt:"Tetris",style:{width:38,marginBottom:4}}),"Tetris"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Plinko"),"aria-label":"Play Plinko",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Plinko")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:_e,alt:"Plinko",style:{width:38,marginBottom:4}}),"Plinko"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,background:"linear-gradient(135deg,#f39c12,#e74c3c,#00bfff,#f9e79f)",color:"#fff",fontWeight:700,boxShadow:"0 0 16px #f39c12",outline:"none",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("SlotMachine"),"aria-label":"Play Slot Machine",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("SlotMachine")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 16px #f39c12",children:[e.jsx("img",{src:vs,alt:"Slot Machine",style:{width:38,marginBottom:4}}),"Slot Machine ðŸŽ°"]})]})]})},qs="_airdropBg_1qbcm_1",Ks="_airdropContainer_1qbcm_10",Hs="_headerSection_1qbcm_23",Qs="_headerIcon_1qbcm_28",Ys="_title_1qbcm_43",Js="_subtitle_1qbcm_50",Zs="_highlight_1qbcm_56",Xs="_walletSection_1qbcm_61",$s="_tonBtn_1qbcm_65",ea="_donateCard_1qbcm_77",ta="_donateTitle_1qbcm_90",na="_donateIcon_1qbcm_99",sa="_donateDesc_1qbcm_105",aa="_inputRow_1qbcm_112",ia="_input_1qbcm_112",ra="_donateBtn_1qbcm_128",oa="_success_1qbcm_147",la="_error_1qbcm_153",ca="_effectsSection_1qbcm_159",da="_effectsTitle_1qbcm_164",ua="_effectsGrid_1qbcm_172",fa="_effectCard_1qbcm_179",ga="_effectIcon_1qbcm_209",pa="_effectName_1qbcm_215",ha="_effectDesc_1qbcm_221",I={airdropBg:qs,airdropContainer:Ks,headerSection:Hs,headerIcon:Qs,title:Ys,subtitle:Js,highlight:Zs,walletSection:Xs,tonBtn:$s,donateCard:ea,donateTitle:ta,donateIcon:na,donateDesc:sa,inputRow:aa,input:ia,donateBtn:ra,success:oa,error:la,effectsSection:ca,effectsTitle:da,effectsGrid:ua,effectCard:fa,effectIcon:ga,effectName:pa,effectDesc:ha},ma=()=>{const[n,t]=i.useState(""),[d,a]=i.useState(null),[r,p]=i.useState(!1),[s]=Se(),g=async()=>{if(a(null),!n||isNaN(Number(n))||Number(n)<=0){a("Please enter a valid TON amount.");return}p(!0);try{await s.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ie,amount:(Number(n)*1e9).toString()}]}),a("âœ… Thank you for your donation!"),t("");const o=localStorage.getItem("userId")||"unknown";await X(o,"airdrop_donation",{amountTon:Number(n)})}catch(o){let u="Transaction cancelled or failed.";typeof o=="object"&&o&&"message"in o&&typeof o.message=="string"&&(u+=`
${o.message}`),a(u)}p(!1)};return e.jsx("div",{className:I.airdropBg,children:e.jsxs("div",{className:I.airdropContainer,children:[e.jsxs("div",{className:I.headerSection,children:[e.jsx("img",{src:$,alt:"Airdrop",className:I.headerIcon}),e.jsx("h2",{className:I.title,children:"Airdrop & Charity"}),e.jsxs("p",{className:I.subtitle,children:["Connect your TON wallet and become a Guardian Angel!",e.jsx("br",{}),e.jsx("span",{className:I.highlight,children:"Donate any amount of TON to charity and help create a better tomorrow."})]})]}),e.jsx("div",{className:I.walletSection,children:e.jsx(Ae,{className:I.tonBtn,iconUrl:K,children:"Connect TON Wallet"})}),e.jsxs("div",{className:I.donateCard,children:[e.jsxs("div",{className:I.donateTitle,children:[e.jsx("img",{src:H,alt:"Guardian Angel",className:I.donateIcon}),e.jsx("span",{children:"Become a Guardian Angel"})]}),e.jsx("div",{className:I.donateDesc,children:"Enter the amount of TON you wish to donate. Every contribution makes a difference!"}),e.jsxs("div",{className:I.inputRow,children:[e.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Amount (TON)",value:n,onChange:o=>t(o.target.value),className:I.input,"aria-label":"Donation amount in TON",tabIndex:0,style:{outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},onFocus:o=>o.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:o=>o.currentTarget.style.boxShadow="0 0 0 2px #24308a33"}),e.jsx("button",{onClick:g,className:I.donateBtn,disabled:r,"aria-label":"Donate TON to charity",tabIndex:0,style:{outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},onKeyDown:o=>{(o.key==="Enter"||o.key===" ")&&g()},onFocus:o=>o.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:o=>o.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:r?"Processing...":"Donate"})]}),d&&e.jsxs("div",{className:d.startsWith("âœ…")?I.success:I.error,style:d.startsWith("âœ…")?{animation:"popSuccess 0.5s"}:{},children:[d,e.jsx("style",{children:`
												@keyframes popSuccess {
													0% { transform: scale(0.8); opacity: 0.5; }
													60% { transform: scale(1.1); opacity: 1; }
													100% { transform: scale(1); opacity: 1; }
												}
											`})]})]}),e.jsxs("div",{className:I.effectsSection,children:[e.jsx("h3",{className:I.effectsTitle,children:"Airdrop Effects"}),e.jsxs("div",{className:I.effectsGrid,children:[e.jsxs("div",{className:I.effectCard,children:[e.jsx("img",{src:ke,alt:"Boost",className:I.effectIcon}),e.jsx("div",{className:I.effectName,children:"Boosts"}),e.jsx("div",{className:I.effectDesc,children:"Special boosts for all donors during airdrop events."})]}),e.jsxs("div",{className:I.effectCard,children:[e.jsx("img",{src:q,alt:"Rewards",className:I.effectIcon}),e.jsx("div",{className:I.effectName,children:"Exclusive Rewards"}),e.jsx("div",{className:I.effectDesc,children:"Unlock unique in-game rewards and badges for your generosity."})]}),e.jsxs("div",{className:I.effectCard,children:[e.jsx("img",{src:H,alt:"Leaderboard",className:I.effectIcon}),e.jsx("div",{className:I.effectName,children:"Charity Leaderboard"}),e.jsx("div",{className:I.effectDesc,children:"Top donors are featured on the Guardian Angel leaderboard."})]})]})]})]})})},xa="/assets/clickimg-DfywW0u5.png",ya="/assets/double-tap-D8lEel7J.png";function ba(n){return 1+Math.floor(n/1e4)*2}const ja=({coinCount:n})=>{const t=ba(n);return e.jsxs("span",{className:B.coinsPerTap,children:[e.jsx("img",{src:ya,alt:"Coins per tap",style:{width:22,marginRight:4,verticalAlign:"middle"}}),"+",t," /tap"]})},va=({onClick:n,imgSrc:t})=>{const d=i.useRef(null),a=i.useRef(null),r=()=>{d.current&&(d.current.classList.add(B.pressed),setTimeout(()=>d.current&&d.current.classList.remove(B.pressed),120)),a.current&&(a.current.style.opacity="1",a.current.classList.remove(B.coinGain),a.current.offsetWidth,a.current.classList.add(B.coinGain),setTimeout(()=>a.current&&(a.current.style.opacity="0"),700)),an("mining"),n()};return e.jsxs("div",{className:B.miningButtonWrapper,children:[e.jsx("img",{ref:d,src:t,alt:"Click to earn coins",className:B.miningButton,onClick:r}),e.jsx("div",{ref:a,className:B.coinGain,style:{opacity:0},children:"+ðŸ’°"})]})},Sa=({coinCount:n})=>e.jsxs("h1",{className:B.coinBalance,children:[e.jsx("img",{src:q,alt:"Coin",style:{width:32,marginRight:8,verticalAlign:"middle"}}),n]}),Aa=({coinsPerHour:n})=>e.jsxs("div",{className:B.passiveIncome,children:[e.jsx("img",{src:fe,alt:"Passive Income",style:{width:22,marginRight:4,verticalAlign:"middle"}}),"+",n.toLocaleString()," /hr"]}),wa="/assets/battery-aLTBX9JC.png",ka=({energy:n,maxEnergy:t})=>{const d=Math.max(0,Math.min(100,n/t*100));return e.jsxs("div",{className:B.energyBarContainer,children:[e.jsx("div",{className:B.energyBar,style:{width:`${d}%`}}),e.jsxs("span",{className:B.energyText,children:[e.jsx("img",{src:wa,alt:"Energy",style:{width:18,marginRight:4,verticalAlign:"middle"}}),n," / ",t]})]})};function Ca(n){return 1+Math.floor(n/1e4)*2}function et(){return 1e4}const be=5e3;function Ia(){return be}const Na=({userId:n})=>{const[t,d]=i.useState("marketplace");return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16,justifyContent:"center"},children:[e.jsx("button",{onClick:()=>d("marketplace"),style:{fontWeight:t==="marketplace"?700:400,background:t==="marketplace"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Marketplace Listings"}),e.jsx("button",{onClick:()=>d("nfts"),style:{fontWeight:t==="nfts"?700:400,background:t==="nfts"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"NFT Gallery & Mint"})]}),t==="marketplace"?e.jsx(xt,{}):e.jsx(it,{userId:n})]})};function Ba(){const[n,t]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("trophiesEarned")||"{}")}catch{return{}}}),d=j=>{n[j.key]||(t(k=>{const v={...k,[j.key]:!0};return localStorage.setItem("trophiesEarned",JSON.stringify(v)),v}),r(k=>k+j.reward))},[a,r]=i.useState(0),[p,s]=i.useState(0),[g,o]=i.useState(null),[u,b]=i.useState("");i.useEffect(()=>{u&&bt("app_loaded",u)},[u]);const[h,x]=i.useState("coin"),[l,f]=i.useState(Ia()),[y,S]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("purchasedItems")||"{}")}catch{return{}}}),[c,C]=i.useState(()=>{try{return JSON.parse(localStorage.getItem("upgrades")||"{}")}catch{return{}}}),[A,M]=i.useState(1),[L,_]=i.useState(1),[w,m]=i.useState({});i.useEffect(()=>{const j=setInterval(()=>{let k=et();c.passiveIncome&&(k+=100*Math.pow(2,c.passiveIncome-1)),c.hungerDrive&&(k+=500*Math.pow(2,c.hungerDrive-1)),c.autoMiner&&(k+=50*Math.pow(2,c.autoMiner-1)),c.magnet&&(k+=100*Math.pow(2,c.magnet-1)),w.passiveboost&&w.passiveboost>Date.now()&&(k*=2),r(v=>v+k/3600)},1e3);return()=>clearInterval(j)},[c,w]),i.useEffect(()=>{jt(),new Date().getHours()===10&&Notification.permission==="granted"&&vt("Donâ€™t forget your daily check-in!",{body:"Earn your daily bonus in the app."})},[]),i.useEffect(()=>{(async()=>{const k=localStorage.getItem("userId");if(k){b(k);const v=await De(k);v&&(r(v.coins),s(v.coins),o(v.country))}else{const W=new URLSearchParams(window.location.search).get("start"),G="You";if(localStorage.setItem("userId",G),b(G),W){const R=await Zt(W);if(R&&R.userid!==G){await ze(R.userid,G,void 0,1);const{data:N}=await T.from("referrals").select("id, referrer_id, referral_level").eq("referred_id",R.userid).single();N&&await ze(N.referrer_id,G,N.id,N.referral_level+1)}}}})()},[]),i.useEffect(()=>{!u||!g||a!==p&&(Ee(u,a),s(a))},[a,u,g,p]),i.useEffect(()=>{if(!u||!g)return;const j=setInterval(()=>{Ee(u,a),s(a)},3e4);return()=>clearInterval(j)},[a,u,g]);const E=j=>{C(k=>{const v=k[j]||0;if(v>=5e3)return k;const G={coinPerTap:400,passiveIncome:500,energy:300,hungerDrive:500,energyRegen:350,tapStreak:600,criticalTap:700,autoMiner:800,energySaver:900,magnet:1e3,ultraBoost:2e3,goldenTouch:2500}[j]*Math.pow(2,v);if(a<G)return k;r(N=>N-G),j==="energy"&&f(N=>N+100*Math.pow(2,v)),j==="ultraBoost"&&(M(N=>N*2),_(N=>N*2),setTimeout(()=>{M(N=>N/2),_(N=>N/2)},60*60*1e3));const R={...k,[j]:v+1};return localStorage.setItem("upgrades",JSON.stringify(R)),R})},P=async j=>{const k=j.target.value;o(k),u&&await Qt({userid:u,country:k,coins:0})},U=i.useCallback(()=>{let j=Ca(a);return c.coinPerTap&&(j+=2*Math.pow(2,c.coinPerTap-1)),c.goldenTouch&&(j+=10*Math.pow(2,c.goldenTouch-1)),w.doubletap&&w.doubletap>Date.now()&&(j*=2),w.megatap&&w.megatap>Date.now()&&(j*=100),w.doubleCoins&&w.doubleCoins>Date.now()&&(j*=2),y.goldentap&&(j+=100),j*A},[a,c,w,y,A]);i.useEffect(()=>{if(w.autoMiner&&w.autoMiner>Date.now()){const j=setInterval(()=>{r(k=>k+U())},1e3);return()=>clearInterval(j)}},[w,U]);const pe=async()=>{if(l<=0)return;let j=U();c.tapStreak&&(j+=10*Math.pow(2,c.tapStreak-1)),c.criticalTap&&Math.random()<.05*c.criticalTap&&(j*=2),r(v=>v+j);let k=1;c.energySaver&&(k=Math.max(1,k-c.energySaver)),f(v=>Math.max(0,v-k)),u&&g&&await Ee(u,a+j),w.megatap&&w.megatap>Date.now()&&m(v=>({...v,megatap:0}))},ee=j=>{S(v=>{const W={...v,[j.label]:!0};return localStorage.setItem("purchasedItems",JSON.stringify(W)),W}),j.label.includes("Coin Multiplier")&&j.value&&M(j.value),j.label.includes("Energy Multiplier")&&j.value&&_(j.value);const k=Date.now();if(j.effect==="autoclicker"){const v=setInterval(()=>{r(W=>W+U())},1e3);setTimeout(()=>clearInterval(v),60*60*1e3)}if(j.effect==="doubletap"&&m(v=>({...v,doubletap:k+60*60*1e3})),j.effect==="refill"&&f(be*L),j.effect==="passiveboost"&&m(v=>({...v,passiveboost:k+60*60*1e3})),j.effect==="luckyspin"&&Math.random()<.1&&r(v=>v*10),j.effect==="megatap"&&m(v=>({...v,megatap:k+10*1e3})),j.effect==="energysaver"&&m(v=>({...v,energysaver:k+60*60*1e3})),j.effect==="magnet"){const v=setInterval(()=>{r(W=>W+100)},5e3);setTimeout(()=>clearInterval(v),60*60*1e3)}j.effect==="goldentap"&&m(v=>({...v,goldentap:1/0})),j.effect==="ultraboost"&&(M(v=>v*2),_(v=>v*2),setTimeout(()=>{M(v=>v/2),_(v=>v/2)},10*60*1e3))},Be=()=>{if(!g)return e.jsxs("div",{className:B.countrySelection,children:[e.jsx("h1",{children:"Select Your Country"}),e.jsxs("select",{onChange:P,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Choose your country"}),Xt.map(j=>e.jsx("option",{value:j,children:j},j))]})]});switch(h){case"Marketplace":return e.jsx(Na,{userId:u});case"AdminAnalytics":return e.jsx(xn,{});case"coin":return e.jsxs("div",{className:B.centerContent,children:[e.jsxs("div",{className:B.topRow,children:[e.jsx("div",{className:B.coinsPerTapTopLeft,children:e.jsx(ja,{coinCount:a})}),e.jsx("div",{className:B.coinBalanceCenter,children:e.jsx(Sa,{coinCount:Math.floor(a)})}),e.jsx("div",{className:B.passiveIncomeTopRight,children:e.jsx(Aa,{coinsPerHour:et()})})]}),e.jsx(ka,{energy:l,maxEnergy:be}),e.jsxs("p",{children:["Country: ",g]}),e.jsx(va,{onClick:pe,imgSrc:xa})]});case"leaderboard":return e.jsx(sn,{});case"Shop":return e.jsx(mn,{onPurchase:ee,purchased:y});case"Trophies":{const j=Object.keys(y).length;return e.jsx(In,{coinCount:Math.floor(a),energy:Math.floor(l),shopPurchases:j,earned:n,onEarn:d})}case"Tasks":return e.jsx(qn,{});case"Upgrades":return e.jsx(ss,{upgrades:c,coins:a,onPurchase:E});case"Friends":return e.jsx(as,{});case"Boosts":return e.jsx(ys,{coinCount:a,activeBoosts:w,onPurchase:j=>{const k=Date.now();j==="doubleCoins"?(m(v=>({...v,doubleCoins:k+60*60*1e3})),r(v=>v-1e3)):j==="energyRefill"?(f(be*L),r(v=>v-500)):j==="autoMiner"?(m(v=>({...v,autoMiner:k+60*60*1e3})),r(v=>v-2e3)):j==="passiveBoost"&&(m(v=>({...v,passiveboost:k+60*60*1e3})),r(v=>v-1500))}});case"Arcade":return e.jsx(Fs,{userId:u,coinBalance:a,onDeposit:j=>r(k=>k+j),onWithdraw:j=>r(k=>Math.max(0,k-j)),onScore:j=>r(k=>k+j)});case"Airdrop":return e.jsx(ma,{});case"profile":return e.jsx(os,{userId:u});case"chat":return e.jsx(cs,{userId:u});case"events":return e.jsx(fs,{userId:u});case"nfts":return e.jsx(it,{userId:u});case"useranalytics":return e.jsx(ps,{userId:u});default:return null}};return e.jsx(kt,{children:e.jsx("div",{className:B.background,children:e.jsxs("div",{className:B.app,children:[Be(),g&&e.jsx(un,{onNavigate:x})]})})})}function Ta(){const n=Pe();return i.useEffect(()=>{async function t(){var d,a,r;if(n&&n.account.address){let p;try{const s=(d=window.Telegram)==null?void 0:d.WebApp;s&&((r=(a=s.initDataUnsafe)==null?void 0:a.user)!=null&&r.id)&&(p=s.initDataUnsafe.user.id.toString())}catch{}p&&await T.from("users").update({ton_wallet:n.account.address}).eq("userid",p)}}t()},[n]),null}ft.ready();ct.createRoot(document.getElementById("root")).render(e.jsx(ne.StrictMode,{children:e.jsxs(dt,{manifestUrl:"https://ton-connect.github.io/demo-dapp-with-react-ui/tonconnect-manifest.json",children:[e.jsx(Ta,{}),e.jsx(Ba,{})]})}));
