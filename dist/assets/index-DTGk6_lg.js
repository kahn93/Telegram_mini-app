import{r as o,j as e,u as je,T as Se,R as ne,a as Le,c as ft,b as gt}from"./vendor-react-DI3R431Q.js";import{c as ht}from"./vendor-supabase-DoWyVS0q.js";import{_ as pt}from"./vendor-BaVVdSmy.js";import"./vendor-ton-DdWMKeXQ.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const s of h.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&a(s)}).observe(document,{childList:!0,subtree:!0});function c(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function a(i){if(i.ep)return;i.ep=!0;const h=c(i);fetch(i.href,h)}})();const mt="https://pklvbpngamcbhsaxmlgn.supabase.co",yt="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBrbHZicG5nYW1jYmhzYXhtbGduIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MzE2NTEsImV4cCI6MjA3MTUwNzY1MX0.DcbX79sJg0aPGuCdGJCcCl9qoPWP4kM1E5GvO0SLeNQ",M=ht(mt,yt);async function xt(t){return H("analytics",t)}async function H(t,n){const{data:c,error:a}=await M.functions.invoke(t,{body:JSON.stringify(n),headers:{"Content-Type":"application/json"}});if(a)throw a;return c}async function _e(t){return H("coin_balance_save_load",t)}async function bt(t){return H("user_upgrade_purchase",t)}async function vt(t){return H("guardian_angel_airdrop",t)}async function At(t){return H("ton_jetton_payment_verify",t)}async function ze(t){return H("slot_machine_deposit_withdraw",t)}async function jt(t){return H("chat_message_send",t)}async function St(t){return H("nft_mint",t)}async function wt(t){return H("marketplace_action",t)}async function kt(t){return H("achievement_unlock",t)}const De="/assets/rocket-DzE50pAu.png",Ct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAAAuCAYAAACFxeMqAAADRElEQVR42u2dQW7tIAxFs4cu6m+hS+l+OvwbfLN00kqvPGNsX5sGcpGuVLUNAXMwYEhyHN/p/9txUtTqOp4TDUJtB7dKPBPTIumF4xbqx8f7SVGrqYX7INTUjnATbIpgUxTBpiiCTVEEm0qGIfr/0rXW8BzBBhphtfqg9YtcPwK1B2778688Ho9T0zJgI4F1tOGi5Z7pSSxl6IHizctjkx8IPdc9X9NevyXYo8qglew1QqRztOX9K8hbSCRQwvkYbDOC1HrNS7soNq20bxnYlZ67dw8rCBrQ5+e/U1I14M/l/7lftMO3+YzK3ru3B2ypzO3fNWXbthTsUWUiAEn5eyCQvIunrJUeBq1XC7UV0minMpXZAXamXS8H9qgH9/K3NAYC9AwPk1Uv6fqoPb1gv1zr8diJc+7Lgi3Bo+XtASCjbNlwR+umQZ0BdtSeo3IRbEfeCABXBrtXN0udNGCs94w6CnpsAzyWfC1gR8olTVt6cdvoAjlUP0NHzQA7o2PcCmzLPFeKelgM5PVsbqCFBreGOqNg9yIPEWC890M6I8HWVsvOnt+Lp2YCrcHi9dpR7xYFBnEUBNs53GeAjcZTtfv3gA7DCdjNawtpZEHy8HYOgq1MRVzzchBsD9DIaBUdVby2yAAbzed2UxHLUBbpKJGNAmmU8Oz8RYfeWWAjjodgF1TWO39DwO55VY8NVgW7Z9OMtQvBNgb4Ld4+c6cx4rnVxeNksNHFXmWZt52KSI2OLqYyzoSggFtDf1cBW7Np5qJ8e7BHjW7NB/H8VYB7wn4VG1vRcxs9qNGOYi7nLmBrjY6AlzkdUeeeE7bUZ4Ldi+NnrV1uBXZvkwM1WMVcG11c/hXYGeseZBS4LdjZB5WyvUz0rPSuYGc6iiXARmK5WdGLNh8U7kqoK+ue9eBHz57RPQatnJd+Sh09x5AZGciObVc+iFoZFam05fZRESSWiz7lbr2fdOzTuvs54+nqijpX2jM7r8u/VyTjGGelrA0065UBlfVvF3wVtkzLZwWwo0c4ZyXxvR6DjjD7PSN3S3zF2WSo+Bo0vruPogg2RRFsiiLYFMEm2NTuYBNuasvP4fEDpkxbfcBU+iVF8XvqFHVBqL8ADLBVpSxQqIEAAAAASUVORK5CYII=",ee="/assets/gift-D7ErWEXl.png",ue="/assets/money-DHhF0O9w.png";async function It(t){const{data:n}=await M.from("nfts").select("*").eq("userid",t);return n||[]}async function Nt(t){const{data:n,error:c}=await M.from("nfts").insert([t]);return{data:n,error:c}}const Bt=()=>{const[t,n]=o.useState([]),[c,a]=o.useState(!0),[i,h]=o.useState(""),[s,u]=o.useState(""),[p,g]=o.useState("item"),[m,f]=o.useState(!1),[y,l]=o.useState(""),[d,b]=o.useState(""),[j,r]=o.useState("");o.useEffect(()=>{M.from("marketplace_listings").select("*").eq("status","active").then(({data:A})=>{n(A||[]),a(!1)})},[]);const w=async A=>{const R=localStorage.getItem("userId")||"anon";await wt({userId:R,action:"buy",itemId:A.id.toString()}),n(t.filter(P=>P.id!==A.id)),alert(`Purchased ${A.item}!`)};return e.jsxs("div",{style:{maxWidth:600,margin:"32px auto",padding:24},children:[e.jsx("h2",{style:{textAlign:"center",color:"#24308a",fontWeight:800},children:"Marketplace"}),e.jsxs("form",{style:{marginBottom:32,background:"#fff",borderRadius:8,padding:16,boxShadow:"0 2px 8px #0001"},onSubmit:async A=>{if(A.preventDefault(),!i||!s)return;f(!0);const R=localStorage.getItem("userId")||"anon";let P;if(p==="nft"){if(!y||!d){alert("Please fill NFT name and image URL"),f(!1);return}P=Date.now().toString();const{error:E}=await Nt({userid:R,nft_id:P,name:y,image_url:d,description:j});if(E){alert("Error minting NFT!"),f(!1);return}}const{error:D,data:k}=await M.from("marketplace_listings").insert([{seller:R,item:p==="nft"?y:i,price:parseFloat(s),type:p,status:"active",...p==="nft"?{nft_id:P,image_url:d,description:j}:{}}]);f(!1);const x=k;!D&&x&&x.length>0&&typeof x[0].id=="number"?(n(E=>[...E,{id:x[0].id,seller:R,item:p==="nft"?y:i,price:parseFloat(s),type:p,status:"active"}]),h(""),u(""),g("item"),l(""),b(""),r("")):alert("Error creating listing!")},children:[e.jsx("h4",{style:{margin:0,color:"#24308a"},children:"Create Listing"}),e.jsxs("div",{style:{display:"flex",gap:8,marginTop:8},children:[p==="nft"?e.jsxs(e.Fragment,{children:[e.jsx("input",{placeholder:"NFT Name",value:y,onChange:A=>l(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0}),e.jsx("input",{placeholder:"Image URL",value:d,onChange:A=>b(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0}),e.jsx("input",{placeholder:"Description",value:j,onChange:A=>r(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"}})]}):e.jsx("input",{placeholder:"Item name",value:i,onChange:A=>h(A.target.value),style:{flex:2,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0}),e.jsx("input",{placeholder:"Price (TON)",value:s,onChange:A=>u(A.target.value.replace(/[^0-9.]/g,"")),style:{flex:1,padding:6,borderRadius:4,border:"1px solid #ccc"},required:!0,type:"number",min:"0.01",step:"0.01"}),e.jsxs("select",{value:p,onChange:A=>g(A.target.value),style:{flex:1,padding:6,borderRadius:4},children:[e.jsx("option",{value:"item",children:"Item"}),e.jsx("option",{value:"boost",children:"Boost"}),e.jsx("option",{value:"nft",children:"NFT"})]}),e.jsx("button",{type:"submit",disabled:m,style:{background:"#ffe259",color:"#222",fontWeight:700,border:"none",borderRadius:4,padding:"0 16px"},children:m?"Listing...":"List"})]})]}),c?e.jsx("div",{style:{textAlign:"center",color:"#888",marginTop:32},children:"Loading..."}):e.jsx("ul",{style:{listStyle:"none",padding:0},children:t.map(A=>e.jsxs("li",{style:{background:"rgba(255,255,255,0.12)",borderRadius:8,margin:"12px 0",padding:16,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[A.type==="boost"&&e.jsx("img",{src:De,alt:"Boost",style:{width:28,verticalAlign:"middle"}}),A.type==="nft"&&e.jsx("img",{src:Ct,alt:"NFT",style:{width:28,verticalAlign:"middle"}}),A.type==="item"&&e.jsx("img",{src:ee,alt:"Item",style:{width:28,verticalAlign:"middle"}}),e.jsx("strong",{children:A.item})," ",e.jsxs("span",{style:{fontSize:12,color:"#888"},children:["(",A.type,")"]}),e.jsx("br",{}),e.jsxs("span",{style:{color:"#888",fontSize:11},children:["Seller: ",A.seller]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:ue,alt:"TON",style:{width:22,verticalAlign:"middle"}}),e.jsxs("span",{style:{fontWeight:700,color:"#24308a"},children:[A.price," TON"]}),e.jsx("button",{style:{marginLeft:16,padding:"6px 14px",borderRadius:4,background:"#ffe259",color:"#222",fontWeight:700,border:"none",cursor:"pointer"},onClick:()=>w(A),children:"Buy"})]})]},A.id))}),!c&&t.length===0&&e.jsx("div",{style:{textAlign:"center",color:"#888",marginTop:32},children:"No active listings."})]})},Tt="https://lisa-games.onrender.com";async function Mt(t,n,c){return fetch(`${Tt}/webhook/analytics`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:t,userId:n,referrerId:c})})}function Rt(){"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()}function Et(t,n){"Notification"in window&&Notification.permission==="granted"&&new Notification(t,n)}const _t="/assets/check-BK0B6DVF.png",Pt="/assets/fail-DfMFjEyK.png",we="/assets/list-DXF8oD-t.png",Lt=o.createContext({notify:()=>{}}),Dt=({children:t})=>{const[n,c]=o.useState(null),a=i=>{c(i),setTimeout(()=>c(null),i.duration||3e3)};return e.jsxs(Lt.Provider,{value:{notify:a},children:[t,n&&e.jsxs("div",{style:{position:"fixed",top:24,right:24,zIndex:9999,background:n.type==="success"?"#00b894":n.type==="error"?"#d63031":"#222",color:"#fff",padding:"12px 24px",borderRadius:8,boxShadow:"0 2px 16px #0004",fontWeight:700,fontSize:16,minWidth:180,textAlign:"center",animation:"popNotif 0.5s",display:"flex",alignItems:"center",gap:10},children:[n.type==="success"&&e.jsx("img",{src:_t,alt:"Success",style:{width:24,verticalAlign:"middle"}}),n.type==="error"&&e.jsx("img",{src:Pt,alt:"Error",style:{width:24,verticalAlign:"middle"}}),n.type==="info"&&e.jsx("img",{src:we,alt:"Info",style:{width:24,verticalAlign:"middle"}}),e.jsx("span",{children:n.message}),e.jsx("style",{children:`
            @keyframes popNotif {
              0% { transform: scale(0.8); opacity: 0.5; }
              60% { transform: scale(1.1); opacity: 1; }
              100% { transform: scale(1); opacity: 1; }
            }
          `})]})]})},Wt="_modalOverlay_1dkpo_1",Ut="_modalContent_1dkpo_14",Ot="_avatarGrid_1dkpo_24",zt="_avatarOption_1dkpo_31",Gt="_selected_1dkpo_36",Vt="_miningButtonWrapper_1dkpo_41",Ft="_miningButton_1dkpo_41",qt="_pressed_1dkpo_58",Kt="_coinGain_1dkpo_63",Ht="_topRow_1dkpo_96",Qt="_coinBalanceCenter_1dkpo_110",Yt="_passiveIncome_1dkpo_119",Jt="_energyBarContainer_1dkpo_135",Zt="_energyBar_1dkpo_135",Xt="_energyText_1dkpo_176",$t="_background_1dkpo_188",en="_menuModalOverlay_1dkpo_254",tn="_menuModal_1dkpo_254",nn="_menuModalTitle_1dkpo_279",sn="_menuModalList_1dkpo_285",an="_menuModalBtn_1dkpo_290",on="_app_1dkpo_325",rn="_countrySelection_1dkpo_329",ln="_menu_1dkpo_254",cn="_btn_1dkpo_370",dn="_coinBalance_1dkpo_110",un="_coinsPerTap_1dkpo_392",I={modalOverlay:Wt,modalContent:Ut,avatarGrid:Ot,avatarOption:zt,selected:Gt,miningButtonWrapper:Vt,miningButton:Ft,pressed:qt,coinGain:Kt,topRow:Ht,coinBalanceCenter:Qt,passiveIncome:Yt,energyBarContainer:Jt,energyBar:Zt,energyText:Xt,background:$t,menuModalOverlay:en,menuModal:tn,menuModalTitle:nn,menuModalList:sn,menuModalBtn:an,app:on,countrySelection:rn,menu:ln,btn:cn,coinBalance:dn,coinsPerTap:un},ke="users";async function fn(t){await M.from(ke).upsert([t],{onConflict:"userid"})}async function gn(t,n){await M.from(ke).update(n).eq("userid",t)}async function We(t){const{data:n}=await M.from(ke).select("*").eq("userid",t).single();return n||null}async function hn(){const{data:t}=await M.from(ke).select("*");return t||[]}async function pn(t){const{data:n}=await M.from("users").select("*").eq("referral_code",t).single();return n}async function Ge(t,n,c,a=1){await M.from("referrals").insert([{referrer_id:t,referred_id:n,parent_referral_id:c||null,referral_level:a}])}const mn=["Afghanistan","Albania","Algeria","Andorra","Angola","Antigua & Deps","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Rep","Chad","Chile","China","Colombia","Comoros","Congo","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea North","Korea South","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russian Federation","Rwanda","St Kitts & Nevis","St Lucia","Saint Vincent & the Grenadines","Samoa","San Marino","Sao Tome & Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad & Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"],yn="_leaderboard_1c6t9_1",xn="_top1_1c6t9_49",bn="_top2_1c6t9_57",vn="_top3_1c6t9_65",pe={leaderboard:yn,top1:xn,top2:bn,top3:vn},K="/assets/crown-D07N0x4g.png",de="/assets/trophy-fGOFSCFR.png",An=()=>{const[t,n]=o.useState([]),[c,a]=o.useState([]),[i,h]=o.useState("global"),[s,u]=o.useState(""),[p,g]=o.useState([]);return o.useEffect(()=>{let m=!0;const f=async()=>{var d;const l=await hn();if(l.sort((b,j)=>j.coins-b.coins),m){n(l);const b=localStorage.getItem("country")||(((d=l.find(r=>r.userid===localStorage.getItem("userId")))==null?void 0:d.country)??"");u(b);const j=JSON.parse(localStorage.getItem("friends")||"[]");g(j),a(l.slice(0,100))}};f();const y=setInterval(f,5e3);return()=>{m=!1,clearInterval(y)}},[]),o.useEffect(()=>{let m=t;i==="country"&&s?m=t.filter(f=>f.country===s):i==="friends"&&p.length>0&&(m=t.filter(f=>p.includes(f.userid))),a(m.slice(0,100))},[i,t,s,p]),e.jsxs("div",{className:pe.leaderboard,children:[e.jsx("h2",{children:"Leaderboard"}),e.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center",marginBottom:12},children:[e.jsx("button",{onClick:()=>h("global"),style:{fontWeight:i==="global"?700:400,background:i==="global"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Global"}),e.jsx("button",{onClick:()=>h("country"),style:{fontWeight:i==="country"?700:400,background:i==="country"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Country"}),e.jsx("button",{onClick:()=>h("friends"),style:{fontWeight:i==="friends"?700:400,background:i==="friends"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Friends"})]}),e.jsx("ul",{children:c.map((m,f)=>e.jsxs("li",{className:f===0?pe.top1:f===1?pe.top2:f===2?pe.top3:"",style:{"--i":f},children:[f===0&&e.jsx("img",{src:K,alt:"Crown",style:{width:24,marginRight:4,verticalAlign:"middle"}}),f===1&&e.jsx("img",{src:de,alt:"Trophy",style:{width:22,marginRight:4,verticalAlign:"middle"}}),f===2&&e.jsx("img",{src:de,alt:"Trophy",style:{width:20,marginRight:4,verticalAlign:"middle",filter:"grayscale(0.5)"}}),f+1,". ",m.userid," (",m.country,"): ",m.coins," coins"]},m.userid))})]})},re={};function jn(t){it()||(re[t]||(re[t]=new Audio(`/sounds/${t}.mp3`),re[t].volume=.5),re[t].currentTime=0,re[t].play())}function it(){return localStorage.getItem("muteSounds")==="1"}function Sn(t){localStorage.setItem("muteSounds",t?"1":"0")}const Ue="data:image/png;base64,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",wn="data:image/png;base64,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",Ce="data:image/png;base64,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",q="/assets/cdollar-BAHfZPNA.png",fe="/assets/earn-BNCIqzz0.png",Oe="/assets/airdrop-CxSwq6QT.png",oe="/assets/tg-n2id2ce2.png",kn="/assets/arcade_pacman_sprites-D1QHgfjt.png",Ie="/assets/axs-DhhIb20v.png",Ve=[{label:"Home",page:"coin",icon:Ue},{label:"Shop",page:"Shop",icon:ue},{label:"Trophies",page:"Trophies",icon:wn},{label:"Tasks",page:"Tasks",icon:Ce},{label:"Upgrades",page:"Upgrades",icon:q},{label:"Friends",page:"Friends",icon:we},{label:"Arcade",page:"Arcade",icon:fe},{label:"Airdrop",page:"Airdrop",icon:Oe},{label:"Leaderboard",page:"leaderboard",icon:K},{label:"Chat",page:"chat",icon:oe},{label:"Events",page:"events",icon:de},{label:"NFTs",page:"Marketplace",icon:kn},{label:"Analytics",page:"useranalytics",icon:Ie},{label:"Boosts",page:"Boosts",icon:De}],Cn=localStorage.getItem("userRole")==="admin",In=({onNavigate:t,extraItems:n})=>{const[c,a]=o.useState(it()),[i,h]=o.useState(!1),s=()=>{Sn(!c),a(!c)},u=()=>{h(m=>{const f=!m;return f?document.body.style.overflow="hidden":document.body.style.overflow="",f})},p=m=>{h(!1),document.body.style.overflow="",t(m)},g=n?[...Ve,...n]:Ve;return e.jsxs(e.Fragment,{children:[e.jsxs("nav",{className:I.menu,children:[e.jsx("button",{className:I.btn,onClick:u,type:"button","aria-label":"Open menu",style:{background:"#ffe259",color:"#222",fontWeight:700},children:"☰"}),e.jsx("button",{className:I.btn,onClick:s,type:"button","aria-label":c?"Unmute sounds":"Mute sounds",style:{background:c?"#eee":"#ffe259",color:"#222",fontWeight:700},children:c?"🔇":"🔊"}),Cn&&e.jsx("button",{className:I.btn,onClick:()=>p("AdminAnalytics"),type:"button",style:{background:"#ffe259",color:"#222",fontWeight:700},children:"Admin"})]}),i&&e.jsx("div",{className:I.menuModalOverlay,onClick:()=>{h(!1),document.body.style.overflow=""},children:e.jsxs("div",{className:I.menuModal,onClick:m=>m.stopPropagation(),children:[e.jsx("div",{className:I.menuModalTitle,children:"Menu"}),e.jsx("div",{className:I.menuModalList,children:g.map(m=>e.jsxs("button",{className:I.menuModalBtn,onClick:()=>p(m.page),type:"button",children:[m.icon&&e.jsx("img",{src:m.icon,alt:m.label,style:{height:22,width:22,marginRight:10,verticalAlign:"middle"}}),m.label]},m.page))})]})})]})},Nn="_shopContainer_qb01d_473",Bn="_shopAbsoluteLayout_qb01d_488",Tn="_shopItemAbsolute_qb01d_494",Mn="_shopBuyBtn_qb01d_622",Rn="_shopActions_qb01d_637",le={shopContainer:Nn,shopAbsoluteLayout:Bn,shopItemAbsolute:Tn,shopBuyBtn:Mn,shopActions:Rn};async function $(t,n,c){await xt({userid:t,event:n,details:c})}const Ne="UQC9Vgi5erLMGVOHit2dQ5C1dww3XTV0OAvWOm3XhgVaVUI_",Y="/assets/ewallet-BwdFUCtF.png",ve="/assets/turbo-i3NQ1NMb.png",Ae="/assets/button-BU5-t-rk.png",Fe=[{label:"1.2x Coin Mult",value:1.2,price:.3,icon:q,desc:"+20%/tap"},{label:"1.5x Coin Mult",value:1.5,price:.7,icon:q,desc:"+50%/tap"},{label:"2x Coin Mult",value:2,price:1.2,icon:q,desc:"2x/tap"},{label:"3x Coin Mult",value:3,price:2.5,icon:q,desc:"3x/tap"},{label:"5x Coin Mult",value:5,price:5,icon:q,desc:"5x/tap"},{label:"1.2x Energy Mult",value:1.2,price:.3,icon:Y,desc:"+20% energy"},{label:"1.5x Energy Mult",value:1.5,price:.7,icon:Y,desc:"+50% energy"},{label:"2x Energy Mult",value:2,price:1.2,icon:Y,desc:"2x energy"},{label:"3x Energy Mult",value:3,price:2.5,icon:Y,desc:"3x energy"},{label:"5x Energy Mult",value:5,price:5,icon:Y,desc:"5x energy"},{label:"Auto Clicker",desc:"Auto 1hr",price:.5,effect:"autoclicker",icon:ve},{label:"Energy Refill",desc:"Full energy",price:.4,effect:"refill",icon:Y},{label:"Golden Tap",desc:"+100/tap",price:2.5,effect:"goldentap",icon:Ae}],En=({onPurchase:t,purchased:n})=>{const[c,a]=o.useState(null),[i,h]=o.useState(null),[s]=je(),[u,p]=o.useState(null),g=async m=>{a(null),p(null),h(m.label);try{if(!s.account){p("Please connect your TON wallet before making a purchase."),h(null);return}await s.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ne,amount:(m.price*1e9).toString()}]}),a(`✅ Purchase successful: ${m.label}`),t(m);const f=localStorage.getItem("userId")||"unknown";await $(f,"shop_purchase",{item:m.label,price:m.price})}catch(f){let y="Transaction cancelled or failed.";typeof f=="object"&&f&&"message"in f&&typeof f.message=="string"&&(y+=`
${f.message}`),a(y)}h(null)};return e.jsxs("div",{className:le.shopContainer,children:[e.jsx("div",{className:le.shopAbsoluteLayout,style:{width:600,height:600,position:"relative",margin:"0 auto"},children:(()=>{const b=Fe.length,j=Array.from({length:b},(r,w)=>{let A=64;w===0?A=128:w===1?A=96:w===2?A=72:A+=16;let R=0;return w>=3&&(R=(w-2)*16),{x:224,y:-12+w*32-A+R,width:152,height:15}});return Fe.map((r,w)=>{const A=j[w]||{x:0,y:0,width:100,height:50};return e.jsxs("div",{className:le.shopItemAbsolute,style:{position:"absolute",left:A.x,top:A.y,width:A.width,height:A.height,boxSizing:"border-box",background:"none"},children:[e.jsx("img",{src:r.icon,alt:r.label,style:{width:24,height:24,marginRight:8}}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:700,color:"#000"},children:r.label}),e.jsx("div",{style:{fontSize:"0.85em",color:"#000"},children:r.desc})]}),e.jsxs("div",{style:{fontWeight:700,color:"#000",marginLeft:8},children:[r.price," TON"]}),e.jsx("button",{className:le.shopBuyBtn,onClick:()=>g(r),disabled:!!n[r.label]||i===r.label,children:i===r.label?"...":n[r.label]?"Owned":"Buy"})]},r.label)})})()}),e.jsx("div",{className:le.shopActions,children:e.jsx(Se,{})}),u&&e.jsx("div",{style:{color:"red",fontWeight:600,margin:"8px 0"},children:u}),c&&e.jsx("div",{style:{animation:c.startsWith("✅")?"popSuccess 0.5s":void 0},children:c}),e.jsx("style",{children:`
						@keyframes popSuccess {
							0% { transform: scale(0.8); opacity: 0.5; }
							60% { transform: scale(1.1); opacity: 1; }
							100% { transform: scale(1); opacity: 1; }
						}
					`})]})},_n=()=>{const[t,n]=o.useState([]),[c,a]=o.useState(!0),[i,h]=o.useState(""),[s,u]=o.useState(""),[p,g]=o.useState("");o.useEffect(()=>{a(!0),h(""),(async()=>{const{data:y,error:l}=await M.from("analytics_events").select("*").order("created_at",{ascending:!1}).limit(200);l?h(l.message):n(y||[]),a(!1)})()},[]);const m=t.filter(f=>(!s||f.userid===s)&&(!p||f.event===p));return e.jsxs("div",{style:{padding:24,background:"#222",color:"#fff",borderRadius:12,maxWidth:800,margin:"0 auto"},children:[e.jsx("h2",{children:"Analytics Events (Admin)"}),e.jsxs("div",{style:{marginBottom:12},children:[e.jsx("input",{placeholder:"Filter by User ID",value:s,onChange:f=>u(f.target.value),style:{marginRight:8,borderRadius:4,padding:4,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},"aria-label":"Filter by User ID",tabIndex:0,onFocus:f=>f.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:f=>f.currentTarget.style.boxShadow="0 0 0 2px #24308a33"}),e.jsx("input",{placeholder:"Filter by Event Type",value:p,onChange:f=>g(f.target.value),style:{borderRadius:4,padding:4,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},"aria-label":"Filter by Event Type",tabIndex:0,onFocus:f=>f.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:f=>f.currentTarget.style.boxShadow="0 0 0 2px #24308a33"})]}),c?e.jsx("div",{children:"Loading..."}):i?e.jsx("div",{style:{color:"#ff4d4f"},children:i}):e.jsxs("table",{style:{width:"100%",background:"#333",borderRadius:8},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#444"},children:[e.jsx("th",{style:{color:"#ffe259"},children:"Time"}),e.jsx("th",{style:{color:"#ffe259"},children:"User ID"}),e.jsx("th",{style:{color:"#ffe259"},children:"Event"}),e.jsx("th",{style:{color:"#ffe259"},children:"Details"})]})}),e.jsx("tbody",{children:m.map(f=>{var y;return e.jsxs("tr",{children:[e.jsx("td",{children:(y=f.created_at)==null?void 0:y.replace("T"," ").slice(0,19)}),e.jsx("td",{children:f.userid}),e.jsx("td",{children:f.event}),e.jsx("td",{children:e.jsx("pre",{style:{color:"#00ff99",fontSize:12,margin:0},children:JSON.stringify(f.details,null,2)})})]},f.created_at+f.userid+f.event)})})]})]})},Pn="_trophiesPage_1ws34_2",Ln="_trophiesTitle_1ws34_8",Dn="_trophyList_1ws34_12",Wn="_trophyCard_1ws34_17",Un="_trophyIcon_1ws34_22",On="_trophyName_1ws34_27",zn="_trophyDesc_1ws34_30",Gn="_trophyReward_1ws34_30",Vn="_earned_1ws34_73",Q={trophiesPage:Pn,trophiesTitle:Ln,trophyList:Dn,trophyCard:Wn,trophyIcon:Un,trophyName:On,trophyDesc:zn,trophyReward:Gn,earned:Vn},qe=[{key:"firstTap",name:"First Tap!",desc:"Earn your first coin.",icon:q,milestone:1,reward:100},{key:"hundredCoins",name:"Coin Collector",desc:"Reach 100 coins.",icon:fe,milestone:100,reward:500},{key:"thousandCoins",name:"Thousand Club",desc:"Reach 1,000 coins.",icon:Y,milestone:1e3,reward:2e3},{key:"tenKCoins",name:"10K Master",desc:"Reach 10,000 coins.",icon:ee,milestone:1e4,reward:1e4},{key:"fiftyKCoins",name:"50K Tycoon",desc:"Reach 50,000 coins.",icon:ve,milestone:5e4,reward:25e3},{key:"hundredKCoins",name:"100K Legend",desc:"Reach 100,000 coins.",icon:K,milestone:1e5,reward:5e4},{key:"millionCoins",name:"Millionaire",desc:"Reach 1,000,000 coins.",icon:Ae,milestone:1e6,reward:2e5},{key:"energyMax",name:"Energy Hoarder",desc:"Max out your energy.",icon:Ie,milestone:1e3,reward:1e4},{key:"shopper",name:"Shopper",desc:"Buy 5 shop items.",icon:ue,milestone:5,reward:15e3},{key:"allTrophies",name:"Trophy Champion",desc:"Unlock all trophies.",icon:Ce,milestone:10,reward:1e5}],Fn=({coinCount:t,energy:n,shopPurchases:c,earned:a,onEarn:i})=>{const h={firstTap:"First coin",hundredCoins:"100 coins",thousandCoins:"1K coins",tenKCoins:"10K coins",fiftyKCoins:"50K",hundredKCoins:"100K",millionCoins:"1M",energyMax:"Max energy",shopper:"5 buys",allTrophies:"All done"};return ne.useEffect(()=>{qe.forEach(s=>{if(!a[s.key]){let u=!1;s.key==="firstTap"&&t>=s.milestone&&(u=!0),s.key==="hundredCoins"&&t>=s.milestone&&(u=!0),s.key==="thousandCoins"&&t>=s.milestone&&(u=!0),s.key==="tenKCoins"&&t>=s.milestone&&(u=!0),s.key==="fiftyKCoins"&&t>=s.milestone&&(u=!0),s.key==="hundredKCoins"&&t>=s.milestone&&(u=!0),s.key==="millionCoins"&&t>=s.milestone&&(u=!0),s.key==="energyMax"&&n>=s.milestone&&(u=!0),s.key==="shopper"&&c>=s.milestone&&(u=!0),s.key==="allTrophies"&&Object.values(a).filter(Boolean).length>=9&&(u=!0),u&&i(s)}})},[t,n,c,a,i]),e.jsxs("div",{className:Q.trophiesPage,children:[e.jsx("div",{className:Q.trophiesTitle,children:"Trophies"}),e.jsx("div",{className:Q.trophyList,children:qe.map(s=>e.jsxs("div",{className:Q.trophyCard+(a[s.key]?" "+Q.earned:""),children:[e.jsx("img",{src:s.icon,alt:s.name,className:Q.trophyIcon}),e.jsx("div",{className:Q.trophyName,children:s.name}),e.jsx("div",{className:Q.trophyDesc,children:h[s.key]||s.desc}),e.jsxs("div",{className:Q.trophyReward,children:["+",s.reward]}),a[s.key]&&e.jsx("div",{style:{color:"#1bbf4c",fontWeight:700,fontSize:10},children:"Unlocked!"})]},s.key))})]})},qn="_tasksPage_1yqwy_2",Kn="_dailyCheckInBtn_1yqwy_8",Hn="_taskCard_1yqwy_14",Qn="_taskHeader_1yqwy_20",Yn="_taskTitle_1yqwy_23",Jn="_taskReward_1yqwy_26",Zn="_taskDesc_1yqwy_29",Xn="_taskLink_1yqwy_32",$n="_completeBtn_1yqwy_36",es="_dailyCheckInContainer_1yqwy_525",ts="_tasksTitle_1yqwy_556",ns="_tasksList_1yqwy_564",ss="_completed_1yqwy_596",as="_taskActions_1yqwy_629",L={tasksPage:qn,dailyCheckInBtn:Kn,taskCard:Hn,taskHeader:Qn,taskTitle:Yn,taskReward:Jn,taskDesc:Zn,taskLink:Xn,completeBtn:$n,dailyCheckInContainer:es,tasksTitle:ts,tasksList:ns,completed:ss,taskActions:as},os="/assets/twitter-Cxj2oo1j.png",is="/assets/friends-CUSeA5LR.png",rs=[{id:1,title:"Follow on X",desc:"Follow us on X.",reward:5e5,link:"https://x.com/",icon:os},{id:2,title:"Instagram",desc:"Like & follow.",reward:5e5,link:"https://instagram.com/",icon:ee},{id:3,title:"Play TG Game",desc:"Play our game.",reward:75e4,link:"https://t.me/LisaToken_bot?game=Lisa",icon:Ue},{id:4,title:"Join Channel",desc:"Join Telegram.",reward:5e5,link:"https://t.me/LisaToken_bot?game=Lisa",icon:oe},{id:5,title:"Invite Friend",desc:"Invite a friend.",reward:1e6,link:"",icon:is}],ls=({tasks:t})=>{const[n,c]=o.useState({}),[a,i]=o.useState(!1),[h,s]=o.useState(!1),[u,p]=o.useState("idle"),[g,m]=o.useState(""),[f]=je(),y=Le(),[l,d]=o.useState(0),[b,j]=o.useState(null),[r,w]=o.useState(0),A=7;o.useEffect(()=>{const k=parseInt(localStorage.getItem("dailyStreak")||"0",10),x=parseInt(localStorage.getItem("lastCheckIn")||"0",10),E=parseInt(localStorage.getItem("weeklyProgress")||"0",10);d(k),j(x||null),w(E)},[]);const R=async()=>{s(!0),p("idle"),m("");try{await f.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ne,amount:(.5*1e9).toString()}]}),i(!0),p("success"),m("✅ Daily check-in successful! +1,000,000 coins awarded.");const x=Math.floor(new Date().getTime()/(1e3*60*60*24));let E=l;b&&x-b===1?E=l+1:(!b||x-b>1)&&(E=1),d(E),j(x),localStorage.setItem("dailyStreak",E.toString()),localStorage.setItem("lastCheckIn",x.toString());let _=r+1;_>A&&(_=1),w(_),localStorage.setItem("weeklyProgress",_.toString());const O=localStorage.getItem("userId")||"unknown";await $(O,"daily_checkin",{amountTon:.5,reward:1e6})}catch(k){let x="Transaction cancelled or failed.";typeof k=="object"&&k&&"message"in k&&typeof k.message=="string"&&(x+=`
${k.message}`),p("error"),m(x)}s(!1)},P=k=>{c(x=>({...x,[k]:!0}))},D=t??rs;return e.jsxs("div",{className:L.tasksPage,children:[e.jsxs("div",{className:L.dailyCheckInContainer,children:[e.jsx("div",{style:{color:"#000",fontWeight:600,marginBottom:4},children:"Daily Check-In"}),e.jsxs("div",{style:{fontSize:13,color:"#888",marginBottom:4},children:[e.jsx("b",{children:"Streak:"})," ",l," days"]}),e.jsxs("div",{style:{fontSize:13,color:"#888",marginBottom:8},children:[e.jsx("b",{children:"Weekly Quest:"})," ",r," / ",A," check-ins",r===A&&e.jsx("span",{style:{color:"#1bbf4c",fontWeight:700,marginLeft:8},children:"🎉 Weekly Reward!"})]}),y?e.jsx("button",{className:L.dailyCheckInBtn,onClick:R,disabled:a||h,children:h?"Processing...":a?"Checked In Today":"Daily Check-In (0.5 TON → 1,000,000 coins)"}):e.jsx(Se,{}),g&&e.jsx("div",{style:{marginTop:8,color:u==="success"?"#00b894":u==="error"?"#d63031":"#222",fontWeight:600,minHeight:20,animation:u==="success"?"popSuccess 0.5s":u==="error"?"popError 0.5s":void 0,transition:"color 0.2s"},children:g}),e.jsx("style",{children:`
							@keyframes popSuccess {
								0% { transform: scale(1); }
								50% { transform: scale(1.15); }
								100% { transform: scale(1); }
							}
							@keyframes popError {
								0% { transform: scale(1); }
								50% { transform: scale(1.1); }
								100% { transform: scale(1); }
							}
						`})]}),e.jsx("div",{className:L.tasksTitle,children:"Telegram & Social Tasks"}),e.jsx("div",{className:L.tasksList,children:D.map(k=>e.jsxs("div",{className:L.taskCard+(n[k.id]?" "+L.completed:""),children:[e.jsxs("div",{className:L.taskHeader,children:[k.icon&&e.jsx("img",{src:k.icon,alt:k.title,style:{width:22,marginRight:6,verticalAlign:"middle"}}),e.jsx("span",{className:L.taskTitle,children:k.title}),e.jsxs("span",{className:L.taskReward,children:["+",k.reward.toLocaleString()," coins"]})]}),e.jsx("div",{className:L.taskDesc,children:k.desc}),e.jsxs("div",{className:L.taskActions,children:[k.link&&e.jsx("a",{href:k.link,target:"_blank",rel:"noopener noreferrer",className:L.taskLink,children:"Go"}),e.jsx("button",{className:L.completeBtn,onClick:()=>P(k.id),disabled:n[k.id],"aria-label":n[k.id]?`Task ${k.title} completed`:`Mark task ${k.title} as done`,tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&P(k.id)},onFocus:x=>x.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:x=>x.currentTarget.style.boxShadow="none",children:n[k.id]?"Completed":"Mark as Done"})]})]},k.id))})]})},cs="_upgradesPage_iq4s3_2",ds="_upgradeGrid_iq4s3_8",us="_upgradeCard_iq4s3_12",fs="_icon_iq4s3_17",gs="_title_iq4s3_22",hs="_desc_iq4s3_25",ps="_level_iq4s3_28",ms="_value_iq4s3_28",ys="_price_iq4s3_28",xs="_buyBtn_iq4s3_31",F={upgradesPage:cs,upgradeGrid:ds,upgradeCard:us,icon:fs,title:gs,desc:hs,level:ps,value:ms,price:ys,buyBtn:xs},bs=[{key:"coinPerTap",name:"Coin Per Tap",desc:"+Coins/tap",baseValue:2,basePrice:400,icon:q},{key:"passiveIncome",name:"Passive Income",desc:"+Coins/hr",baseValue:100,basePrice:500,icon:fe},{key:"energy",name:"Energy",desc:"+Max energy",baseValue:100,basePrice:300,icon:Y},{key:"hungerDrive",name:"Hunger Drive",desc:"+Passive/hr",baseValue:500,basePrice:500,icon:ee},{key:"energyRegen",name:"Energy Regen",desc:"+Energy regen",baseValue:1,basePrice:350,icon:ve},{key:"tapStreak",name:"Tap Streak",desc:"Streak bonus",baseValue:10,basePrice:600,icon:K},{key:"criticalTap",name:"Critical Tap",desc:"Crit chance",baseValue:1,basePrice:700,icon:Ae},{key:"autoMiner",name:"Auto Miner",desc:"Auto/hr",baseValue:50,basePrice:800,icon:ve},{key:"energySaver",name:"Energy Saver",desc:"-Energy/tap",baseValue:1,basePrice:900,icon:Ie},{key:"magnet",name:"Coin Magnet",desc:"Bonus/hr",baseValue:100,basePrice:1e3,icon:ue},{key:"ultraBoost",name:"Ultra Boost",desc:"x2 1hr",baseValue:1,basePrice:2e3,icon:Ce},{key:"goldenTouch",name:"Golden Touch",desc:"+10/tap",baseValue:10,basePrice:2500,icon:Ae}],me=5e3,vs=({upgrades:t,coins:n,onPurchase:c})=>e.jsxs("div",{className:F.upgradesPage,children:[e.jsx("h2",{children:"Upgrades"}),e.jsx("div",{className:F.upgradeGrid,children:bs.map(a=>{const i=t[a.key]||0,h=a.basePrice*Math.pow(2,i),s=a.baseValue*Math.pow(2,i);return e.jsxs("div",{className:F.upgradeCard,children:[e.jsx("img",{src:a.icon,alt:a.name,className:F.icon}),e.jsx("div",{className:F.title,children:a.name}),e.jsx("div",{className:F.desc,children:a.desc}),e.jsxs("div",{className:F.level,children:["Level: ",i]}),e.jsxs("div",{className:F.value,children:["Value: +",s]}),e.jsxs("div",{className:F.price,children:["Price: ",h," coins"]}),e.jsx("button",{className:F.buyBtn,disabled:n<h||i>=me,onClick:()=>c(a.key),"aria-label":i>=me?`${a.name} maxed out`:`Upgrade ${a.name} for ${h} coins`,tabIndex:0,onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&!(n<h||i>=me)&&c(a.key)},onFocus:u=>u.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:u=>u.currentTarget.style.boxShadow="none",children:i>=me?"Maxed":"Upgrade"})]},a.key)})})]}),As=({friends:t=[]})=>{const[n,c]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("friends")||"[]")}catch{return t}}),[a,i]=o.useState(""),[h,s]=o.useState(""),[u,p]=o.useState(""),[g,m]=o.useState(null),[f,y]=o.useState(""),[l,d]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("chatHistory")||"{}")}catch{return{}}}),[b,j]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("guild")||"null")}catch{return null}}),[r,w]=o.useState("");o.useEffect(()=>{localStorage.setItem("friends",JSON.stringify(n))},[n]),o.useEffect(()=>{b&&localStorage.setItem("guild",JSON.stringify(b))},[b]),o.useEffect(()=>{localStorage.setItem("chatHistory",JSON.stringify(l))},[l]);const A=()=>{if(!a||!h){p("Enter both user ID and name.");return}if(n.some(x=>x.id===a)){p("Already added.");return}c(x=>[...x,{id:a,name:h}]),i(""),s(""),p("Friend added!"),setTimeout(()=>p(""),1200)},R=x=>{m(x)},P=()=>{if(!g||!f.trim())return;const E={sender:localStorage.getItem("userId")||"You",text:f,timestamp:Date.now()};d(_=>({..._,[g.id]:[..._[g.id]||[],E]})),y("")},D=()=>{if(!r.trim())return;const x=localStorage.getItem("userId")||"You",E=localStorage.getItem("userName")||"You";j({name:r.trim(),members:[{id:x,name:E}]}),w("")},k=()=>{if(!r.trim())return;const x=localStorage.getItem("userId")||"You",E=localStorage.getItem("userName")||"You";let _=null;try{_=JSON.parse(localStorage.getItem("guild")||"null")}catch{_=null}_&&_.name===r.trim()?(_.members.some(O=>O.id===x)||_.members.push({id:x,name:E}),j({..._})):j({name:r.trim(),members:[{id:x,name:E}]}),w("")};return e.jsxs("div",{style:{maxWidth:340,margin:"20px auto",padding:12,background:"linear-gradient(135deg, #f8fafc 0%, #e0e7ff 100%)",borderRadius:12,boxShadow:"0 2px 12px #24308a11"},children:[e.jsxs("div",{style:{margin:"18px 0",padding:10,background:"#f0f7ff",borderRadius:8,boxShadow:"0 1px 4px #24308a10"},children:[e.jsx("div",{style:{fontWeight:700,fontSize:13,marginBottom:6},children:"Guild / Team"}),b?e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:11,marginBottom:4},children:[e.jsx("b",{children:"Guild:"})," ",b.name]}),e.jsx("div",{style:{fontSize:10,marginBottom:4},children:e.jsx("b",{children:"Members:"})}),e.jsx("ul",{style:{fontSize:10,margin:0,padding:0,listStyle:"none"},children:b.members.map((x,E)=>e.jsxs("li",{style:{marginBottom:2},children:[x.name," ",e.jsxs("span",{style:{color:"#888",fontSize:9},children:["(",x.id,")"]})]},x.id+E))})]}):e.jsxs("div",{style:{display:"flex",gap:4,alignItems:"center"},children:[e.jsx("input",{value:r,onChange:x=>w(x.target.value),placeholder:"Guild name",style:{fontSize:10,borderRadius:4,padding:2,width:90}}),e.jsx("button",{onClick:D,style:{fontSize:10,borderRadius:4,padding:"2px 8px",background:"#ffe259",fontWeight:700},children:"Create"}),e.jsx("button",{onClick:k,style:{fontSize:10,borderRadius:4,padding:"2px 8px",background:"#b8e259",fontWeight:700},children:"Join"})]})]}),e.jsx("div",{style:{fontSize:12,fontWeight:700,marginBottom:6},children:"Your Friends"}),e.jsxs("div",{style:{marginBottom:10},children:[e.jsx("input",{value:a,onChange:x=>i(x.target.value),placeholder:"User ID",style:{fontSize:10,borderRadius:4,padding:2,marginRight:4,width:70}}),e.jsx("input",{value:h,onChange:x=>s(x.target.value),placeholder:"Name",style:{fontSize:10,borderRadius:4,padding:2,marginRight:4,width:70}}),e.jsx("button",{onClick:A,style:{fontSize:10,borderRadius:4,padding:"2px 8px",background:"#ffe259",fontWeight:700},children:"Add Friend"}),u&&e.jsx("span",{style:{fontSize:10,color:"#1bbf4c",marginLeft:8},children:u})]}),e.jsxs("ul",{style:{listStyle:"none",padding:0,margin:0},children:[n.length===0&&e.jsx("li",{style:{fontSize:10,color:"#888"},children:"No friends yet. Invite some!"}),n.map(x=>e.jsx("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:6,background:(g==null?void 0:g.id)===x.id?"#e6f7ff":"#fff",borderRadius:6,padding:"4px 8px",boxShadow:"0 1px 2px #24308a08",fontSize:10,cursor:"pointer"},children:e.jsxs("span",{style:{flex:1},onClick:()=>R(x),children:[x.name," ",e.jsxs("span",{style:{color:"#888",fontSize:9},children:["(",x.id,")"]})]})},x.id))]}),g&&e.jsxs("div",{style:{marginTop:16,background:"#f7faff",borderRadius:8,padding:10,boxShadow:"0 1px 4px #24308a10"},children:[e.jsxs("div",{style:{fontWeight:700,fontSize:12,marginBottom:6},children:["Chat with ",g.name,e.jsx("button",{style:{float:"right",fontSize:10,border:"none",background:"none",color:"#888",cursor:"pointer"},onClick:()=>m(null),children:"×"})]}),e.jsxs("div",{style:{maxHeight:120,overflowY:"auto",background:"#fff",borderRadius:6,padding:6,marginBottom:8,fontSize:10},children:[(l[g.id]||[]).length===0&&e.jsx("div",{style:{color:"#aaa"},children:"No messages yet."}),(l[g.id]||[]).map((x,E)=>e.jsxs("div",{style:{marginBottom:4,textAlign:x.sender===(localStorage.getItem("userId")||"You")?"right":"left"},children:[e.jsxs("span",{style:{background:x.sender===(localStorage.getItem("userId")||"You")?"#e6f7ff":"#ffe259",borderRadius:4,padding:"2px 6px",display:"inline-block"},children:[e.jsxs("b",{children:[x.sender===(localStorage.getItem("userId")||"You")?"You":g.name,":"]})," ",x.text.startsWith(":sticker:")?e.jsx("img",{src:x.text.replace(":sticker:",""),alt:"sticker",style:{height:24,verticalAlign:"middle"}}):x.text]}),e.jsx("span",{style:{color:"#bbb",fontSize:8,marginLeft:4},children:new Date(x.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},E))]}),e.jsxs("div",{style:{display:"flex",gap:4,marginBottom:4},children:[e.jsx("div",{style:{display:"flex",gap:2},children:["😀","😂","😍","😎","🥳","😇","😜","🤩","😭","🔥","💎","🎉"].map(x=>e.jsx("button",{style:{fontSize:14,border:"none",background:"none",cursor:"pointer"},onClick:()=>y(f+x),children:x},x))}),e.jsxs("div",{style:{display:"flex",gap:2,marginLeft:8},children:[e.jsx("button",{style:{border:"none",background:"none",cursor:"pointer"},onClick:()=>y(":sticker:"+ee),children:e.jsx("img",{src:ee,alt:"gift",style:{height:22}})}),e.jsx("button",{style:{border:"none",background:"none",cursor:"pointer"},onClick:()=>y(":sticker:"+K),children:e.jsx("img",{src:K,alt:"crown",style:{height:22}})}),e.jsx("button",{style:{border:"none",background:"none",cursor:"pointer"},onClick:()=>y(":sticker:"+oe),children:e.jsx("img",{src:oe,alt:"tg",style:{height:22}})})]})]}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("input",{value:f,onChange:x=>y(x.target.value),onKeyDown:x=>{x.key==="Enter"&&P()},placeholder:"Type a message...",style:{flex:1,fontSize:10,borderRadius:4,padding:4}}),e.jsx("button",{onClick:P,style:{fontSize:10,borderRadius:4,padding:"2px 10px",background:"#ffe259",fontWeight:700},children:"Send"})]})]})]})};async function rt(t,n,c){const{data:a,error:i}=await M.storage.from(t).upload(n,c,{cacheControl:"3600",upsert:!0});return{data:a,error:i}}function js(t,n){const{data:c}=M.storage.from(t).getPublicUrl(n);return c.publicUrl}const Ss=["/vite.svg","/assets/crown.png","/assets/tg.png","/assets/arcade_pacman_sprites.png","/assets/gift.png","/assets/axs.png"],ws=({isOpen:t,onClose:n,onAvatarChange:c})=>{const a=o.useRef(null),[i,h]=o.useState(null),s=async g=>{var f;const m=(f=g.target.files)==null?void 0:f[0];if(m){const y=localStorage.getItem("userId")||"anon",l=m.name.split(".").pop()||"png",d=`avatars/${y}_${Date.now()}.${l}`,{error:b}=await rt("avatars",d,m);if(b)alert("Failed to upload avatar.");else{const j=js("avatars",d);h(j)}}},u=g=>{h(g)},p=()=>{i&&(c(i),n())};return t?e.jsx("div",{className:I.modalOverlay,children:e.jsxs("div",{className:I.modalContent,children:[e.jsx("h3",{children:"Select or Upload Avatar"}),e.jsx("div",{className:I.avatarGrid,children:Ss.map(g=>e.jsx("img",{src:g,alt:"avatar",className:I.avatarOption+(i===g?" "+I.selected:""),onClick:()=>u(g),style:{width:56,height:56,borderRadius:"50%",margin:8,cursor:"pointer",border:i===g?"2px solid #ffe259":"2px solid #eee"}},g))}),e.jsx("input",{type:"file",accept:"image/*",ref:a,onChange:s,style:{margin:"12px 0"}}),i&&e.jsx("img",{src:i,alt:"Selected avatar",style:{width:64,height:64,borderRadius:"50%",margin:8}}),e.jsxs("div",{style:{marginTop:12},children:[e.jsx("button",{onClick:p,style:{background:"#ffe259",borderRadius:6,padding:"6px 18px",fontWeight:700,marginRight:8},children:"Save"}),e.jsx("button",{onClick:n,style:{background:"#eee",borderRadius:6,padding:"6px 18px",fontWeight:700},children:"Cancel"})]})]})}):null},Ke=[{src:"/vite.svg",label:"Default"},{src:oe,label:"Telegram",link:"https://t.me/LisaToken_bot?game=Lisa"},{src:K,label:"Crown"},{src:ee,label:"Gift"},{src:Ie,label:"AXS"},{src:Oe,label:"Airdrop"}],He=[{label:"Early Bird",icon:K},{label:"Top Referrer",icon:oe},{label:"Arcade Champ",icon:de},{label:"Airdrop Winner",icon:Oe}],ks=({userId:t})=>{var j;const[n,c]=o.useState(null),[a,i]=o.useState(!0),[h,s]=o.useState(!1),[u,p]=o.useState(""),[g,m]=o.useState(""),[f,y]=o.useState([]),[l,d]=o.useState(!1);o.useEffect(()=>{We(t).then(r=>{c(r),p((r==null?void 0:r.nickname)||""),m((r==null?void 0:r.avatar_url)||Ke[0].src),y((r==null?void 0:r.badges)||[]),i(!1)})},[t]);const b=async()=>{i(!0),await gn(t,{nickname:u,avatar_url:g,badges:f}),s(!1),i(!1)};return a?e.jsx("div",{children:"Loading profile..."}):n?e.jsxs("div",{style:{maxWidth:340,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h2",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Your Profile"}),e.jsxs("div",{style:{textAlign:"center",marginBottom:12},children:[e.jsx("img",{src:g,alt:"avatar",style:{width:64,height:64,borderRadius:"50%",border:"2px solid #ffe259"}}),e.jsx("button",{onClick:()=>d(!0),style:{marginTop:8,background:"#ffe259",borderRadius:6,padding:"4px 14px",fontWeight:700},children:"Change Avatar"})]}),e.jsx(ws,{isOpen:l,onClose:()=>d(!1),onAvatarChange:r=>m(r)}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:6,marginBottom:10},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:14},children:[e.jsx("img",{src:ue,alt:"Coins",style:{width:18,verticalAlign:"middle"}}),e.jsx("b",{children:"Coins:"})," ",e.jsx("span",{style:{color:"#b88a00",fontWeight:700},children:((j=n.coins)==null?void 0:j.toLocaleString())??0})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:13},children:[e.jsx("b",{children:"Country:"})," ",e.jsx("span",{children:n.country||"(unknown)"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,fontSize:12,color:"#888"},children:[e.jsx("b",{children:"User ID:"})," ",e.jsx("span",{style:{fontFamily:"monospace"},children:n.userid})]})]}),h?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{marginBottom:8},children:e.jsxs("label",{children:["Nickname: ",e.jsx("input",{value:u,onChange:r=>p(r.target.value),style:{borderRadius:4,padding:4}})]})}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("label",{children:"Avatar: "}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:4},children:Ke.map(r=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},onClick:()=>m(r.src),children:[e.jsx("img",{src:r.src,alt:r.label,style:{width:38,height:38,borderRadius:"50%",border:g===r.src?"2px solid #24308a":"2px solid #ffe259",marginBottom:2,background:"#fff"}}),e.jsx("span",{style:{fontSize:10},children:r.label})]},r.src))})]}),e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("label",{children:"Badges: "}),e.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginTop:4},children:He.map(r=>e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:4},children:[e.jsx("input",{type:"checkbox",checked:f.includes(r.label),onChange:w=>{w.target.checked?y([...f,r.label]):y(f.filter(A=>A!==r.label))}}),e.jsx("img",{src:r.icon,alt:r.label,style:{width:16,verticalAlign:"middle"}}),e.jsx("span",{style:{fontSize:11},children:r.label})]},r.label))})]}),e.jsx("button",{onClick:b,style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Save"}),e.jsx("button",{onClick:()=>s(!1),style:{marginLeft:8,borderRadius:6,padding:"4px 16px"},children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:8},children:[e.jsx("b",{children:"Nickname:"})," ",n.nickname||"(none)"]}),e.jsxs("div",{style:{marginBottom:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("b",{children:"Badges:"})," ",n.badges&&n.badges.length?n.badges.map(r=>{const w=He.find(A=>A.label===r);return w?e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:2,background:"#fffbe6",borderRadius:4,padding:"2px 6px",fontSize:11,border:"1px solid #ffe259"},children:[e.jsx("img",{src:w.icon,alt:w.label,style:{width:14,verticalAlign:"middle"}}),w.label]},r):r}):e.jsx("span",{style:{fontSize:11},children:"(none)"})]}),e.jsx("button",{onClick:()=>s(!0),style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Edit Profile"})]})]}):e.jsx("div",{children:"Profile not found."})};async function Qe(t=50,n="chat"){const{data:c}=await M.from("messages").select("*").eq("type",n).order("created_at",{ascending:!1}).limit(t);return c||[]}const Cs=({userId:t})=>{const[n,c]=o.useState([]),[a,i]=o.useState(""),[h,s]=o.useState(!0),[u,p]=o.useState(!1),[g,m]=o.useState({}),f=o.useRef(null);o.useEffect(()=>{const l=async()=>{s(!0);const b=await Qe(50,"chat");c(b.reverse()),s(!1);const j=Array.from(new Set(b.map(w=>w.userid))),r={};await Promise.all(j.map(async w=>{const A=await We(w);A&&(r[w]={nickname:A.nickname,avatar_url:A.avatar_url})})),m(r)};l();const d=setInterval(l,4e3);return()=>clearInterval(d)},[]),o.useEffect(()=>{var l;(l=f.current)==null||l.scrollIntoView({behavior:"smooth"})},[n]);const y=async()=>{if(!a.trim())return;p(!0),await jt({userId:t,message:a.trim()}),i(""),p(!1);const l=await Qe(50,"chat");c(l.reverse())};return e.jsxs("div",{style:{maxWidth:400,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:12,boxShadow:"0 2px 8px #24308a11",display:"flex",flexDirection:"column",height:420},children:[e.jsxs("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:8,display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:we,alt:"Chat",style:{width:22,verticalAlign:"middle"}}),"Community Chat"]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",marginBottom:8,background:"#fff",borderRadius:8,padding:8,border:"1px solid #eee"},children:[h?e.jsx("div",{children:"Loading..."}):n.length===0?e.jsx("div",{style:{color:"#888"},children:"No messages yet."}):n.map(l=>{var d,b,j;return e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:6},children:[e.jsx("img",{src:((d=g[l.userid])==null?void 0:d.avatar_url)||"/vite.svg",alt:"avatar",style:{width:28,height:28,borderRadius:"50%",marginRight:8,border:"1px solid #ffe259"}}),e.jsxs("div",{children:[e.jsx("span",{style:{fontWeight:700,color:"#24308a",fontSize:12},children:((b=g[l.userid])==null?void 0:b.nickname)||l.userid}),e.jsx("span",{style:{color:"#888",fontSize:10,marginLeft:8},children:(j=l.created_at)==null?void 0:j.slice(11,16)}),e.jsx("div",{style:{fontSize:13},children:l.content})]})]},l.id)}),e.jsx("div",{ref:f})]}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsx("input",{value:a,onChange:l=>i(l.target.value),onKeyDown:l=>{l.key==="Enter"&&y()},placeholder:"Type a message...",style:{flex:1,borderRadius:6,padding:6,border:"1px solid #ffe259"},disabled:u}),e.jsx("button",{onClick:y,disabled:u||!a.trim(),style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Send"})]})]})};async function Is(t=new Date().toISOString()){const{data:n}=await M.from("events").select("*").lte("start_time",t).gte("end_time",t).order("start_time",{ascending:!0});return n||[]}async function Ns(t,n){await M.from("event_participants").upsert([{event_id:t,userid:n}],{onConflict:"event_id,userid"})}const Bs=({userId:t})=>{const[n,c]=o.useState([]),[a,i]=o.useState(!0),[h,s]=o.useState({});o.useEffect(()=>{Is().then(p=>{c(p),i(!1)})},[]);const u=async p=>{await Ns(p,t),s(g=>({...g,[p]:!0}))};return e.jsxs("div",{style:{maxWidth:400,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Seasonal Events & Challenges"}),a?e.jsx("div",{children:"Loading events..."}):n.length===0?e.jsx("div",{style:{color:"#888"},children:"No active events right now."}):n.map(p=>{var g;return e.jsxs("div",{style:{background:"#fff",borderRadius:8,marginBottom:12,padding:12,boxShadow:"0 1px 4px #24308a08"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("img",{src:de,alt:"Trophy",style:{width:22,verticalAlign:"middle"}}),e.jsx("span",{style:{fontWeight:700,color:"#b88a00",fontSize:15},children:p.name})]}),e.jsx("div",{style:{fontSize:12,marginBottom:6},children:p.description}),e.jsxs("div",{style:{fontSize:11,color:"#888",marginBottom:6,display:"flex",alignItems:"center",gap:4},children:[e.jsx("img",{src:we,alt:"End",style:{width:14,verticalAlign:"middle"}}),"Ends: ",(g=p.end_time)==null?void 0:g.slice(0,16).replace("T"," ")]}),h[p.id]?e.jsx("span",{style:{color:"#24308a",fontWeight:700},children:"In Progress"}):e.jsx("button",{onClick:()=>u(p.id),style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700},children:"Join"})]},p.id)})]})},lt=({userId:t})=>{const[n,c]=o.useState([]),[a,i]=o.useState(!0),[h,s]=o.useState(!1),[u,p]=o.useState(""),[g,m]=o.useState(""),[f,y]=o.useState(""),[l,d]=o.useState(null),b=o.useRef(null);o.useEffect(()=>{It(t).then(r=>{c(r),i(!1)})},[t,h]);const j=async()=>{if(!(!u||!g&&!l)){if(s(!0),l){const r=l.name.split(".").pop()||"png",w=`nfts/${t}_${Date.now()}.${r}`,{error:A}=await rt("nfts",w,l);if(A){alert("Failed to upload NFT image."),s(!1);return}}await St({userId:t,nftType:u}),p(""),m(""),y(""),d(null),b.current&&(b.current.value=""),s(!1)}};return e.jsxs("div",{style:{maxWidth:400,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Your NFTs"}),a?e.jsx("div",{children:"Loading NFTs..."}):n.length===0?e.jsx("div",{style:{color:"#888"},children:"No NFTs yet."}):e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:12},children:n.map(r=>e.jsxs("div",{style:{background:"#fff",borderRadius:8,padding:8,width:120,boxShadow:"0 1px 4px #24308a08"},children:[e.jsx("img",{src:r.image_url,alt:r.name,style:{width:100,height:100,borderRadius:8,objectFit:"cover",marginBottom:4}}),e.jsx("div",{style:{fontWeight:700,fontSize:13},children:r.name}),e.jsx("div",{style:{fontSize:11,color:"#888"},children:r.description})]},r.nft_id))}),e.jsxs("div",{style:{marginTop:16,borderTop:"1px solid #eee",paddingTop:12},children:[e.jsx("h4",{style:{fontSize:14,color:"#24308a",marginBottom:6},children:"Mint New NFT"}),e.jsx("input",{value:u,onChange:r=>p(r.target.value),placeholder:"Name",style:{borderRadius:4,padding:4,marginBottom:4,width:"100%"}}),e.jsx("input",{value:g,onChange:r=>m(r.target.value),placeholder:"Image URL (or upload below)",style:{borderRadius:4,padding:4,marginBottom:4,width:"100%"}}),e.jsx("input",{type:"file",accept:"image/*",ref:b,onChange:r=>{var w;return d(((w=r.target.files)==null?void 0:w[0])||null)},style:{marginBottom:4,width:"100%"}}),e.jsx("input",{value:f,onChange:r=>y(r.target.value),placeholder:"Description",style:{borderRadius:4,padding:4,marginBottom:4,width:"100%"}}),e.jsx("button",{onClick:j,disabled:h||!u||!g&&!l,style:{background:"#ffe259",borderRadius:6,padding:"4px 16px",fontWeight:700,width:"100%"},children:"Mint NFT"})]})]})};async function Ts(t){const{data:n}=await M.from("analytics_events").select("details").eq("userid",t).eq("event","coin_earned"),c=(n==null?void 0:n.reduce((u,p)=>{var g;return u+(((g=p.details)==null?void 0:g.amount)||0)},0))||0,{count:a}=await M.from("arcade_scores").select("id",{count:"exact",head:!0}).eq("userid",t),{count:i}=await M.from("referrals").select("id",{count:"exact",head:!0}).eq("referrer_id",t),{count:h}=await M.from("achievements").select("id",{count:"exact",head:!0}).eq("userid",t).eq("completed",!0),{count:s}=await M.from("nfts").select("id",{count:"exact",head:!0}).eq("userid",t);return{totalCoins:c,gamesPlayed:a||0,referrals:i||0,achievements:h||0,nfts:s||0}}const Ms=({userId:t})=>{const[n,c]=o.useState(null),[a,i]=o.useState(!0);return o.useEffect(()=>{Ts(t).then(h=>{c(h),i(!1)})},[t]),a?e.jsx("div",{children:"Loading analytics..."}):n?e.jsxs("div",{style:{maxWidth:340,margin:"24px auto",background:"#f8fafc",borderRadius:12,padding:16,boxShadow:"0 2px 8px #24308a11"},children:[e.jsx("h3",{style:{color:"#24308a",fontWeight:800,fontSize:16,marginBottom:12},children:"Your Analytics"}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Total Coins Earned:"})," ",n.totalCoins.toLocaleString()]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Games Played:"})," ",n.gamesPlayed]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Referrals:"})," ",n.referrals]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"Achievements:"})," ",n.achievements]}),e.jsxs("div",{style:{fontSize:14,marginBottom:8},children:[e.jsx("b",{children:"NFTs Owned:"})," ",n.nfts]})]}):e.jsx("div",{children:"No analytics found."})},Rs="/assets/dollar-BVwGV8h8.png",Es="/assets/mining-C0IUERmY.png",_s=[{key:"doubleCoins",name:"Double Coins",description:"Doubles all coins earned for 1 hour.",price:1e3,duration:60*60*1e3,icon:Rs},{key:"energyRefill",name:"Energy Refill",description:"Instantly refill your energy to max.",price:500,duration:0,icon:Y},{key:"autoMiner",name:"Auto Miner",description:"Automatically mines coins for 1 hour.",price:2e3,duration:60*60*1e3,icon:Es},{key:"passiveBoost",name:"Passive Boost",description:"Doubles passive income for 1 hour.",price:1500,duration:60*60*1e3,icon:fe}],Ps=({coinCount:t=0,onPurchase:n,activeBoosts:c={}})=>{const[a,i]=o.useState(c),h=s=>{if(t<s.price){alert("Not enough coins!");return}i(u=>({...u,[s.key]:Date.now()+s.duration})),n&&n(s.key)};return e.jsxs("div",{className:I.centerContent,children:[e.jsx("h2",{children:"Boosts"}),e.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:24},children:_s.map(s=>e.jsxs("div",{style:{border:"1px solid #ccc",borderRadius:12,padding:16,minWidth:220,background:"#fff",position:"relative"},children:[e.jsx("img",{src:s.icon,alt:s.name,style:{width:38,position:"absolute",top:12,right:12,opacity:.85}}),e.jsx("h3",{children:s.name}),e.jsx("p",{children:s.description}),e.jsxs("p",{children:["Price: ",e.jsx("b",{children:s.price})," coins"]}),a[s.key]&&a[s.key]>Date.now()?e.jsxs("span",{style:{color:"green"},children:["Active (",Math.ceil((a[s.key]-Date.now())/6e4)," min left)"]}):e.jsx("button",{onClick:()=>h(s),disabled:t<s.price,children:"Purchase"})]},s.key))})]})},Ls="data:image/png;base64,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",Ds="/assets/shape-CORa6uGx.png",Ws="/assets/vecteezy_crown-slot-machine_58273750-B1lA6sIg.png",Us="_memoryMatchGame_1kxvg_1",Os="_memoryGrid_1kxvg_11",zs="_memoryCard_1kxvg_19",Gs="_flipped_1kxvg_31",ye={memoryMatchGame:Us,memoryGrid:Os,memoryCard:zs,flipped:Gs},Ye=["🍎","🍌","🍇","🍉","🍒","🍋","🍍","🥝"],Je=[...Ye,...Ye];function Ze(t){return t.map(n=>[Math.random(),n]).sort((n,c)=>n[0]-c[0]).map(([,n])=>n)}const Vs=({onScore:t})=>{const[n,c]=o.useState(()=>Ze(Je)),[a,i]=o.useState([]),[h,s]=o.useState([]),[u,p]=o.useState(0),[g,m]=o.useState(!1),f=l=>{a.length===2||a.includes(l)||h.includes(l)||g||i(d=>[...d,l])};ne.useEffect(()=>{if(a.length===2){p(b=>b+1);const[l,d]=a;n[l]===n[d]?(s(b=>[...b,l,d]),i([])):setTimeout(()=>i([]),800)}},[a,n]),ne.useEffect(()=>{h.length===n.length&&n.length>0&&(m(!0),t(1e3-u*10))},[h,n,u,t]);const y=()=>{c(Ze(Je)),i([]),s([]),p(0),m(!1)};return e.jsxs("div",{className:ye.memoryMatchGame,children:[e.jsx("h4",{children:"Memory Match"}),e.jsx("div",{className:ye.memoryGrid,children:n.map((l,d)=>e.jsx("button",{className:ye.memoryCard+(a.includes(d)||h.includes(d)?" "+ye.flipped:""),onClick:()=>f(d),disabled:a.length===2||h.includes(d)||g,children:e.jsx("span",{children:a.includes(d)||h.includes(d)?l:"❓"})},d))}),e.jsxs("div",{style:{margin:"12px 0"},children:["Moves: ",u]}),g&&e.jsxs("div",{style:{color:"#1bbf4c",fontWeight:700,margin:"8px 0"},children:["🎉 You matched all cards!",e.jsx("button",{onClick:y,style:{marginLeft:12,background:"#ffe259",borderRadius:6,padding:"4px 14px",fontWeight:700},children:"Play Again"})]})]})},Fs="arcade_scores",qs="arcade_leaderboard";async function Be(t,n,c){await M.from(Fs).insert([{game:t,userid:n,score:c}])}async function Xe(t){const{data:n,error:c}=await M.from(qs).select("*").eq("game",t).order("score",{ascending:!1}).limit(10);return c?[]:n}const V=10,$e={x:1,y:1,dir:"right"},et={x:8,y:8},tt=Array.from({length:V*V},(t,n)=>n);function Ks(t,n){return n*V+t}const Hs=({userid:t})=>{const[n,c]=o.useState($e),[a,i]=o.useState(et),[h,s]=o.useState(tt),[u,p]=o.useState(0),[g,m]=o.useState(0),[f,y]=o.useState(!1);return o.useEffect(()=>{if(f){const l=setTimeout(()=>{c($e),i(et),s(tt),p(0),y(!1)},2e3);return()=>clearTimeout(l)}},[f]),o.useEffect(()=>{const l=d=>{f||c(b=>{let{x:j,y:r,dir:w}=b;return d.key==="ArrowUp"&&(r=Math.max(0,r-1),w="up"),d.key==="ArrowDown"&&(r=Math.min(V-1,r+1),w="down"),d.key==="ArrowLeft"&&(j=Math.max(0,j-1),w="left"),d.key==="ArrowRight"&&(j=Math.min(V-1,j+1),w="right"),{x:j,y:r,dir:w}})};return window.addEventListener("keydown",l),()=>window.removeEventListener("keydown",l)},[f]),o.useEffect(()=>{if(f)return;const l=setInterval(()=>{i(d=>{const b=[{x:d.x+1,y:d.y},{x:d.x-1,y:d.y},{x:d.x,y:d.y+1},{x:d.x,y:d.y-1}].filter(({x:j,y:r})=>j>=0&&j<V&&r>=0&&r<V);return b[Math.floor(Math.random()*b.length)]||d})},400);return()=>clearInterval(l)},[f]),o.useEffect(()=>{const l=Ks(n.x,n.y);h.includes(l)&&(s(d=>d.filter(b=>b!==l)),p(d=>d+10)),n.x===a.x&&n.y===a.y&&(m(u),y(!0)),h.length===0&&(m(u),y(!0))},[n,a,h,u]),o.useEffect(()=>{f&&g>0&&t&&Be("Pacman",t,g)},[f,g,t]),e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Pacman"}),e.jsx("div",{className:"arcade-grid",children:Array.from({length:V*V}).map((l,d)=>{const b=d%V,j=Math.floor(d/V);let r="";return n.x===b&&n.y===j?r="😋":a.x===b&&a.y===j?r="👻":h.includes(d)&&(r="•"),e.jsx("div",{className:"arcade-cell",children:r},d)})}),e.jsxs("div",{children:["Score: ",u]}),f&&e.jsx("div",{children:h.length===0?"You Win!":"Game Over"})]})},ge=({game:t})=>{const[n,c]=o.useState([]);return o.useEffect(()=>{Xe(t).then(c);const a=setInterval(()=>Xe(t).then(c),5e3);return()=>clearInterval(a)},[t]),e.jsxs("div",{style:{background:"#222",borderRadius:8,padding:8,margin:"8px 0",color:"#fff",minWidth:180},children:[e.jsxs("b",{children:[t," Top 10"]}),e.jsxs("ol",{style:{margin:0,paddingLeft:18},children:[n.length===0&&e.jsx("li",{style:{color:"#888"},children:"No scores yet"}),n.map((a,i)=>e.jsxs("li",{children:[a.name,": ",a.score]},i))]})]})},Qs=({onBack:t,userId:n})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:t,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx(Hs,{userid:n}),e.jsx(ge,{game:"Pacman"})]}),Z=200,X=200,nt=5;function st(){return{x:Math.random()*Z,y:Math.random()*X,dx:(Math.random()-.5)*2,dy:(Math.random()-.5)*2,r:10+Math.random()*10}}const Ys=({userid:t})=>{const[n,c]=o.useState({x:Z/2,y:X/2,angle:0}),[a,i]=o.useState(Array.from({length:nt},st)),[h,s]=o.useState(0),[u,p]=o.useState(!1);return o.useEffect(()=>{if(u){const g=setTimeout(()=>{c({x:Z/2,y:X/2,angle:0}),i(Array.from({length:nt},st)),s(0),p(!1)},2e3);return()=>clearTimeout(g)}},[u]),o.useEffect(()=>{const g=m=>{u||c(f=>{let{x:y,y:l,angle:d}=f;return m.key==="ArrowLeft"&&(d-=.2),m.key==="ArrowRight"&&(d+=.2),m.key==="ArrowUp"&&(y+=Math.cos(d)*5,l+=Math.sin(d)*5),y=(y+Z)%Z,l=(l+X)%X,{x:y,y:l,angle:d}})};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[u]),o.useEffect(()=>{if(u)return;const g=setInterval(()=>{i(m=>m.map(f=>({...f,x:(f.x+f.dx+Z)%Z,y:(f.y+f.dy+X)%X}))),a.forEach(m=>{Math.hypot(m.x-n.x,m.y-n.y)<m.r+5&&p(!0)})},50);return()=>clearInterval(g)},[n,a,u]),o.useEffect(()=>{u||s(g=>g+1)},[a,u]),o.useEffect(()=>{u&&h>0&&t&&Be("Asteroids",t,h)},[u,h,t]),e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Asteroids"}),e.jsxs("svg",{width:Z,height:X,style:{background:"#111"},children:[e.jsx("circle",{cx:n.x,cy:n.y,r:5,fill:"yellow"}),a.map((g,m)=>e.jsx("circle",{cx:g.x,cy:g.y,r:g.r,fill:"gray"},m))]}),e.jsxs("div",{children:["Score: ",h]}),u&&e.jsx("div",{children:"Game Over"})]})},Js=({onBack:t,userId:n})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:t,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx(Ys,{userid:n}),e.jsx(ge,{game:"Asteroids"})]}),se=16,ae=10,at=[[[1,1,1,1]],[[1,1],[1,1]],[[0,1,0],[1,1,1]],[[1,1,0],[0,1,1]],[[0,1,1],[1,1,0]],[[1,0,0],[1,1,1]],[[0,0,1],[1,1,1]]];function Pe(){return{shape:at[Math.floor(Math.random()*at.length)],x:3,y:0}}const Zs=({userid:t})=>{const[n,c]=o.useState(Array.from({length:se},()=>Array(ae).fill(0))),[a,i]=o.useState(Pe()),[h,s]=o.useState(0),[u,p]=o.useState(!1);o.useEffect(()=>{if(u){const y=setTimeout(()=>{c(Array.from({length:se},()=>Array(ae).fill(0))),i(Pe()),s(0),p(!1)},2e3);return()=>clearTimeout(y)}},[u]);const g=(y,l)=>{const d=y.map(b=>[...b]);return l.shape.forEach((b,j)=>b.forEach((r,w)=>{if(r){const A=l.x+w,R=l.y+j;R>=0&&R<se&&A>=0&&A<ae&&(d[R][A]=1)}})),d},m=ne.useCallback((y,l,d=a.shape)=>{for(let b=0;b<d.length;b++)for(let j=0;j<d[b].length;j++)if(d[b][j]){const r=a.x+y+j,w=a.y+l+b;if(r<0||r>=ae||w>=se||w>=0&&n[w][r])return!1}return!0},[a,n]);o.useEffect(()=>{if(u)return;const y=setInterval(()=>{m(0,1)?i(l=>({...l,y:l.y+1})):(c(l=>g(l,a)),c(l=>{const d=l.filter(j=>j.some(r=>!r)),b=se-d.length;return b>0&&s(j=>j+b*100),[...Array.from({length:b},()=>Array(ae).fill(0)),...d]}),i(Pe()),m(0,0)||p(!0))},400);return()=>clearInterval(y)},[a,n,u,m]),o.useEffect(()=>{u&&h>0&&t&&Be("Tetris",t,h)},[u,h,t]),o.useEffect(()=>{const y=l=>{if(!u&&(l.key==="ArrowLeft"&&m(-1,0)&&i(d=>({...d,x:d.x-1})),l.key==="ArrowRight"&&m(1,0)&&i(d=>({...d,x:d.x+1})),l.key==="ArrowDown"&&m(0,1)&&i(d=>({...d,y:d.y+1})),l.key==="ArrowUp")){const d=a.shape[0].map((b,j)=>a.shape.map(r=>r[j]).reverse());m(0,0,d)&&i(b=>({...b,shape:d}))}};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[a,n,u,m]);const f=()=>{const y=n.map(l=>[...l]);return a.shape.forEach((l,d)=>l.forEach((b,j)=>{if(b){const r=a.x+j,w=a.y+d;w>=0&&w<se&&r>=0&&r<ae&&(y[w][r]=2)}})),y.map((l,d)=>l.map((b,j)=>e.jsx("div",{className:b===2?"arcade-cell tetris-active":b?"arcade-cell tetris-filled":"arcade-cell"},j+"-"+d)))};return e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Tetris"}),e.jsx("div",{className:"arcade-grid tetris-grid",children:f()}),e.jsxs("div",{children:["Score: ",h]}),u&&e.jsx("div",{children:"Game Over"})]})},Xs=({onBack:t,userId:n})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:t,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx(Zs,{userid:n}),e.jsx(ge,{game:"Tetris"})]}),xe=8,J=7,$s=({userid:t})=>{const[n,c]=o.useState(Math.floor(J/2)),[a,i]=o.useState(0),[h,s]=o.useState(0),[u,p]=o.useState(!1);ne.useEffect(()=>{if(u){const y=setTimeout(()=>{c(Math.floor(J/2)),i(0),s(0),p(!1)},2e3);return()=>clearTimeout(y)}},[u]);const g=()=>{if(u)return;let y=n;for(let d=0;d<xe;d++)y+=Math.random()<.5?-1:1,y=Math.max(0,Math.min(J-1,y));i(xe),c(y);const l=[10,20,50,100,50,20,10][y];s(l),p(!0)};ne.useEffect(()=>{u&&h>0&&t&&Be("Plinko",t,h)},[u,h,t]);const m=()=>{const y=[];for(let l=1;l<xe;l++)for(let d=0;d<J;d++)(l+d)%2===1&&y.push(e.jsx("div",{className:"plinko-peg",style:{gridColumn:d+1,gridRow:l+1},children:"●"},`peg-${d}-${l}`));return y},f=()=>e.jsx("div",{style:{display:"flex",width:J*20,margin:"0 auto"},children:[10,20,50,100,50,20,10].map((y,l)=>e.jsx("div",{className:"plinko-bucket",style:{width:20},children:y},l))});return e.jsxs("div",{className:"arcade-game",children:[e.jsx("h4",{children:"Plinko"}),e.jsxs("div",{className:"arcade-grid plinko-grid",style:{position:"relative"},children:[Array.from({length:xe*J}).map((y,l)=>{const d=l%J,b=Math.floor(l/J);let j="";return b===a&&d===n&&(j="⚪"),e.jsx("div",{className:"arcade-cell",children:j},l)}),m()]}),f(),e.jsx("button",{onClick:g,disabled:u,children:"Drop Ball"}),e.jsxs("div",{children:["Score: ",h]}),u&&e.jsx("div",{children:"Game Over"})]})},ea=({onBack:t,userId:n})=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:16},children:[e.jsx("button",{onClick:t,style:{alignSelf:"flex-start",margin:8},children:" Back to Arcade"}),e.jsx($s,{userid:n}),e.jsx(ge,{game:"Plinko"})]}),ce=[{icon:"🍒",color:"#e74c3c",payout:2},{icon:"🍋",color:"#f1c40f",payout:3},{icon:"🔔",color:"#f39c12",payout:5},{icon:"💎",color:"#00bfff",payout:10},{icon:"7️⃣",color:"#e67e22",payout:20},{icon:"⭐",color:"#f9e79f",payout:15},{icon:"🍀",color:"#27ae60",payout:8}],ct=3,dt=3,ta=.1,na=5,sa=()=>ce[Math.floor(Math.random()*ce.length)],ut=()=>Array.from({length:dt},sa),aa=()=>Array.from({length:ct},ut);function oa(t){var a,i,h;let n=0;const c=[];for(let s=0;s<dt;s++){const u=t[0][s].icon;t.every(p=>p[s].icon===u)&&(n+=((a=ce.find(p=>p.icon===u))==null?void 0:a.payout)||0,c.push(s))}return t[0][0].icon===t[1][1].icon&&t[1][1].icon===t[2][2].icon&&(n+=((i=ce.find(s=>s.icon===t[0][0].icon))==null?void 0:i.payout)||0,c.push(3)),t[0][2].icon===t[1][1].icon&&t[1][1].icon===t[2][0].icon&&(n+=((h=ce.find(s=>s.icon===t[0][2].icon))==null?void 0:h.payout)||0,c.push(4)),{win:n,winLines:c}}const ia=({userId:t,coinBalance:n,onDeposit:c,onWithdraw:a,onScore:i,onBack:h})=>{const[s,u]=o.useState(aa()),[p,g]=o.useState(!1),[m,f]=o.useState(""),[y,l]=o.useState("info"),[d,b]=o.useState(10),[j,r]=o.useState(!1),[w,A]=o.useState([]),[R,P]=o.useState(!1),[D,k]=o.useState(null),[x,E]=o.useState(""),[_,O]=o.useState(!1),[he,te]=o.useState(""),[Te]=je(),v=Le(),C=n>=d&&!p,S=async()=>{if(!C)return;g(!0),f("Spinning..."),l("info"),A([]);const T=localStorage.getItem("userId")||"unknown";await $(T,"arcade_spin",{game:"SlotMachine",bet:d}),setTimeout(()=>{const B=Array.from({length:ct},ut);u(B);const{win:U,winLines:G}=oa(B);A(G);const ie=U*d;let Me="",Re="error";U>0?(Me=`You win ${ie} coins!`,Re="success",i(ie),$(T,"arcade_win",{game:"SlotMachine",win:ie})):(Me="No win. Try again!",Re="error"),Math.random()<ta?(r(!0),setTimeout(()=>{const Ee=Math.floor(Math.random()*10+1)*na*d;f(`Bonus Game! You won ${Ee} coins!`),l("success"),i(Ee),$(T,"arcade_bonus",{game:"SlotMachine",bonus:Ee}),r(!1)},1200)):(f(Me),l(Re)),g(!1)},1200),a(d)},W=async()=>{if(!v){f("Please connect your TON wallet first."),l("error");return}P(!0),f("Awaiting TON payment..."),l("info");try{const U=await Te.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ne,amount:"100000000"}]});k(U.boc||"");const G=v.account.address;try{await At({userId:G,txHash:U.boc}),await ze({userId:G,amount:100,action:"deposit"}),c(100),f("Deposit verified! +100 coins."),l("success"),await $(v.account.address,"arcade_deposit",{game:"SlotMachine",tonAmount:.1,coinAmount:100})}catch{f("Deposit not verified. Please contact support."),l("error")}}catch(T){let B="Deposit cancelled or failed.";typeof T=="object"&&T&&"message"in T&&typeof T.message=="string"&&(B+=`
${T.message}`),f(B),l("error")}P(!1)},z=async()=>{var T;if(!x){te("Enter your TON wallet address."),l("error");return}O(!0),te("Processing withdrawal..."),l("info");try{const G=((T=v==null?void 0:v.account)==null?void 0:T.address)||"unknown";try{await ze({userId:G,amount:100,action:"withdraw"}),te("Withdrawal request accepted! TON will be sent soon."),l("success"),a(100),await $(G,"arcade_withdraw",{game:"SlotMachine",tonAmount:.1,coinAmount:100,withdrawAddress:x})}catch{te("Withdrawal failed. Please contact support."),l("error")}}catch(B){let U="Withdrawal failed.";typeof B=="object"&&B&&"message"in B&&typeof B.message=="string"&&(U+=`
${B.message}`),te(U),l("error")}O(!1)};return e.jsxs("div",{style:{background:"#222",borderRadius:16,padding:24,color:"#fff",boxShadow:"0 0 24px #f39c12",maxWidth:400,margin:"0 auto",position:"relative"},children:[e.jsx("button",{onClick:h,style:{position:"absolute",left:16,top:16,background:"#fff",color:"#f39c12",border:"none",borderRadius:8,padding:"2px 10px",fontWeight:700,cursor:"pointer",boxShadow:"0 0 4px #000"},children:"← Back"}),e.jsx("h2",{style:{color:"#f39c12",textShadow:"0 0 8px #fff"},children:"🎰 Slot Machine"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:8},children:[e.jsx("span",{style:{fontWeight:600,color:"#fff"},children:"User ID:"})," ",e.jsx("span",{style:{marginLeft:8,color:"#f9e79f"},children:t})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",marginBottom:8},children:[e.jsx("span",{style:{fontWeight:600,color:"#fff"},children:"Balance:"})," ",e.jsx("span",{style:{marginLeft:8,color:"#00ff99"},children:n})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:8,marginBottom:8},children:[e.jsx(Se,{style:{marginBottom:8}}),e.jsx("button",{onClick:W,disabled:R,style:{background:"#27ae60",color:"#fff",borderRadius:8,padding:"4px 12px",border:"none",fontWeight:600,marginBottom:4},children:R?"Processing...":"Deposit 0.1 TON → 100 coins"}),D&&e.jsx("div",{style:{color:"#00ff99",fontSize:10},children:"Tx sent!"}),e.jsxs("div",{style:{marginTop:8,width:"100%"},children:[e.jsx("input",{type:"text",placeholder:"Your TON wallet address",value:x,onChange:T=>E(T.target.value),style:{width:220,borderRadius:4,padding:4,marginRight:8},disabled:_}),e.jsx("button",{onClick:z,disabled:_||!n,style:{background:"#c0392b",color:"#fff",borderRadius:8,padding:"4px 12px",border:"none",fontWeight:600},children:_?"Processing...":"Withdraw 100 coins → 0.1 TON"}),he&&e.jsx("div",{style:{color:"#00ff99",fontSize:10},children:he})]})]}),e.jsxs("div",{style:{background:"#111",borderRadius:12,padding:12,margin:"16px 0",boxShadow:"0 0 12px #f39c12 inset",display:"flex",flexDirection:"column",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:8,marginBottom:8},children:s.map((T,B)=>e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:T.map((U,G)=>e.jsx("div",{style:{width:48,height:48,fontSize:32,background:w.includes(G)?"#f9e79f":U.color,borderRadius:8,display:"flex",alignItems:"center",justifyContent:"center",boxShadow:w.includes(G)?"0 0 16px #fff":"0 0 8px #000",border:"2px solid #fff",transition:"background 0.3s, box-shadow 0.3s",animation:p?"spin 0.6s linear infinite":void 0},children:U.icon},G))},B))}),e.jsxs("div",{style:{margin:"8px 0",color:"#fff",fontWeight:600},children:["Bet: ",e.jsx("input",{type:"number",min:1,max:n,value:d,onChange:T=>b(Math.max(1,Math.min(n,Number(T.target.value)))),style:{width:60,borderRadius:4,padding:2}})]}),e.jsx("button",{onClick:S,disabled:!C,style:{background:"#f39c12",color:"#fff",borderRadius:12,padding:"8px 32px",fontWeight:700,fontSize:20,boxShadow:"0 0 16px #f9e79f",border:"none",marginTop:8,cursor:C?"pointer":"not-allowed",transition:"background 0.2s"},children:p?"Spinning...":"SPIN"}),j&&e.jsx("div",{style:{color:"#00ff99",fontWeight:700,fontSize:18,marginTop:8,textShadow:"0 0 8px #fff"},children:"BONUS GAME!"}),e.jsx("div",{style:{marginTop:12,minHeight:24,color:y==="success"?"#00ff99":y==="error"?"#ff4d4f":"#fff",fontWeight:600,textShadow:y==="success"?"0 0 8px #00ff99":y==="error"?"0 0 8px #ff4d4f":void 0,animation:y==="success"&&m?"popSuccess 0.5s":y==="error"&&m?"popError 0.5s":void 0,transition:"color 0.2s, text-shadow 0.2s"},children:m}),e.jsx("style",{children:`
          @keyframes popSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
          }
          @keyframes popError {
            0% { transform: scale(1); }
            50% { transform: scale(1.15); }
            100% { transform: scale(1); }
          }
        `})]}),e.jsx(ge,{game:"SlotMachine"}),e.jsx("style",{children:`
        @keyframes spin {
          0% { transform: rotateX(0deg); }
          100% { transform: rotateX(360deg); }
        }
      `})]})},ra=t=>{const{userId:n}=t,[c,a]=o.useState(null);return c==="Pacman"?e.jsx(Qs,{onBack:()=>a(null),userId:n}):c==="Asteroids"?e.jsx(Js,{onBack:()=>a(null),userId:n}):c==="Tetris"?e.jsx(Xs,{onBack:()=>a(null),userId:n}):c==="Plinko"?e.jsx(ea,{onBack:()=>a(null),userId:n}):c==="SlotMachine"?e.jsx(ia,{userId:n,coinBalance:t.coinBalance||0,onDeposit:t.onDeposit||(()=>{}),onWithdraw:t.onWithdraw||(()=>{}),onScore:t.onScore||(()=>{}),onBack:()=>a(null)}):c==="MemoryMatch"?e.jsx(Vs,{onScore:t.onScore||(()=>{})}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:24},children:[e.jsx("h2",{children:"Arcade Mini-Games"}),e.jsxs("div",{style:{background:"#ffe259",color:"#24308a",borderRadius:10,padding:"10px 18px",fontWeight:700,marginBottom:8,boxShadow:"0 2px 8px #24308a22"},children:[e.jsxs("span",{style:{fontSize:16},children:["🌞 ","Summer Memory Match!"]}),e.jsx("div",{style:{fontSize:13,fontWeight:400},children:"Play Memory Match for bonus rewards this week!"})]}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:32,justifyContent:"center"},children:[e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("MemoryMatch"),"aria-label":"Play Memory Match",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("MemoryMatch")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("span",{style:{fontSize:32,marginBottom:4},children:"🧠"}),"Memory Match"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Pacman"),"aria-label":"Play Pacman",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Pacman")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:Ls,alt:"Pacman",style:{width:38,marginBottom:4}}),"Pacman"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Asteroids"),"aria-label":"Play Asteroids",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Asteroids")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:De,alt:"Asteroids",style:{width:38,marginBottom:4}}),"Asteroids"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Tetris"),"aria-label":"Play Tetris",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Tetris")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:Ds,alt:"Tetris",style:{width:38,marginBottom:4}}),"Tetris"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("Plinko"),"aria-label":"Play Plinko",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("Plinko")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:[e.jsx("img",{src:Ue,alt:"Plinko",style:{width:38,marginBottom:4}}),"Plinko"]}),e.jsxs("button",{className:"arcade-game",style:{minWidth:120,minHeight:80,background:"linear-gradient(135deg,#f39c12,#e74c3c,#00bfff,#f9e79f)",color:"#fff",fontWeight:700,boxShadow:"0 0 16px #f39c12",outline:"none",transition:"box-shadow 0.2s",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},onClick:()=>a("SlotMachine"),"aria-label":"Play Slot Machine",tabIndex:0,onKeyDown:s=>{(s.key==="Enter"||s.key===" ")&&a("SlotMachine")},onFocus:s=>s.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:s=>s.currentTarget.style.boxShadow="0 0 16px #f39c12",children:[e.jsx("img",{src:Ws,alt:"Slot Machine",style:{width:38,marginBottom:4}}),"Slot Machine 🎰"]})]})]})},la="_airdropBg_w10tt_1",ca="_airdropContainer_w10tt_10",da="_headerSection_w10tt_23",ua="_headerIcon_w10tt_28",fa="_title_w10tt_43",ga="_subtitle_w10tt_50",ha="_highlight_w10tt_56",pa="_walletSection_w10tt_61",ma="_tonBtn_w10tt_65",ya="_donateCard_w10tt_77",xa="_donateTitle_w10tt_90",ba="_donateIcon_w10tt_99",va="_donateDesc_w10tt_105",Aa="_inputRow_w10tt_112",ja="_input_w10tt_112",Sa="_donateBtn_w10tt_128",wa="_success_w10tt_147",ka="_error_w10tt_153",Ca="_effectsSection_w10tt_159",Ia="_effectsTitle_w10tt_164",Na="_effectsGrid_w10tt_172",Ba="_effectCard_w10tt_179",Ta="_effectIcon_w10tt_209",Ma="_effectName_w10tt_215",Ra="_effectDesc_w10tt_221",N={airdropBg:la,airdropContainer:ca,headerSection:da,headerIcon:ua,title:fa,subtitle:ga,highlight:ha,walletSection:pa,tonBtn:ma,donateCard:ya,donateTitle:xa,donateIcon:ba,donateDesc:va,inputRow:Aa,input:ja,donateBtn:Sa,success:wa,error:ka,effectsSection:Ca,effectsTitle:Ia,effectsGrid:Na,effectCard:Ba,effectIcon:Ta,effectName:Ma,effectDesc:Ra},Ea=()=>{const[t,n]=o.useState(""),[c,a]=o.useState(null),[i,h]=o.useState(!1),[s]=je(),u=async()=>{if(a(null),!t||isNaN(Number(t))||Number(t)<=0){a("Please enter a valid TON amount.");return}h(!0);try{await s.sendTransaction({validUntil:Math.floor(Date.now()/1e3)+360,messages:[{address:Ne,amount:(Number(t)*1e9).toString()}]}),a("✅ Thank you for your donation!"),n("");const p=localStorage.getItem("userId")||"unknown";await vt({userId:p,amount:Number(t)}),await $(p,"airdrop_donation",{amountTon:Number(t)})}catch(p){let g="Transaction cancelled or failed.";typeof p=="object"&&p&&"message"in p&&typeof p.message=="string"&&(g+=`
${p.message}`),a(g)}h(!1)};return e.jsx("div",{className:N.airdropBg,children:e.jsxs("div",{className:N.airdropContainer,children:[e.jsxs("div",{className:N.headerSection,children:[e.jsx("img",{src:ee,alt:"Airdrop",className:N.headerIcon}),e.jsx("h2",{className:N.title,children:"Airdrop & Charity"}),e.jsxs("p",{className:N.subtitle,children:["Connect your TON wallet and become a Guardian Angel!",e.jsx("br",{}),e.jsx("span",{className:N.highlight,children:"Donate any amount of TON to charity and help create a better tomorrow."})]})]}),e.jsx("div",{className:N.walletSection,children:e.jsx(Se,{className:N.tonBtn})}),e.jsxs("div",{className:N.donateCard,children:[e.jsxs("div",{className:N.donateTitle,children:[e.jsx("img",{src:K,alt:"Guardian Angel",className:N.donateIcon}),e.jsx("span",{children:"Become a Guardian Angel"})]}),e.jsx("div",{className:N.donateDesc,children:"Enter the amount of TON you wish to donate. Every contribution makes a difference!"}),e.jsxs("div",{className:N.inputRow,children:[e.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Amount (TON)",value:t,onChange:p=>n(p.target.value),className:N.input,"aria-label":"Donation amount in TON",tabIndex:0,style:{outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},onFocus:p=>p.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:p=>p.currentTarget.style.boxShadow="0 0 0 2px #24308a33"}),e.jsx("button",{onClick:u,className:N.donateBtn,disabled:i,"aria-label":"Donate TON to charity",tabIndex:0,style:{outline:"none",boxShadow:"0 0 0 2px #24308a33",transition:"box-shadow 0.2s"},onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&u()},onFocus:p=>p.currentTarget.style.boxShadow="0 0 0 3px #24308a",onBlur:p=>p.currentTarget.style.boxShadow="0 0 0 2px #24308a33",children:i?"Processing...":"Donate"})]}),c&&e.jsxs("div",{className:c.startsWith("✅")?N.success:N.error,style:c.startsWith("✅")?{animation:"popSuccess 0.5s"}:{},children:[c,e.jsx("style",{children:`
												@keyframes popSuccess {
													0% { transform: scale(0.8); opacity: 0.5; }
													60% { transform: scale(1.1); opacity: 1; }
													100% { transform: scale(1); opacity: 1; }
												}
											`})]})]}),e.jsxs("div",{className:N.effectsSection,children:[e.jsx("h3",{className:N.effectsTitle,children:"Airdrop Effects"}),e.jsxs("div",{className:N.effectsGrid,children:[e.jsxs("div",{className:N.effectCard,children:[e.jsx("img",{src:Ce,alt:"Boost",className:N.effectIcon}),e.jsx("div",{className:N.effectName,children:"Boosts"}),e.jsx("div",{className:N.effectDesc,children:"Special boosts for all donors during airdrop events."})]}),e.jsxs("div",{className:N.effectCard,children:[e.jsx("img",{src:q,alt:"Rewards",className:N.effectIcon}),e.jsx("div",{className:N.effectName,children:"Exclusive Rewards"}),e.jsx("div",{className:N.effectDesc,children:"Unlock unique in-game rewards and badges for your generosity."})]}),e.jsxs("div",{className:N.effectCard,children:[e.jsx("img",{src:K,alt:"Leaderboard",className:N.effectIcon}),e.jsx("div",{className:N.effectName,children:"Charity Leaderboard"}),e.jsx("div",{className:N.effectDesc,children:"Top donors are featured on the Guardian Angel leaderboard."})]})]})]})]})})},_a="/assets/clickimg-DfywW0u5.png",Pa="/assets/double-tap-D8lEel7J.png";function La(t){return 1+Math.floor(t/1e4)*2}const Da=({coinCount:t})=>{const n=La(t);return e.jsxs("span",{className:I.coinsPerTap,children:[e.jsx("img",{src:Pa,alt:"Coins per tap",style:{width:22,marginRight:4,verticalAlign:"middle"}}),"+",n," /tap"]})},Wa=({onClick:t,imgSrc:n})=>{const c=o.useRef(null),a=o.useRef(null),i=()=>{c.current&&(c.current.classList.add(I.pressed),setTimeout(()=>c.current&&c.current.classList.remove(I.pressed),120)),a.current&&(a.current.style.opacity="1",a.current.classList.remove(I.coinGain),a.current.offsetWidth,a.current.classList.add(I.coinGain),setTimeout(()=>a.current&&(a.current.style.opacity="0"),700)),jn("mining"),t()};return e.jsxs("div",{className:I.miningButtonWrapper,children:[e.jsx("img",{ref:c,src:n,alt:"Click to earn coins",className:I.miningButton,onClick:i}),e.jsx("div",{ref:a,className:I.coinGain,style:{opacity:0},children:"+💰"})]})},Ua=({coinCount:t})=>e.jsxs("h1",{className:I.coinBalance,children:[e.jsx("img",{src:q,alt:"Coin",style:{width:32,marginRight:8,verticalAlign:"middle"}}),t]}),Oa=({coinsPerHour:t})=>e.jsxs("div",{className:I.passiveIncome,children:[e.jsx("img",{src:fe,alt:"Passive Income",style:{width:22,marginRight:4,verticalAlign:"middle"}}),"+",t.toLocaleString()," /hr"]}),za="/assets/battery-aLTBX9JC.png",Ga=({energy:t,maxEnergy:n})=>{const c=Math.max(0,Math.min(100,t/n*100));return e.jsxs("div",{className:I.energyBarContainer,children:[e.jsx("div",{className:I.energyBar,style:{width:`${c}%`}}),e.jsxs("span",{className:I.energyText,children:[e.jsx("img",{src:za,alt:"Energy",style:{width:18,marginRight:4,verticalAlign:"middle"}}),t," / ",n]})]})};function Va(t){return 1+Math.floor(t/1e4)*2}function ot(){return 1e4}const be=5e3;function Fa(){return be}const qa=({userId:t})=>{const[n,c]=o.useState("marketplace");return e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",gap:8,marginBottom:16,justifyContent:"center"},children:[e.jsx("button",{onClick:()=>c("marketplace"),style:{fontWeight:n==="marketplace"?700:400,background:n==="marketplace"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"Marketplace Listings"}),e.jsx("button",{onClick:()=>c("nfts"),style:{fontWeight:n==="nfts"?700:400,background:n==="nfts"?"#ffe259":"#fff",borderRadius:6,padding:"4px 16px",border:"1px solid #eee"},children:"NFT Gallery & Mint"})]}),n==="marketplace"?e.jsx(Bt,{}):e.jsx(lt,{userId:t})]})};function Ka(){const[t,n]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("trophiesEarned")||"{}")}catch{return{}}}),c=v=>{t[v.key]||(n(C=>{const S={...C,[v.key]:!0};return localStorage.setItem("trophiesEarned",JSON.stringify(S)),S}),i(C=>C+v.reward),g&&kt({userId:g,achievement:v.key}))},[a,i]=o.useState(0),[h,s]=o.useState(0),[u,p]=o.useState(null),[g,m]=o.useState("");o.useEffect(()=>{g&&Mt("app_loaded",g)},[g]);const[f,y]=o.useState("coin"),[l,d]=o.useState(Fa()),[b,j]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("purchasedItems")||"{}")}catch{return{}}}),[r,w]=o.useState(()=>{try{return JSON.parse(localStorage.getItem("upgrades")||"{}")}catch{return{}}}),[A,R]=o.useState(1),[P,D]=o.useState(1),[k,x]=o.useState({});o.useEffect(()=>{const v=setInterval(()=>{let C=ot();r.passiveIncome&&(C+=100*Math.pow(2,r.passiveIncome-1)),r.hungerDrive&&(C+=500*Math.pow(2,r.hungerDrive-1)),r.autoMiner&&(C+=50*Math.pow(2,r.autoMiner-1)),r.magnet&&(C+=100*Math.pow(2,r.magnet-1)),k.passiveboost&&k.passiveboost>Date.now()&&(C*=2),i(S=>S+C/3600)},1e3);return()=>clearInterval(v)},[r,k]),o.useEffect(()=>{Rt(),new Date().getHours()===10&&Notification.permission==="granted"&&Et("Don’t forget your daily check-in!",{body:"Earn your daily bonus in the app."})},[]),o.useEffect(()=>{(async()=>{const C=localStorage.getItem("userId");if(C){m(C);const S=await We(C);S&&(i(S.coins),s(S.coins),p(S.country))}else{const W=new URLSearchParams(window.location.search).get("start"),z="You";if(localStorage.setItem("userId",z),m(z),W){const T=await pn(W);if(T&&T.userid!==z){await Ge(T.userid,z,void 0,1);const{data:B}=await M.from("referrals").select("id, referrer_id, referral_level").eq("referred_id",T.userid).single();B&&await Ge(B.referrer_id,z,B.id,B.referral_level+1)}}}})()},[]),o.useEffect(()=>{!g||!u||a!==h&&(_e({userId:g,coins:a}),s(a))},[a,g,u,h]),o.useEffect(()=>{if(!g||!u)return;const v=setInterval(()=>{_e({userId:g,coins:a}),s(a)},3e4);return()=>clearInterval(v)},[a,g,u]);const E=async v=>{w(C=>{const S=C[v]||0;if(S>=5e3)return C;const z={coinPerTap:400,passiveIncome:500,energy:300,hungerDrive:500,energyRegen:350,tapStreak:600,criticalTap:700,autoMiner:800,energySaver:900,magnet:1e3,ultraBoost:2e3,goldenTouch:2500}[v]*Math.pow(2,S);if(a<z)return C;i(B=>B-z),g&&bt({userId:g,upgrade:v,cost:z}),v==="energy"&&d(B=>B+100*Math.pow(2,S)),v==="ultraBoost"&&(R(B=>B*2),D(B=>B*2),setTimeout(()=>{R(B=>B/2),D(B=>B/2)},60*60*1e3));const T={...C,[v]:S+1};return localStorage.setItem("upgrades",JSON.stringify(T)),T})},_=async v=>{const C=v.target.value;p(C),g&&await fn({userid:g,country:C,coins:0})},O=o.useCallback(()=>{let v=Va(a);return r.coinPerTap&&(v+=2*Math.pow(2,r.coinPerTap-1)),r.goldenTouch&&(v+=10*Math.pow(2,r.goldenTouch-1)),k.doubletap&&k.doubletap>Date.now()&&(v*=2),k.megatap&&k.megatap>Date.now()&&(v*=100),k.doubleCoins&&k.doubleCoins>Date.now()&&(v*=2),b.goldentap&&(v+=100),v*A},[a,r,k,b,A]);o.useEffect(()=>{if(k.autoMiner&&k.autoMiner>Date.now()){const v=setInterval(()=>{i(C=>C+O())},1e3);return()=>clearInterval(v)}},[k,O]);const he=async()=>{if(l<=0)return;let v=O();r.tapStreak&&(v+=10*Math.pow(2,r.tapStreak-1)),r.criticalTap&&Math.random()<.05*r.criticalTap&&(v*=2),i(S=>S+v);let C=1;r.energySaver&&(C=Math.max(1,C-r.energySaver)),d(S=>Math.max(0,S-C)),g&&u&&_e({userId:g,coins:a+v}),k.megatap&&k.megatap>Date.now()&&x(S=>({...S,megatap:0}))},te=v=>{j(S=>{const W={...S,[v.label]:!0};return localStorage.setItem("purchasedItems",JSON.stringify(W)),W}),v.label.includes("Coin Multiplier")&&v.value&&R(v.value),v.label.includes("Energy Multiplier")&&v.value&&D(v.value);const C=Date.now();if(v.effect==="autoclicker"){const S=setInterval(()=>{i(W=>W+O())},1e3);setTimeout(()=>clearInterval(S),60*60*1e3)}if(v.effect==="doubletap"&&x(S=>({...S,doubletap:C+60*60*1e3})),v.effect==="refill"&&d(be*P),v.effect==="passiveboost"&&x(S=>({...S,passiveboost:C+60*60*1e3})),v.effect==="luckyspin"&&Math.random()<.1&&i(S=>S*10),v.effect==="megatap"&&x(S=>({...S,megatap:C+10*1e3})),v.effect==="energysaver"&&x(S=>({...S,energysaver:C+60*60*1e3})),v.effect==="magnet"){const S=setInterval(()=>{i(W=>W+100)},5e3);setTimeout(()=>clearInterval(S),60*60*1e3)}v.effect==="goldentap"&&x(S=>({...S,goldentap:1/0})),v.effect==="ultraboost"&&(R(S=>S*2),D(S=>S*2),setTimeout(()=>{R(S=>S/2),D(S=>S/2)},10*60*1e3))},Te=()=>{if(!u)return e.jsxs("div",{className:I.countrySelection,children:[e.jsx("h1",{children:"Select Your Country"}),e.jsxs("select",{onChange:_,defaultValue:"",children:[e.jsx("option",{value:"",disabled:!0,children:"Choose your country"}),mn.map(v=>e.jsx("option",{value:v,children:v},v))]})]});switch(f){case"Marketplace":return e.jsx(qa,{userId:g});case"AdminAnalytics":return e.jsx(_n,{});case"coin":return e.jsxs("div",{className:I.centerContent,children:[e.jsxs("div",{className:I.topRow,children:[e.jsx("div",{className:I.coinsPerTapTopLeft,children:e.jsx(Da,{coinCount:a})}),e.jsx("div",{className:I.coinBalanceCenter,children:e.jsx(Ua,{coinCount:Math.floor(a)})}),e.jsx("div",{className:I.passiveIncomeTopRight,children:e.jsx(Oa,{coinsPerHour:ot()})})]}),e.jsx(Ga,{energy:l,maxEnergy:be}),e.jsxs("p",{children:["Country: ",u]}),e.jsx(Wa,{onClick:he,imgSrc:_a})]});case"leaderboard":return e.jsx(An,{});case"Shop":return e.jsx(En,{onPurchase:te,purchased:b});case"Trophies":{const v=Object.keys(b).length;return e.jsx(Fn,{coinCount:Math.floor(a),energy:Math.floor(l),shopPurchases:v,earned:t,onEarn:c})}case"Tasks":return e.jsx(ls,{});case"Upgrades":return e.jsx(vs,{upgrades:r,coins:a,onPurchase:E});case"Friends":return e.jsx(As,{});case"Boosts":return e.jsx(Ps,{coinCount:a,activeBoosts:k,onPurchase:v=>{const C=Date.now();v==="doubleCoins"?(x(S=>({...S,doubleCoins:C+60*60*1e3})),i(S=>S-1e3)):v==="energyRefill"?(d(be*P),i(S=>S-500)):v==="autoMiner"?(x(S=>({...S,autoMiner:C+60*60*1e3})),i(S=>S-2e3)):v==="passiveBoost"&&(x(S=>({...S,passiveboost:C+60*60*1e3})),i(S=>S-1500))}});case"Arcade":return e.jsx(ra,{userId:g,coinBalance:a,onDeposit:v=>i(C=>C+v),onWithdraw:v=>i(C=>Math.max(0,C-v)),onScore:v=>i(C=>C+v)});case"Airdrop":return e.jsx(Ea,{});case"profile":return e.jsx(ks,{userId:g});case"chat":return e.jsx(Cs,{userId:g});case"events":return e.jsx(Bs,{userId:g});case"nfts":return e.jsx(lt,{userId:g});case"useranalytics":return e.jsx(Ms,{userId:g});default:return null}};return e.jsx(Dt,{children:e.jsx("div",{className:I.background,children:e.jsxs("div",{className:I.app,children:[Te(),u&&e.jsx(In,{onNavigate:y})]})})})}function Ha(){const t=Le();return o.useEffect(()=>{async function n(){var c,a,i;if(t&&t.account.address){let h;try{const s=(c=window.Telegram)==null?void 0:c.WebApp;s&&((i=(a=s.initDataUnsafe)==null?void 0:a.user)!=null&&i.id)&&(h=s.initDataUnsafe.user.id.toString())}catch{}h&&await M.from("users").update({ton_wallet:t.account.address}).eq("userid",h)}}n()},[t]),null}pt.ready();ft.createRoot(document.getElementById("root")).render(e.jsx(ne.StrictMode,{children:e.jsxs(gt,{manifestUrl:"https://ton-connect.github.io/demo-dapp-with-react-ui/tonconnect-manifest.json",children:[e.jsx(Ha,{}),e.jsx(Ka,{})]})}));
